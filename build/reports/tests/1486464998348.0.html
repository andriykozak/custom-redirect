<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta content="application/xhtml; charset=UTF-8" http-equiv="content-type" /><title>Users : Settings - Dealer Management System V9</title> 
    
<link type="text/css" rel="stylesheet" media="screen" href="/css/datePicker.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/jquery-ui/jquery-ui-1.8rc3.custom.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/jstree-1.0/themes/default/style.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/jquery.tooltip.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/del_styl.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/style.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/jqueryslidemenu.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/css/jquery.jgrowl.css" />
<link type="image/x-icon" rel="icon" href="/images/favicon.ico" />
<link type="image/x-icon" rel="shortcut icon" href="/images/favicon.ico" />
<style media="screen" type="text/css">
&lt;!--

#user_editor {
    display:none;
}

.error {
    color: red;
}

.error1 {
    color: red;
}

#site_search {
    width:342px;
    margin:0;
}


#sites_tree {
    border-collapse: separate;
    height: 350px;
    overflow:auto;
    width:510px;
    padding-right:10px
}

.tb_separator {
    width: 50px;
}

.tb_r input {
    padding:3px 0;
}

.tb_r select {
    padding:2px 0;
}

#partner_def_package {
    margin: 3px 0;
}

.promoPicer{
    margin-left: 10px;
}

li.disabled&gt;a {
    color: #666666 !important;
}

#address {
    margin-left:4px !important;
    width:171px 
}

.w_110 input[type=text], .w_110 select { 
    width:110px; 
}

.w_110 input[type=checkbox] { 
    width:auto; 
}

.user_set_tab {
    
}


#user_editor_tab2_content .user_set_tab td{
    vertical-align:middle;
}

.user_set_tab td { 
    vertical-align:top;
}

.user_set_tab input {
    width:131px;
}

.user_set_tab #address {
    width: 131px !important;
}

.user_set_tab select {
    width: 134px !important;
}

.user_set_tab #zip {
    width: 131px !important;
}

.user_set_tab #international_phone {
    width: 165px;
}

#user_editor_tab8_content .auctionAccount {
    float: left; 
    width: 200px;
}

#user_editor_tab8_content label { 
    font-weight: bold;
}

.user_editor_auction_save {
    display: none;
}

.externalAuction {
    min-height:70px;
}
.ex_auction_lab{
	display:inline-block; *zoom:1; *display:inline; vertical-align:top;
	margin-top:5px; cursor:pointer;
}
.ex_auction_lab input{margin-top:2px; vertical-align: top;}

.user_editor_auction_clear {
    display: none;
}

.auctionInput {
    width: 215px;
}
#wtgDefaultUrl {
    font-size: 0.8em; 
    margin-left: 165px; 
    color: grey; 
    width:253px;
}

#override_phones_table select {
    margin: 3px;
}

.phone_part_0 {
    display: inline-block;
    width: 6px;
}
.phone_part_a {
    display: inline-block;
    width: 120px;
}

#ax_tab1 #user_comments{
    height: auto;
}

.marketplace_param_caption {
    padding-right: 10px;
    white-space: nowrap;
}
.marketplace_param_control {
    padding: 3px 0;
}
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td{
    vertical-align: top;
    padding: 5px;
    width: 50%;
}
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td:nth-child(1){
    padding-right: 10px;
    padding-left: 0;
    width: 40%;
}
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td:nth-child(1) .marketplace_param_control select,
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td:nth-child(1) .marketplace_param_control input{
    width: 170px;
}
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td:nth-child(2){
    padding-right: 0;
    padding-left: 10px;
    width: 60%;
}
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td:nth-child(2) .marketplace_param_control select,
.auction_marketplace &gt; table &gt; tbody &gt; tr &gt; td:nth-child(2) .marketplace_param_control input{
    width: 235px;
}
.marketplace_param_control select,
.marketplace_param_control input{
    padding: 3px 2px;
    box-sizing: border-box;
    width: 150px;
}
.auction_marketplace .spacer{
    height: 33px;
}
.auction_marketplace .label-wrap{
    width: 180px;
}

.marketplace_param_control .marketplace_outbound_buttons {
    width: 235px;
}
.marketplace_param_control .marketplace_outbound_notification_url {
    text-decoration: none;
    color: #218cd6;
}
.marketplace_param_control .marketplace_outbound_notification_url:hover {
    text-decoration: none;
    color: #70d0ef;
}
.auction_marketplace #marketplace_outbound_caption.open {
    vertical-align: top;
    padding-top: 8px;
}

#auto_reports_form input,
#auto_reports_form select {
    width: 218px;
    margin: 0;
}

#list-promotion tr td:first-child {
    width: 70%;
}

#list-promotion select {
    width: 100%;
}

.auction_marketplace .file_name {
    display: block;
    width: 225px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.auction_marketplace .user_attachment .marketplace_param_caption {
    white-space: normal;
}

.user_attachment .download_file {
    float: right;
    margin-left: 10px;
    background: url('/images/icon-down.png');
    width: 16px;
    height: 16px;
}
.user_attachment .upload_file {
    display: inline-block;
    position: relative;
    background: url('/images/icon-up.png');
    width: 16px;
    height: 16px;
    overflow: hidden;
}
.user_attachment .upload_file input {
    position: absolute;
    opacity: 0;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
    padding: 0;
}
.user_attachment input[type="file"]::-webkit-file-upload-button {
    cursor: pointer;
}
.user_attachment .delete_file {
    display: inline-block;
    background: url('/images/icon-delete.png');
    width: 16px;
    height: 16px;
}
.user_attachment .attachment-actions {
    float: right;
}

/* -----------------------ADD REGION GROUP STYLES---------------- */
#add_new_region {
    display: inline-block;
    width: 100%;
}

#add_new_region .region-border {
    width: 752px;
    display: inline-block;
    padding-bottom: 10px;
}

#add_new_region .section {
    float: left;
    width: 46.5%;
    margin-top: 15px;
}

#add_new_region .section .title {
    font-weight: bold;
    padding-bottom: 5px;
}

#add_new_region .section.center {
    width: 7%;
    padding-top: 137px;
    text-align: center;
}

#add_new_region .section .cities-box {
    position: relative;
    z-index: 10;
    border: 1px solid #c4c4c4;
    height: 273px;
    overflow: auto;
}

#add_new_region .section .cities-box.activated-mover {
    z-index: 12;
}

#add_new_region .section .cities-box.load-search:after {
    content: ' ';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, .1);
}

#add_new_region .section .cities-box.activated-search li.hidden-city,
#add_new_region .section .cities-box.activated-search .hidden-region {
    display: none;
}

#add_new_region .section .cities-box .move-list li.hidden-city {
    display: block !important;
}

#add_new_region .drop-box.move-from {
    position: fixed;
    z-index: 13;
    opacity: 0;
}

#add_new_region .drop-box.move-to {
    position: fixed;
    z-index: 11;
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    font-size: 6em;
    font-weight: bold;
    text-align: center;
    text-shadow: 3px 3px 5px #000;
    opacity: 0.8;
}

#add_new_region .list-search {
    padding: 6px;
    border: 1px solid #c4c4c4;
    border-bottom: 0;
    background: transparent url("/css/jquery-ui/images/ui-bg_gloss-wave_75_2191c0_500x100.png") repeat-x -35px;
}

#add_new_region .list-search &gt; input {
    padding: 3px 2px;

    text-indent: 5px;
    width: 332px;
    color: #777;

    height: 25px;
    margin: 0 3px;
    box-sizing: border-box;
    border: 1px solid #c4c4c4;
    background: #fff;
}

#add_new_region .list-search &gt; input:focus {
    color: #000;
}

#add_new_region .list-segment {
}

#add_new_region .list-segment .list-title {
    font-weight: bold;
    padding: 5px 5px 5px 10px;
    border-bottom: 1px solid #c4c4c4;
    position: relative;
    cursor: default;
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#e2e2e2+0,cecece+100 */
    background: #e0e0e0; /* Old browsers */
    background: -moz-linear-gradient(top,  #e0e0e0 0%, #cecece 100%); /* FF3.6-15 */
    background: -webkit-linear-gradient(top,  #e0e0e0 0%,#cecece 100%); /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom,  #e0e0e0 0%,#cecece 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e0e0e0', endColorstr='#cecece',GradientType=0 ); /* IE6-9 */
}

#add_new_region .activated-search .list-segment .list-title .region-name.region-match {
    color: #777;
}

#add_new_region .activated-search .list-segment .list-title .region-name.region-match span {
    color: #000;
}

#add_new_region .list-segment .list-title:hover {
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#d6d6d6+0,afafaf+100 */
    background: #D6D6D6; /* Old browsers */
    background: -moz-linear-gradient(top,  #D6D6D6 0%, #c4c4c4 100%); /* FF3.6-15 */
    background: -webkit-linear-gradient(top,  #D6D6D6 0%,#c4c4c4 100%); /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom,  #D6D6D6 0%,#c4c4c4 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#D6D6D6', endColorstr='#c4c4c4',GradientType=0 ); /* IE6-9 */
}

#add_new_region .list-segment ul {
    display: none;
}

#add_new_region .list-segment.open ul {
    display: block;
}

#add_new_region .list-segment .list-title .ui-icon,
#add_new_region .list-segment ul &gt; li .ui-icon {
    float: right;
    margin-left: 5px;
    cursor: pointer;
    opacity: 0.8;
}

#add_new_region .list-segment .list-title .ui-icon:hover,
#add_new_region .list-segment ul &gt; li .ui-icon:hover {
    opacity: 1;
}

#add_new_region .list-segment .ui-icon-carat-1-s,
#add_new_region .list-segment.open .ui-icon-carat-1-n {
    display: block;
}

#add_new_region .list-segment.open .ui-icon-carat-1-s,
#add_new_region .list-segment .ui-icon-carat-1-n,
#add_new_region .cities-box-selected .ui-icon-circle-plus,
#add_new_region .cities-box-available .ui-icon-circle-minus {
    display: none;
}

#add_new_region .list-segment ul &gt; li {
    display: block;
    padding: 5px 5px 5px 20px;
    background: transparent url("/css/jquery-ui/images/ui-bg_gloss-wave_75_2191c0_500x100.png") repeat-x 0 -30px;
    border-bottom: 1px dotted #c4c4c4;
    cursor: pointer;
}
#add_new_region .list-segment ul &gt; li:last-child{
    border-bottom: 1px solid #c4c4c4;
}

#add_new_region .list-segment ul.move-list {
    position: fixed;
    margin: 10px;
    height: 1px; /* IE*/
}

#add_new_region .list-segment ul.move-list &gt; li {
    position: absolute;
    width: 100%;
    box-sizing: border-box;
    opacity: 0.8;
}

#add_new_region .list-segment ul.move-list li.group-clone {
    background: #d3d3d3;
    font-weight: bold;
}

#add_new_region .list-segment ul.move-list .anim {
    -webkit-transition: all 0.3s;
    -moz-transition: all 0.3s;
    -ms-transition: all 0.3s;
    /*-o-transition: all 0.7s;*/
    transition: all 0.3s;
}

#add_new_region .list-segment ul.move-list .back-in-place {
    top: 0 !important;
    left: 0 !important;
}

#add_new_region .list-segment ul &gt; li.hide-original,
#add_new_region .list-segment.hide-original {
    opacity: 0;
    visibility: hidden;
}

#add_new_region .list-segment ul &gt; li:hover {
    background-position: 0 -45px;
}

#add_new_region .list-segment ul.move-list &gt; li,
#add_new_region .list-segment ul &gt; li.active {
    /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#b7dff8+0,92bedb+100 */
    background: #bde6ff; /* Old browsers */
    background: -moz-linear-gradient(top, #b7dff8 0%, #92bedb 100%); /* FF3.6-15 */
    background: -webkit-linear-gradient(top, #b7dff8 0%, #92bedb 100%); /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom, #b7dff8 0%, #92bedb 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#b7dff8', endColorstr='#92bedb', GradientType=0); /* IE6-9 */
}

#add_new_region .activated-search .list-segment ul &gt; li .city-name span.bold {
    font-weight: bold;
}

#add_new_region .message-in-box {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 280px;
    height: 40px;
    line-height: 40px;
    text-align: center;
    margin: -20px -140px;
    font-size: 2em;
    color: #777;
}

#add_new_region .not-found .message-in-box.not_found,
#add_new_region .list-empty .message-in-box.is_empty {
    display: block;
}

.icon-right,
.icon-left,
.icon-right2,
.icon-left2 {
    display: inline-block;
    width: 36px;
    height: 24px;
    background: transparent url("/css/easyMultiSelect/easyMultiSelect-btn-sprite.png") no-repeat scroll 50% 50%;
    opacity: 0.5;
    margin: auto;
    cursor: default;
}

.icon-right.active,
.icon-left.active,
.icon-right2.active,
.icon-left2.active {
    cursor: pointer;
    opacity: 0.85;
}

.icon-right.active:hover,
.icon-left.active:hover,
.icon-right2.active:hover,
.icon-left2.active:hover {
    opacity: 1;
}

.icon-right {
    background-position: 0 0;
}

.icon-left {
    background-position: -35px 0;
}

.icon-right2 {
    background-position: 0 -26px;
    margin-top: 5px;
}

.icon-left2 {
    background-position: -35px -26px;
}

.add-new-region-navigation {
    display: inline-block;
    width: 100%;
}

div.region-name-input input {
    background: #fff none repeat scroll 0 0;
    border: 1px solid #c4c4c4;
    box-sizing: border-box;
    height: 25px;
    margin: 0 3px;
    padding: 3px 2px;
    width: 177px;
}

div.section-first .title {
    font-weight: bold;
    padding-bottom: 5px;
}
span#edit_button_region  {
    display: none;
}
span#delete_button_region {
    display: none;
}
--&gt;
</style><script type="text/javascript">
   
</script>

<script src="/js/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/js/jalert.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.jgrowl.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.templ.min.js" type="text/javascript"></script>
<script src="/js/jquery/jquery-ui-1.8.12.custom.min.js" type="text/javascript"></script>
<script src="/js/date.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.datePicker.min-2.1.2.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.jstree.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.tree.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.selectchain.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.json-2.2.min.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.numeric.js" type="text/javascript"></script>
<script src="/js/jquerystatus.js" type="text/javascript"></script>
<script src="/js/swfupload/swfupload.js" type="text/javascript"></script>
<script src="/js/swfobject.js" type="text/javascript"></script>
<script src="/js/KeyUppressForForm.js" type="text/javascript"></script>
<script src="/js/tree_hide_not_matched.js" type="text/javascript"></script>
<script src="/js/Placeholders.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.form-3.51.min.js" type="text/javascript"></script>
<script type="text/javascript">
    //&lt;![CDATA[
var site_root = ~~'14509';
var users_ajax_link = '/dms/settings/users/ajax';
var inventory_ajax_link = '/dms/inventory/ajax';
var partnersEnabled = 0;
var SiteLoad = Array;
var UserPartnerSite = [];
var Partners_packages = [];
var roles_resources = {"5":["inventory_list","inventory_upload_wizard","sys_login","sys_assign_perm","crm_leads"],"7":["inventory_list","inventory_upload_wizard","inventory_history","sys_login","settings_dealership","addon_dynamic_menu","settings_website","sys_user_management_inventory_delegation","sys_assign_perm","sys_user_management","crm_leads","addon_make_a_page"],"10":["inventory_list","inventory_upload_wizard","inventory_history","sys_login","settings_dealership","addon_dynamic_menu","settings_website","sys_user_management_inventory_delegation","sys_assign_perm","sys_user_management","crm_leads","addon_make_a_page"],"12":["inventory_backup","inventory_list","inventory_edit_fields","inventory_reports","inventory_tools_make_a_show","inventory_take_down_price","inventory_upload_wizard","inventory_data_import_quick","inventory_data_import_quick_csv","inventory_vehicle_condition","inventory_vehicle_video","inventory_history","inventory_tools_window_sticker","inventory_tools_warranty_sticker","admin_vin_decoder_disabled","admin_mmcode_decoder","bg_custom_warranty_type","inventory_recycle_bin","inventory_disable_automatic_vehicle_reassignment","inventory_vehicle_carfax","inventory_vehicle_autocheck","settings_dealer_review","settings_vehicle_review","inventory_vehicle_spin360","settings_third_party","sys_login","settings_dealership","addon_site_guard","addon_dynamic_menu","settings_email","settings_leads_email","settings_leads_email_custom","addon_market_iq","addon_news","sys_sites_management","settings_staff","settings_website","sys_batch_user","sys_user_management_inventory_delegation","sys_assign_perm","sys_relogin","sys_user_management","inventory_metrics","ei_reports","addon_custom_analitycs","inventory_data_import_simple","dfi_export","dfi_import","ei_googleadwords","ei_backpage","ei_backpage2","ei_craigslist","ei_craigslist2","ei_craigslist3","ei_craigslist4","ei_ebay","ei_gumtree","ei_pinterest","ei_wanelo","ei_twitter","crm","crm_leads","crm_livehelp","inventory_testimonials","addon_canned_images","addon_dealer_rating","addon_storage","inventory_tools_etch_a_word_2","addon_photobox","addon_make_a_form","addon_make_a_form_builder","addon_make_a_form_management","addon_make_a_form_stickers","addon_make_a_banner","addon_make_a_page","addon_make_a_page_custom_pages","addon_make_a_page_schedule","addon_make_a_page_responsive","addon_make_a_page_2","addon_make_a_coupon","addon_make_a_template","addon_make_a_template_containers","addon_make_a_template_stickers","addon_widget_builder","addon_widget_builder_2","addon_notify","addon_surveys","addon_video_manager","addon_webmail","addon_coupons_banners","ei_ebrochure2","addon_ebrochure_stickers","sys_discount","sys_copyrights","sys_dealers_management","sys_livehelp","sys_lookup_editors","sys_config_editors","admin_shareicons","sys_testcase","sys_stock_images","sys_edit_stats_services","sys_calltrackingsummarytwilio","sys_email_dealers_management","sys_log","sys_warrantymanager","sys_vehicle_specification","addon_payment","sys_accounting","sys_craigslistreportpost","taw_leads_summary_export","taw_leads_summary","taw_leads_summary_email","twilio_basic_acl","twilio_settings_acl","twilio_invoice_acl","auctions_vcr","auctions_vcr_admin","auctions_vcr_admin_pricing","auctions_vcr_admin_pipelines","auctions_vcr_admin_rules","auctions_vcr_reportseditor","slingshot2_quickupload","slingshot2_compliance","slingshot2_advanced","slingshot2_lvs","slingshot2_obdii"]};
var flagChackValidatePhone = 0;
var flagZipcodeCharOrNumber =  0;
var characters =  56;
characters = characters.toString();
var lenMin = +characters.substr(0,1);
var lenMax = +characters.substr(1,1);
var countryWithDemotoresId = [38, 36, 114, 9];
 var lengthsPhone ={"first":"3","second":"3","last":"4","lastFieldMaxLength":"48","MaxLengthNumber":"54"};


var refererSelect = '&lt;select style="width: 140px; vertical-align: middle;" onchange="setCustomInput(event)"&gt;';
    refererSelect = refererSelect + '&lt;option value="0"&gt;Select referral&lt;/option&gt;';
                refererSelect = refererSelect + '&lt;option value="go"&gt;Google&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="bi"&gt;Bing&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ya"&gt;Yahoo&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="at"&gt;AutoTrader&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="lf"&gt;Lemonfree&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="cc"&gt;Cars.com&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="va"&gt;Vast&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="fb"&gt;Facebook&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="tw"&gt;Twitter&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="kj"&gt;Kijiji&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="yt"&gt;YouTube&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="dm"&gt;Demotores&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="la"&gt;Localautosonline&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="mt"&gt;MotorTrader&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ga"&gt;Google Adwords&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="gt"&gt;Gumtree.co.za&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="mz"&gt;MotorTrader.co.za&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="tr"&gt;Trovit&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="mi"&gt;Mitula&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ol"&gt;OLX&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ml"&gt;MercadoLibre&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="af"&gt;AutoFocusLLC&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ms"&gt;Myspace&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="dg"&gt;Digg&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="li"&gt;Linkedin&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="dl"&gt;Delicious&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="fl"&gt;Flickr&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="pi"&gt;Pinterest&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="tz"&gt;AutoTrader.co.za&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="cr"&gt;CRM&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ac"&gt;ADs&amp;Coupons&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="do"&gt;Donkiz&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="re"&gt;Reddit&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="lo"&gt;Locanto&lt;/option&gt;';
            refererSelect = refererSelect + '&lt;option value="ev"&gt;Everycar&lt;/option&gt;';
        refererSelect = refererSelect + '&lt;option value="custom"&gt;Custom&lt;/option&gt;&lt;/select&gt;';
var regionFullList;
    //]]&gt;
</script>
<script src="/js/jquery/jquery.tooltip.pack.js" type="text/javascript"></script>
<script src="/js/dms_resize.js" type="text/javascript"></script>
<script src="/js/dms_menu.js" type="text/javascript"></script>
<script src="/js/jquery/jquery.validate.js" type="text/javascript"></script>
<script src="/js/validation_rules.js" type="text/javascript"></script>
<script type="text/javascript">
    //&lt;![CDATA[
    window.timerChecking = 600;
    setInterval(function(){
       $.ajax({
            url: '/ajax',
            data: {
               oper: 'site_id',
               user_agent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.0'
            },
            type: 'POST'
         });
    },window.timerChecking*1000);
    //]]&gt;
</script><script type="text/javascript">
    $(document).ready(function(){
                    $('#user_editor_form').validate({
    rules:{
            login: {
                                    required: true,
                            loginRule: true,
                                                        maxlength: '40',
                            },
            login2: {
                                    required: true,
                            loginRule3: true,
                                                        maxlength: '40',
                            },
            email: {
                                    emailRule2: true,
                            emailRule3: true,
                            emailRule4: true,
                            emailRule5: true,
                            email: true,
                                                        maxlength: '255',
                            },
            email2: {
                                    emailRule2: true,
                            emailRule6: true,
                            emailRule4: true,
                            emailRule5: true,
                            email: true,
                                                        maxlength: '255',
                            },
            password: {
                                    passwordRule2: true,
                            passwordRule3: true,
                                                        minlength: '3',
                            maxlength: '40',
                            },
            cpass: {
                                    passwordRule3: true,
                                                        equalTo: '#password',
                            },
            leads_email_plain: {
                                    emailRule2: true,
                            emailRule3: true,
                            emailRule4: true,
                            emailRule5: true,
                            email: true,
                                                        maxlength: '255',
                            },
            leads_email_plain2: {
                                    emailRule2: true,
                            emailRule6: true,
                            emailRule4: true,
                            emailRule5: true,
                            email: true,
                                                        maxlength: '255',
                            },
            leads_email_xml: {
                                    emailRule2: true,
                            emailRule3: true,
                            emailRule4: true,
                            emailRule5: true,
                            email: true,
                                                        maxlength: '255',
                            },
            leads_email_xml2: {
                                    emailRule2: true,
                            emailRule6: true,
                            emailRule4: true,
                            emailRule5: true,
                            email: true,
                                                        maxlength: '255',
                            },
            user_contact: {
                                    delScript: true,
                                    },
            user_contact2: {
                                    delScript: true,
                                    },
        }
    });
    $('#auto_reports_form').validate({
    rules:{
            carfax_login: {
                                    carfaxRule: true,
                                    },
        }
    });
            });
</script>
<style type="text/css" id="vakata-stylesheet">#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } #vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover &gt; a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } </style><style type="text/css" id="jstree-stylesheet">.jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree &gt; ul &gt; li { margin-left:0px; } .jstree-rtl &gt; ul &gt; li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a &gt; ins { height:16px; width:16px; } .jstree a &gt; .jstree-icon { margin-right:3px; } .jstree-rtl a &gt; .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open &gt; ul { display:block; } li.jstree-closed &gt; ul { display:none; } #vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }.jstree .jstree-real-checkbox { display:none; } .jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }.jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }</style><style type="text/css">/* TREE LAYOUT */ .tree ul { margin:0 0 0 5px; padding:0 0 0 0; list-style-type:none; } .tree li { display:block; min-height:18px; line-height:18px; padding:0 0 0 15px; margin:0 0 0 0; /* Background fix */ clear:both; } .tree li ul { display:none; } .tree li a, .tree li span { display:inline-block;line-height:16px;height:16px;color:black;white-space:nowrap;text-decoration:none;padding:1px 4px 1px 4px;margin:0; } .tree li a:focus { outline: none; } .tree li a input, .tree li span input { margin:0;padding:0 0;display:inline-block;height:12px !important;border:1px solid white;background:white;font-size:10px;font-family:Verdana; } .tree li a input:not([class="xxx"]), .tree li span input:not([class="xxx"]) { padding:1px 0; } /* FOR DOTS */ .tree .ltr li.last { float:left; } .tree &gt; ul li.last { overflow:visible; } /* OPEN OR CLOSE */ .tree li.open ul { display:block; } .tree li.closed ul { display:none !important; } /* FOR DRAGGING */ #jstree-dragged { position:absolute; top:-10px; left:-10px; margin:0; padding:0; } #jstree-dragged ul ul ul { display:none; } #jstree-marker { padding:0; margin:0; line-height:5px; font-size:1px; overflow:hidden; height:5px; position:absolute; left:-45px; top:-30px; z-index:1000; background-color:transparent; background-repeat:no-repeat; display:none; } #jstree-marker.marker { width:45px; background-position:-32px top; } #jstree-marker.marker_plus { width:5px; background-position:right top; } /* BACKGROUND DOTS */ .tree li li { overflow:hidden; } .tree &gt; .ltr &gt; li { display:table; } /* ICONS */ .tree ul ins { display:inline-block; text-decoration:none; width:16px; height:16px; } .tree .ltr ins { margin:0 4px 0 0px; } </style><link rel="stylesheet" type="text/css" media="all" href="/css/jstree-1.0/themes/default/style.css" /><style type="text/css" id="jstree-types-stylesheet">.jstree-0 li[rel="root"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_7.png);  background-position:0px; } .jstree-0 li[rel="role_0"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_0.png);  background-position:0px; } .jstree-0 li[rel="role_1"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_1.png);  background-position:0px; } .jstree-0 li[rel="role_3"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_3.png);  background-position:0px; } .jstree-0 li[rel="role_5"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_5.png);  background-position:0px; } .jstree-0 li[rel="role_7"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_7.png);  background-position:0px; } .jstree-0 li[rel="role_10"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_10.png);  background-position:0px; } .jstree-0 li[rel="role_12"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_12.png);  background-position:0px; } .jstree-0 li[rel="role_15"] &gt; a &gt; .jstree-icon {  background-image:url(/images/user_icons/role_15.png);  background-position:0px; } </style></head>
<body>
<div id="height_body">

<table class="navigation_menu">
<tbody><tr>
	<td class="left">
		<table class="nav_table_left">
    <tbody><tr>
        <td colspan="3" class="f_c_t">
            <div style="min-height: 28px;" class="jqueryslidemenu" id="slidemenu">
                <ul style="display: block;" class="v9-menu">
<li class="v9-main-item"><a href="/dms">Home</a></li>
<li class="v9-main-item v9_sub"><a href="/dms/inventory">Inventory</a><ul style="display: none;">
<li><a href="/dms/inventory/backup-inventory">Backup Inventory</a></li>
<li><a href="/dms/inventory/inventory_reports">Inventory Reports</a></li>
<li><a href="/dms/inventory">My Inventory<img class="dmsMenuIcon" src="/images/menyInventory-icon.png" /></a></li>
<li><a href="/dms/inventory/quickimport">Quick Import</a></li>
<li><a href="/dms/inventory/recyclebin">Recycle Bin</a></li>
<li><a href="/dms/inventory/wizard" class="notranslate">Upload Wizard<img class="dmsMenuIcon" src="/images/menyUpload-icon.png" /></a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/exchange" class="notranslate">Exchange</a><ul style="display: none;">
<li><a href="/dms/exchange/backpage">Backpage</a></li>
<li><a href="/dms/exchange/craigslist">Craigslist</a></li>
<li class="v9_sub"><a href="/dms/exchange/dfi">DFI</a><ul style="display: none;">
<li><a href="/dms/exchange/export">DFI Export</a></li>
<li><a href="/dms/inventory/import">DFI Import</a></li>
<li><a href="/dms/exchange/schedule">Scheduled Tasks</a></li>
</ul>
</li>
<li><a href="/dms/exchange/ebayinterface">eBay</a></li>
<li><a href="/dms/exchange/googleadwords">Google AdWords</a></li>
<li><a href="/dms/exchange/gumtree">Gumtree</a></li>
<li><a href="/dms/exchange/override">Override Exchange Settings</a></li>
<li><a href="/dms/exchange/twitterpost">Twitter post</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/customers" class="notranslate">Customers</a><ul style="display: none;">
<li><a href="/crm">CRM</a></li>
<li><a href="/dms/customers/leads">Leads</a></li>
<li><a href="/dms/customers/livehelp">Live Help</a></li>
<li><a href="/dms/customers/testimonials">Testimonials</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/tools">Tools</a><ul style="display: none;">
<li><a href="/dms/tools/ads-coupons">ADs &amp; Coupons</a></li>
<li><a href="/dms/tools/canned-images">Canned Images</a></li>
<li><a href="/dms/tools/dealer-score">Dealer Score</a></li>
<li><a href="/dms/tools/storage">Dealer Storage</a></li>
<li><a href="/dms/tools/discount">Discount</a></li>
<li><a href="/dms/tools/make_a_template/emagazine">e-Magazine &amp; e-Brochure</a></li>
<li><a href="/dms/tools/make_a_banner">Make-A-Banner</a></li>
<li><a href="/dms/tools/make_a_coupon">Make-A-Coupon</a></li>
<li><a href="/dms/tools/make_a_form">Make-A-Form</a></li>
<li><a href="/dms/tools/make_a_form/formbuilder">Make-A-Form:FormBuilder</a></li>
<li><a href="/dms/tools/make_a_page">Make-A-Page</a></li>
<li><a href="/dms/tools/make_a_page_responsive">Make-A-Page 1.5</a></li>
<li><a href="/dms/tools/make_a_page_2">Make-A-Page 2.0</a></li>
<li><a href="/dms/tools/make_a_template">Make-A-Template</a></li>
<li><a href="/dms/tools/notify">Notify Profiles</a></li>
<li><a href="/dms/tools/photobox">Photobox</a></li>
<li><a href="/dms/tools/reviews">Reviews</a></li>
<li><a href="/dms/tools/survey">Traffic Survey</a></li>
<li><a href="/dms/tools/video-managerv3">Video Manager</a></li>
<li><a href="/dms/tools/widget_builder">Widget Builder</a></li>
<li><a href="/dms/tools/widget_builder_2">Widget Builder 2</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/settings" class="notranslate">Settings</a><ul style="display: none;">
<li><a href="/dms/settings/website/3rdparty">3rd Party Integration</a></li>
<li><a href="/dms/settings/batch-user">Batch User Processing</a></li>
<li><a href="/dms/settings/dealership">Dealership</a></li>
<li><a href="/dms/settings/website/dynamic_menu" class="notranslate">Dynamic Menu</a></li>
<li><a href="/dms/settings/email">Email</a></li>
<li><a href="/dms/settings/user-settings" class="notranslate">My Profile</a></li>
<li><a href="/dms/settings/website/news">News</a></li>
<li><a href="/dms/settings/review-settings">Review</a></li>
<li><a href="/dms/settings/sites">Sites</a></li>
<li><a href="/dms/settings/staffing">Staffing Module</a></li>
<li><a href="/dms/settings/users" class="notranslate">Users</a></li>
<li><a href="/dms/settings/website">Website</a></li>
</ul>
</li>
<li class="v9-main-item"><a href="/dms/email">Webmail</a></li>
<li class="v9-main-item v9_sub"><a href="/dms/admin">Admin</a><ul style="display: none;">
<li><a href="/dms/admin/availabletrim">Available Trims Manager</a></li>
<li><a href="/dms/admin/warrantyautoreport">Buyers Guide Auto-Report</a></li>
<li><a href="/dms/admin/calltracking">Call Tracking Summary T</a></li>
<li><a href="/dms/admin/craigslistreportpost">CL Posting Report</a></li>
<li><a href="/dms/admin/copyrights">Copyrights Override</a></li>
<li><a href="/dms/admin/logcron">CRON Log</a></li>
<li><a href="/dms/admin/dealers">Dealers</a></li>
<li><a href="/dms/admin/deploy">Deploy Changes</a></li>
<li><a href="/dms/admin/dealers-email">Email Management</a></li>
<li><a href="/dms/admin/log">Event Log</a></li>
<li><a href="/dms/admin/livehelp">Live Help</a></li>
<li><a href="/dms/admin/lookup">Lookup</a></li>
<li><a href="/dms/admin/parkdomains">Park Domains</a></li>
<li><a href="/dms/admin/promotions">Promotional Items</a></li>
<li><a href="/dms/admin/shareicons">Share Icons</a></li>
<li><a href="/dms/admin/statisticssources">Statistics Sources</a></li>
<li><a href="/dms/admin/stock_images">Stock Images</a></li>
<li><a href="/dms/admin/test-case">Test Case</a></li>
<li><a href="/dms/admin/svn">Update SVN</a></li>
<li><a href="/dms/admin/vehiclespecification">Vehicle Specification</a></li>
<li><a href="/dms/admin/vinmanager">VIN List Manager</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/merchant/settings">Merchant Services</a><ul style="display: none;">
<li><a href="/dms/merchant/settings">Merchant Settings</a></li>
<li><a href="/dms/merchant/payment">Payment</a></li>
<li><a href="/dms/merchant/paypalmanager">Paypal Manager</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/mobile">Mobile Services</a><ul style="display: none;">
<li><a href="/dms/mobile/compliance">Compliance App</a></li>
<li><a href="/dms/mobile/quickupload">Quick Upload</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/auctions">Auction Services</a><ul style="display: none;">
<li><a href="/dms/auctions/admin">Administration</a></li>
<li><a href="/dms/auctions/reporteditor">Vehicle Inspection</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/calltracking">Call Tracking</a><ul style="display: none;">
<li><a href="/dms/calltracking/invoice">Advanced Call Summary</a></li>
<li><a href="/dms/calltracking/basic">Call Summary</a></li>
<li><a href="/dms/calltracking/settings">Settings</a></li>
</ul>
</li>
<li class="v9-main-item v9_sub"><a href="/dms/leadsummary/settings">Lead Generation Services</a><ul style="display: none;">
<li><a href="/dms/leadsummary/settings">Billable Summary</a></li>
<li><a href="/dms/leadsummary/export">Export</a></li>
<li><a href="/dms/leadsummary/invoice">Summary Of Calls</a></li>
<li><a href="/dms/leadsummary/invoicemail">Summary Of Emails</a></li>
</ul>
</li>
</ul>
                <br style="clear: left" />
            </div>
        </td>
    </tr>
    <tr>
        <td class="l_t"><a href="/dms"><span class="house"></span></a></td>
        <td class="c_t">

            <div class="breadcrumb" id="slid_breadcrumb">
                <ul>
                    <li><a href="/dms">Home</a></li><li><img src="/images/right2.gif" /></li><li><a href="/dms/settings">Settings</a></li><li><img src="/images/right2.gif" /></li><li><a href="/dms/settings/users">Users</a></li>                </ul>
            </div>

        </td>
        <td class="r_t"></td>
    </tr>
</tbody></table>
<script type="text/javascript">
    (function($){
        $.v9_menu = function(options, elem){
            var settings = $.extend(true, {
                animationDuration: 200
            }, options);
            elem.addClass('v9-menu');
            $('&gt; li', elem).addClass('v9-main-item');
            var items = $('li', elem);
            items.each(function(i){
                var _this = $(this);
                var firstChildUl = $('&gt; ul', _this);
                if ($('ul', _this).length &gt; 0) {
                    _this.addClass('v9_sub');
                }
                _this.hover(function(){
                    var prop = 'right';
                    var propVal = 0;
                    var itemPosition = _this.offset().left + firstChildUl.outerWidth(true);
                    _this.addClass('hover').find('&gt; ul').animate({opacity: 1}, settings.animationDuration);
                    if (_this.hasClass('v9-main-item')) {
                        prop = ($(window).width() &gt;  itemPosition) ? 'left' : prop;
                    } else {
                        propVal = '100%';
                        prop = ($(window).width() &gt; itemPosition + _this.outerWidth(true) ) ? 'left' : prop;
                    }
                    firstChildUl.removeAttr('style').css(prop, propVal);
                }, function(){
                    firstChildUl.animate({opacity: 0}, settings.animationDuration, function(){
                        _this.removeClass('hover');
                    });
                });

            });
        }
        $.fn.v9_menu = function(options) {
            return this.each(function(i){
                new $.v9_menu(options, $(this));
            });
        };
    })(jQuery);

    $('#slidemenu &gt; ul').css({display: 'block'}).v9_menu();
</script>
	</td>
	<td class="right">
		<script type="text/javascript">
	/*$(document).ready(function(){
		$('.menu_key span').tooltip({
			showURL: false,
			track: true
		}); 
	});*/
        $.ajaxSetup({cache: false});
</script>

<style>
            .logo{
                display: block;
                width:99px;
                height: 30px;
                background: transparent url(/images/logo.png) repeat-y top;
                margin: 0px 5px 3px 0px;
                float: right;
            }
    </style>



<table class="nav_table_right">
	<tbody><tr>
		<td class="left_td"></td>
		<td class="center_td"></td>
		<td class="right_td"></td>
	</tr>
	<tr>
		<td colspan="2" class="nav_menu">
			<div class="dealer_name notranslate">
				<img src="/images/user_icons/role_12.png" title="SUPERVISOR" alt="SUPERVISOR" />
				Andriy Kozak			</div>
                    					</td>
		<td class="logo_td" rowspan="2">
			<div class="logo"></div>
		</td>
	</tr>
	<tr>
		<td colspan="2" class="dealer_website">
		<a href="http://mister.andrijk.ixloo.com" target="_blank">(mister.andrijk.ixloo.com)</a>		</td>
	</tr>
	<tr>
		<td class="nav_menu">
			<div class="dealer_id">Dealer id [<span>#543</span>]</div>
		</td>
		<td colspan="2" class="key_block">
                    <div class="menu_key">
				<a href="/dms/login/logout"><span title="Log Out" class="out"></span></a>
															<a href="/dms/relogin"><span title="Relogin As Dealer" class="relogin"></span></a>
																	<a target="_blank" href="/dms/help?page=settings_users"><span title="Help" class="help"></span></a>
				<a target="_blank" href="http://www.autoxloo.com/support/livehelp.php?department=1&amp;cslheg=1&amp;serversession=1"><span title="Live Help" class="live_help"></span></a>
									<a href="/dms#analytics"><span title="Analytics" class="stat"></span></a>
								<a href="/dms/settings/user-settings"><span title="Edit Your Profile" class="user"></span></a>
			</div>
		</td>
	</tr>
</tbody></table>
	</td>
</tr>
</tbody></table>





<div id="tabs">
    <table class="table_dealer">
        <tbody><tr>
            <td valign="top" class="td_left_user-managment">
                <div class="tm_bl_settings" id="left_block_caption"></div>
<div class="mm_bl">
			<ul class="offset_l10px" id="left_block_tabs">
																															<li class="tab" onclick="document.location='/dms/settings/website/3rdparty'"><span>3rd Party Integration</span></li>
																																			<li class="tab" onclick="document.location='/dms/settings/batch-user'"><span>Batch User Processing</span></li>
																																			<li class="tab subTabHandler closeTab" onclick="document.location='/dms/settings/dealership'"><span>Dealership</span></li>
									<li style="display: none;" class="subTab">
						<ul style="display: none;" class="subMenu">
													</ul>
					</li>
																																			<li class="tab" onclick="document.location='/dms/settings/website/dynamic_menu'"><span>Dynamic Menu</span></li>
																																			<li class="tab subTabHandler closeTab" onclick="document.location='/dms/settings/email'"><span>Email</span></li>
									<li style="display: none;" class="subTab">
						<ul style="display: none;" class="subMenu">
													</ul>
					</li>
																																			<li class="tab" onclick="document.location='/dms/settings/user-settings'"><span>My Profile</span></li>
																																			<li class="tab" onclick="document.location='/dms/settings/website/news'"><span>News</span></li>
																																			<li class="tab subTabHandler closeTab" onclick="document.location='/dms/settings/review-settings'"><span>Review</span></li>
									<li style="display: none;" class="subTab">
						<ul style="display: none;" class="subMenu">
													</ul>
					</li>
																																			<li class="tab" onclick="document.location='/dms/settings/sites'"><span>Sites</span></li>
																																			<li class="tab" onclick="document.location='/dms/settings/staffing'"><span>Staffing Module</span></li>
																																			<li class="_tab" onclick="select_tab(1)" id="tabs-1"><span>Users</span></li>
																																			<li class="tab subTabHandler closeTab" onclick="document.location='/dms/settings/website'"><span>Website</span></li>
									<li style="display: none;" class="subTab">
						<ul style="display: none;" class="subMenu">
													</ul>
					</li>
									</ul>
	</div>
<div class="bm_bl"></div>
<div class="bottom_bg_wizard" id="left-block" style="height: 55px;"> </div>
            </td>
            <td rowspan="2" class="border_dot  offset_r3px"></td>
            <td valign="top" rowspan="2" style="width: auto;">

                <div class="users_page" id="tabs-1">
                    <!-- //-->
                    <div class="offset_min10px">
                        <span class="header_dealership header-line-height">Users</span>
                    </div>
                    <div class="text_dealership notranslate">
                        The Users module gives you access to all the users in your DMS. You can add new users with a specific role which gives access to certain modules in your DMS to this user. Setting each user as active allows them to login to the DMS using their login information.                        <br />
                        Notice: the maximum user hierarchy depth is 10 levels (including users of upper parent sites).                    </div>
                    <table>
                        <tbody><tr style="vertical-align:top">
                            <td class="users-block">
                            	<div style="font-size: 16px; font-weight:bold;  padding:3px;" class="space"> </div>
                                <input type="text" placeholder="Search" id="user_tree_search" /> <!--Search by email or username-->
                                <div class="buttons_block alignRight">
                                <span class="gl_button"><span>
                                    <a class="button-style b_hide notranslate" onclick="$('#user_tree').jstree('open_all',-1,false);" href="javascript:void(0);">Expand all</a>
                                </span></span>
                                <span class="gl_button"><span>
                                    <a class="button-style b_hideHover notranslate" onclick="$('#user_tree').jstree('close_all',-1);" href="javascript:void(0);">Collapse all</a>
                                </span></span>
                                </div>
                                <div class="clear"></div>
                                <div class="notranslate jstree jstree-0 jstree-focused jstree-default" id="user_tree" style="height: 294px;"><ul><li id="user_14509" have_leads="0" class="rootUserBranch jstree-open jstree-last" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[14509]mister [8]</a><ul><li id="user_16851" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16851]test4</a></li><li id="user_16853" have_leads="0" class="userBranch jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16853]test1</a></li><li id="user_16855" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16855]test2</a></li><li id="user_16857" have_leads="0" class="userBranch jstree-leaf" rel="role_1"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16857]test3</a></li><li id="user_16859" have_leads="0" class="userBranch jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16859]test5</a></li><li id="user_16861" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16861]test6</a></li><li id="user_16863" have_leads="0" class="userBranch jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16863]test7</a></li><li id="user_16865" have_leads="0" class="userBranch jstree-leaf" rel="role_1"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16865]test8</a></li><li id="user_16867" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16867]test9</a></li><li id="user_16869" have_leads="0" class="userBranch jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16869]test10</a></li><li id="user_16871" have_leads="0" class="userBranch jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16871]test11</a></li><li id="user_16873" have_leads="0" class="userBranch jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16873]test12</a></li><li id="user_16875" have_leads="0" class="userBranch jstree-leaf" rel="role_1"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16875]test13</a></li><li id="user_16877" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16877]test14</a></li><li id="user_16879" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16879]test15</a></li><li id="user_16881" have_leads="0" class="userBranch jstree-leaf" rel="role_1"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16881]test16</a></li><li id="user_16885" have_leads="0" class="userBranch jstree-leaf" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16885]test17</a></li><li id="user_16887" have_leads="0" class="userBranch jstree-leaf" rel="role_1"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16887]test18</a></li><li id="user_16889" have_leads="0" class="userBranch jstree-last jstree-closed" rel="role_0"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16889]test19</a><ul><li id="user_16891" have_leads="0" class="userBranch jstree-last jstree-leaf" rel="role_5"><ins class="jstree-icon"> </ins><a href="#"><ins class="jstree-icon"> </ins>[16891]test20</a></li></ul></li></ul></li></ul></div>
                                <span title="Hold &quot;Shift&quot; to select multiple users for delete" id="user_tree_delete" class="gl_button alignRight"><span><a class="button-style b_delete" href="javascript:void(0);">Delete User(s)</a></span></span>
                                <span id="user_tree_add" class="gl_button alignRight"><span><a class="button-style b_add notranslate" href="javascript:void(0);">Add User</a></span></span>
                            </td>
                            <td id="td_sites" class="tb_r" style="height: 180px; width:350px;display: none;padding-top:6px">
                            <div class="notranslate" style="size: 16px; font-weight:bold; color:#039BEA;padding:3px; ">Partners Access Settings: </div>
                            <input type="text" placeholder="Search" id="site_search" /> <!--Search by domain name-->
                            <div id="sites_tree" style="height: 294px;"></div>
                            <select name="partner_def_package" id="partner_def_package">
                                <option value="">Select Package</option>
                                                                                                                        <option value="microsite">MicroSite</option>
                                                                                                                                                                                                                                        <option value="free">Free</option>
                                                                                                                                                                <option value="basic">Basic</option>
                                                                                                                                                                <option value="plus">Plus</option>
                                                                                                                                                                <option value="advantage">Advantage</option>
                                                                                                                                                                <option value="aggregator">Aggregator</option>
                                                                                                                                                                <option value="localautos">Localautos</option>
                                                                                                                                                                <option value="premium">Premium</option>
                                                                                                                                                                <option value="deluxe">Deluxe</option>
                                                                                                                                                                <option value="truck_deluxe">Truck Deluxe</option>
                                                                                                                                                                <option value="starter-sa">Starter (SA)</option>
                                                                                                                                                                <option value="p1-sa">P1 (SA)</option>
                                                                                                                                                                <option value="p2-sa">P2 (SA)</option>
                                                                                                                                                                <option value="p3-sa">P3 (SA)</option>
                                                                                                                                                                <option value="p1">P1</option>
                                                                                                                                                                <option value="p2">P2</option>
                                                                                                                                                                <option value="p3">P3</option>
                                                                                                    </select>
                            <span id="site_partner_save" class="gl_button alignRight"><span><a href="#" class="button-style b_save notranslate">Save partners access settings</a></span></span>
                            </td>
                        </tr>
                    </tbody></table>
                                        
                    <!-- //-->
                </div>
                <div style="display:none" id="tabs-2">
                    <!-- //-->
                    <div class="offset_min10px">
                        <span class="header_dealership header-line-height">Users</span>  <span class="bullet_size">»</span> <span class="header_dealership">Delete Users</span>
                    </div>
                    <div class="text_dealership notranslate">
                        The Users module gives you access to all the users in your DMS. You can add new users with a specific role which gives access to certain modules in your DMS to this user. Setting each user as active allows them to login to the DMS using their login information.
                    </div>
                    <table>
                        <tbody><tr style="vertical-align:top">
                            <td class="users-block">
                                <input type="text" id="delete_user_tree_search" value="Search" />
                                    <div class="alignRight">
                                    <span class="gl_button"><span>
                                        <a class="button-style b_hide notranslate" onclick="$('#users').jstree('open_all',-1,false);" href="javascript:void(0);">Expand all</a>
                                    </span></span>
                                    <span class="gl_button"><span>
                                        <a class="button-style b_hideHover notranslate" onclick="$('#users').jstree('close_all',-1);" href="javascript:void(0);">Collapse all</a>
                                    </span></span>
                                </div>
                                <div class="clear"></div>
                                <div id="users"></div>
                                <span id="remove" class="gl_button alignRight"><span><a class="button-style b_delete" href="javascript:void(0);">Delete User(s)</a></span></span>
                            </td>
                        </tr>
                    </tbody></table>
                </div>
            </td>
        </tr>
    </tbody></table>
</div>

<div style="display:none" id="geoip_phone_template">
   <table id="geophone_#{id}">
       <tbody><tr>
        <td class="">
            <input type="radio" class="notranslate" value="zip" name="type_#{id}" />
            zip:<input style="width:80px; height:auto;" onfocus="$('input:radio[name=type_#{id}]').removeAttr('checked'); $('input:radio[name=type_#{id}][value=zip]').attr('checked',true); " maxlength="6" class="zip_list input_field" />
            +<select style="width:60px;" class="miles_list select_field">
                                   <option value="5">5 mi</option>
                                   <option value="10">10 mi</option>
                                   <option value="15">15 mi</option>
                                   <option value="20">20 mi</option>
                                   <option value="25">25 mi</option>
                                   <option value="30">30 mi</option>
                                   <option value="35">35 mi</option>
                                   <option value="40">40 mi</option>
                                   <option value="45">45 mi</option>
                                   <option value="50">50 mi</option>
                                   <option value="55">55 mi</option>
                                   <option value="60">60 mi</option>
                                   <option value="65">65 mi</option>
                                   <option value="70">70 mi</option>
                                   <option value="75">75 mi</option>
                                   <option value="80">80 mi</option>
                                   <option value="85">85 mi</option>
                                   <option value="90">90 mi</option>
                                   <option value="95">95 mi</option>
                                   <option value="100">100 mi</option>
                            </select>
            or <input type="radio" checked="checked" class="notranslate" value="state" name="type_#{id}" /> state<select style="width:150px;" onchange="$('input:radio[name=type_#{id}]').removeAttr('checked'); $('input:radio[name=type_#{id}][value=state]').attr('checked',true); " class="states_list select_field">
                                   <option value="ABUJA">ABUJA</option>
                                   <option value="AGUASCALIENTES">AGUASCALIENTES</option>
                                   <option value="ALABAMA">ALABAMA</option>
                                   <option value="ALASKA">ALASKA</option>
                                   <option value="ALBERTA">ALBERTA</option>
                                   <option value="AMAZONAS">AMAZONAS</option>
                                   <option value="AMERICAN SAMOA">AMERICAN SAMOA</option>
                                   <option value="ANTIOQUIA">ANTIOQUIA</option>
                                   <option value="ARAUCA">ARAUCA</option>
                                   <option value="ARIZONA">ARIZONA</option>
                                   <option value="ARKANSAS">ARKANSAS</option>
                                   <option value="ATLANTICO">ATLANTICO</option>
                                   <option value="BAJA CALIFORNIA">BAJA CALIFORNIA</option>
                                   <option value="BAJA CALIFORNIA SUR">BAJA CALIFORNIA SUR</option>
                                   <option value="BARINGO">BARINGO</option>
                                   <option value="BAVARIA">BAVARIA</option>
                                   <option value="BOGOTÁ">BOGOTÁ</option>
                                   <option value="BOLIVAR">BOLIVAR</option>
                                   <option value="BOMET">BOMET</option>
                                   <option value="BOYACÁ">BOYACÁ</option>
                                   <option value="BRITISH COLUMBIA">BRITISH COLUMBIA</option>
                                   <option value="BS. AS. COSTA ATLÁNTICA">BS. AS. COSTA ATLÁNTICA</option>
                                   <option value="BS. AS. INTERIOR">BS. AS. INTERIOR</option>
                                   <option value="BUNGOMA">BUNGOMA</option>
                                   <option value="CALDAS">CALDAS</option>
                                   <option value="CALIFORNIA">CALIFORNIA</option>
                                   <option value="CAMPECHE">CAMPECHE</option>
                                   <option value="CAPITAL FEDERAL">CAPITAL FEDERAL</option>
                                   <option value="CAQUETÁ">CAQUETÁ</option>
                                   <option value="CASANÁRE">CASANÁRE</option>
                                   <option value="CATAMARCA">CATAMARCA</option>
                                   <option value="CAUCA">CAUCA</option>
                                   <option value="CESÁR">CESÁR</option>
                                   <option value="CHACO">CHACO</option>
                                   <option value="CHIAPAS">CHIAPAS</option>
                                   <option value="CHIHUAHUA">CHIHUAHUA</option>
                                   <option value="CHOCÓ">CHOCÓ</option>
                                   <option value="CHUBUT">CHUBUT</option>
                                   <option value="COAHUILA">COAHUILA</option>
                                   <option value="COLIMA">COLIMA</option>
                                   <option value="COLORADO">COLORADO</option>
                                   <option value="CONNECTICUT">CONNECTICUT</option>
                                   <option value="CORRIENTES">CORRIENTES</option>
                                   <option value="CUNDINAMARCA">CUNDINAMARCA</option>
                                   <option value="CÓRDOBA">CÓRDOBA</option>
                                   <option value="CÓRDOBA">CÓRDOBA</option>
                                   <option value="DELAWARE">DELAWARE</option>
                                   <option value="DISTRICT OF COLUMBIA">DISTRICT OF COLUMBIA</option>
                                   <option value="DISTRITO FEDERAL">DISTRITO FEDERAL</option>
                                   <option value="DURANGO">DURANGO</option>
                                   <option value="DÃŒSSELDORF">DÃŒSSELDORF</option>
                                   <option value="EASTERN CAPE">EASTERN CAPE</option>
                                   <option value="ELGEYO-MARAKWET">ELGEYO-MARAKWET</option>
                                   <option value="EMBU">EMBU</option>
                                   <option value="ENTRE RIOS">ENTRE RIOS</option>
                                   <option value="ESTADO DE MÉXICO">ESTADO DE MÉXICO</option>
                                   <option value="FLORIDA">FLORIDA</option>
                                   <option value="FORMOSA">FORMOSA</option>
                                   <option value="FREE STATE">FREE STATE</option>
                                   <option value="G.B.A. ZONA NORTE">G.B.A. ZONA NORTE</option>
                                   <option value="G.B.A. ZONA OESTE">G.B.A. ZONA OESTE</option>
                                   <option value="G.B.A. ZONA SUR">G.B.A. ZONA SUR</option>
                                   <option value="GARISSA">GARISSA</option>
                                   <option value="GAUTENG">GAUTENG</option>
                                   <option value="GEORGIA">GEORGIA</option>
                                   <option value="GUAINÍA">GUAINÍA</option>
                                   <option value="GUAJIRA">GUAJIRA</option>
                                   <option value="GUAM">GUAM</option>
                                   <option value="GUANAJUATO">GUANAJUATO</option>
                                   <option value="GUAVIARE">GUAVIARE</option>
                                   <option value="GUERRERO">GUERRERO</option>
                                   <option value="HANOVER">HANOVER</option>
                                   <option value="HAWAII">HAWAII</option>
                                   <option value="HIDALGO">HIDALGO</option>
                                   <option value="HOMA BAY">HOMA BAY</option>
                                   <option value="HUILA">HUILA</option>
                                   <option value="I REGIÓN">I REGIÓN</option>
                                   <option value="IDAHO">IDAHO</option>
                                   <option value="II REGIÓN">II REGIÓN</option>
                                   <option value="III REGIÓN">III REGIÓN</option>
                                   <option value="ILLINOIS">ILLINOIS</option>
                                   <option value="INDIANA">INDIANA</option>
                                   <option value="IOWA">IOWA</option>
                                   <option value="ISIOLO">ISIOLO</option>
                                   <option value="IV REGIÓN">IV REGIÓN</option>
                                   <option value="IX REGIÓN">IX REGIÓN</option>
                                   <option value="JALISCO">JALISCO</option>
                                   <option value="JUJUY">JUJUY</option>
                                   <option value="KAJIADO">KAJIADO</option>
                                   <option value="KAKAMEGA">KAKAMEGA</option>
                                   <option value="KANSAS">KANSAS</option>
                                   <option value="KENTUCKY">KENTUCKY</option>
                                   <option value="KERICHO">KERICHO</option>
                                   <option value="KIAMBU">KIAMBU</option>
                                   <option value="KILIFI">KILIFI</option>
                                   <option value="KIRINYAGA">KIRINYAGA</option>
                                   <option value="KISII">KISII</option>
                                   <option value="KISUMU">KISUMU</option>
                                   <option value="KITUI">KITUI</option>
                                   <option value="KWALE">KWALE</option>
                                   <option value="KWAZULU-NATAL">KWAZULU-NATAL</option>
                                   <option value="LA PAMPA">LA PAMPA</option>
                                   <option value="LA RIOJA">LA RIOJA</option>
                                   <option value="LAGOS">LAGOS</option>
                                   <option value="LAIKIPIA">LAIKIPIA</option>
                                   <option value="LANAO DEL NORTE">LANAO DEL NORTE</option>
                                   <option value="LIMPOPO">LIMPOPO</option>
                                   <option value="LOUISIANA">LOUISIANA</option>
                                   <option value="LOWER SAXONY">LOWER SAXONY</option>
                                   <option value="MACHAKOS">MACHAKOS</option>
                                   <option value="MAGDALENA">MAGDALENA</option>
                                   <option value="MAINE">MAINE</option>
                                   <option value="MANDERA">MANDERA</option>
                                   <option value="MANITOBA">MANITOBA</option>
                                   <option value="MARSABIT">MARSABIT</option>
                                   <option value="MARYLAND">MARYLAND</option>
                                   <option value="MASSACHUSETTS">MASSACHUSETTS</option>
                                   <option value="MENDOZA">MENDOZA</option>
                                   <option value="MERU">MERU</option>
                                   <option value="META">META</option>
                                   <option value="MICHIGAN">MICHIGAN</option>
                                   <option value="MICHOACÁN">MICHOACÁN</option>
                                   <option value="MIGORI">MIGORI</option>
                                   <option value="MINNESOTA">MINNESOTA</option>
                                   <option value="MISIONES">MISIONES</option>
                                   <option value="MISSISSIPPI">MISSISSIPPI</option>
                                   <option value="MISSOURI">MISSOURI</option>
                                   <option value="MOMBASA">MOMBASA</option>
                                   <option value="MONTANA">MONTANA</option>
                                   <option value="MORELOS">MORELOS</option>
                                   <option value="MPUMALANGA">MPUMALANGA</option>
                                   <option value="MURANG’A">MURANG’A</option>
                                   <option value="NAIROBI">NAIROBI</option>
                                   <option value="NAKURU">NAKURU</option>
                                   <option value="NANDI">NANDI</option>
                                   <option value="NARIÑO">NARIÑO</option>
                                   <option value="NAROK">NAROK</option>
                                   <option value="NAYARIT">NAYARIT</option>
                                   <option value="NEBRASKA">NEBRASKA</option>
                                   <option value="NEUQUÉN">NEUQUÉN</option>
                                   <option value="NEVADA">NEVADA</option>
                                   <option value="NEW BRUNSWICK">NEW BRUNSWICK</option>
                                   <option value="NEW HAMPSHIRE">NEW HAMPSHIRE</option>
                                   <option value="NEW JERSEY">NEW JERSEY</option>
                                   <option value="NEW MEXICO">NEW MEXICO</option>
                                   <option value="NEW YORK">NEW YORK</option>
                                   <option value="NEWFOUNDLAND &amp; LABRADOR">NEWFOUNDLAND &amp; LABRADOR</option>
                                   <option value="NORTE DE SANTANDER">NORTE DE SANTANDER</option>
                                   <option value="NORTH CAROLINA">NORTH CAROLINA</option>
                                   <option value="NORTH DAKOTA">NORTH DAKOTA</option>
                                   <option value="NORTH RHINE-WESTPHALIA">NORTH RHINE-WESTPHALIA</option>
                                   <option value="NORTH WEST">NORTH WEST</option>
                                   <option value="NORTHERN CAPE">NORTHERN CAPE</option>
                                   <option value="NORTHERN MARIANA ISLANDS">NORTHERN MARIANA ISLANDS</option>
                                   <option value="NORTHWEST TERRITORIES">NORTHWEST TERRITORIES</option>
                                   <option value="NOVA SCOTIA">NOVA SCOTIA</option>
                                   <option value="NUEVO LEÓN">NUEVO LEÓN</option>
                                   <option value="NUNAVUT">NUNAVUT</option>
                                   <option value="NYAMIRA">NYAMIRA</option>
                                   <option value="NYANDARUA">NYANDARUA</option>
                                   <option value="NYERI">NYERI</option>
                                   <option value="OAXACA">OAXACA</option>
                                   <option value="OHIO">OHIO</option>
                                   <option value="OKLAHOMA">OKLAHOMA</option>
                                   <option value="ONTARIO">ONTARIO</option>
                                   <option value="OREGON">OREGON</option>
                                   <option value="PENNSYLVANIA">PENNSYLVANIA</option>
                                   <option value="PRINCE EDWARD ISLAND">PRINCE EDWARD ISLAND</option>
                                   <option value="PROVENCE DE QUEBEC">PROVENCE DE QUEBEC</option>
                                   <option value="PUEBLA">PUEBLA</option>
                                   <option value="PUERTO RICO">PUERTO RICO</option>
                                   <option value="PUNJAB">PUNJAB</option>
                                   <option value="PUNJB">PUNJB</option>
                                   <option value="PUTUMAYO">PUTUMAYO</option>
                                   <option value="QUERÉTARO">QUERÉTARO</option>
                                   <option value="QUINDIO">QUINDIO</option>
                                   <option value="QUINTANA ROO">QUINTANA ROO</option>
                                   <option value="RHODE ISLAND">RHODE ISLAND</option>
                                   <option value="RISARALDA">RISARALDA</option>
                                   <option value="RM">RM</option>
                                   <option value="RÍO NEGRO">RÍO NEGRO</option>
                                   <option value="SAARLAND">SAARLAND</option>
                                   <option value="SALTA">SALTA</option>
                                   <option value="SAMBURU">SAMBURU</option>
                                   <option value="SAN ANDRES ISLAS">SAN ANDRES ISLAS</option>
                                   <option value="SAN JUAN">SAN JUAN</option>
                                   <option value="SAN LUIS">SAN LUIS</option>
                                   <option value="SAN LUIS POTOSÍ">SAN LUIS POTOSÍ</option>
                                   <option value="SANTA CRUZ">SANTA CRUZ</option>
                                   <option value="SANTA FE">SANTA FE</option>
                                   <option value="SANTANDER">SANTANDER</option>
                                   <option value="SANTIAGO DEL ESTERO">SANTIAGO DEL ESTERO</option>
                                   <option value="SASKATCHEWAN">SASKATCHEWAN</option>
                                   <option value="SIAYA">SIAYA</option>
                                   <option value="SINALOA">SINALOA</option>
                                   <option value="SONORA">SONORA</option>
                                   <option value="SOUTH CAROLINA">SOUTH CAROLINA</option>
                                   <option value="SOUTH DAKOTA">SOUTH DAKOTA</option>
                                   <option value="SUCRE">SUCRE</option>
                                   <option value="TABASCO">TABASCO</option>
                                   <option value="TAITA-TAVETA">TAITA-TAVETA</option>
                                   <option value="TAMAULIPAS">TAMAULIPAS</option>
                                   <option value="TENNESSEE">TENNESSEE</option>
                                   <option value="TEXAS">TEXAS</option>
                                   <option value="THARAKA-NITHI">THARAKA-NITHI</option>
                                   <option value="TIERRA DEL FUEGO">TIERRA DEL FUEGO</option>
                                   <option value="TLAXCALA">TLAXCALA</option>
                                   <option value="TOLIMA">TOLIMA</option>
                                   <option value="TRANS-NZOIA">TRANS-NZOIA</option>
                                   <option value="TUCUMÁN">TUCUMÁN</option>
                                   <option value="TURKANA">TURKANA</option>
                                   <option value="UASIN GISHU">UASIN GISHU</option>
                                   <option value="UTAH">UTAH</option>
                                   <option value="V REGIÓN">V REGIÓN</option>
                                   <option value="VALLE DEL CAUCA">VALLE DEL CAUCA</option>
                                   <option value="VAUPÉS">VAUPÉS</option>
                                   <option value="VERACRUZ">VERACRUZ</option>
                                   <option value="VERMONT">VERMONT</option>
                                   <option value="VI REGIÓN">VI REGIÓN</option>
                                   <option value="VICHADA">VICHADA</option>
                                   <option value="VIHIGA">VIHIGA</option>
                                   <option value="VII REGIÓN">VII REGIÓN</option>
                                   <option value="VIII REGIÓN">VIII REGIÓN</option>
                                   <option value="VIRGIN ISLANDS">VIRGIN ISLANDS</option>
                                   <option value="VIRGINIA">VIRGINIA</option>
                                   <option value="WAJIR">WAJIR</option>
                                   <option value="WASHINGTON">WASHINGTON</option>
                                   <option value="WEST POKOT">WEST POKOT</option>
                                   <option value="WEST VIRGINIA">WEST VIRGINIA</option>
                                   <option value="WESTERN CAPE">WESTERN CAPE</option>
                                   <option value="WISCONSIN">WISCONSIN</option>
                                   <option value="WYOMING">WYOMING</option>
                                   <option value="X REGIÓN">X REGIÓN</option>
                                   <option value="XI REGIÓN">XI REGIÓN</option>
                                   <option value="XII REGIÓN">XII REGIÓN</option>
                                   <option value="XIV - LOS RÍOS">XIV - LOS RÍOS</option>
                                   <option value="XV - ARICA Y PARINACOTA">XV - ARICA Y PARINACOTA</option>
                                   <option value="YUCATÁN">YUCATÁN</option>
                                   <option value="YUKON TERRITORY">YUKON TERRITORY</option>
                                   <option value="ZACATECAS">ZACATECAS</option>
                            </select>
            phone            <input type="text" style="width:120px; height:auto;" maxlength="20" onkeyup="ForInputUpperceseInternal(this,event);" value="" class="phone_number input_field" />
            <span onclick="$('#geophone_#{id}').remove();" class="gl_button alignRight"><span><a class="button-style b_delete" href="javascript:void(0);">Delete</a></span></span>
        </td>
    </tr>
   </tbody></table>
</div>









<script type="text/javascript">
    var regionsAvailable = {};
    var regionsSelected = {};
    var messagesRegionsList = {
        'not_found': 'Nothing found',
        'is_empty': 'List is empty'
    };
</script>
<template id="setting_regions">
    <div data-name="#{REGION_NAME}" data-id="#{REGION_ID}" class="list-segment">
        <div class="list-title">
            <span title="Remove Region" class="ui-icon ui-icon-circle-minus"></span>
            <span title="Add Region" class="ui-icon ui-icon-circle-plus"></span>
            <span title="Open List of Cities" class="ui-icon ui-icon-carat-1-s"></span>
            <span title="Close List of Cities" class="ui-icon ui-icon-carat-1-n"></span>
            <span class="region-name">#{REGION_NAME}</span>
        </div>
        <ul id="cities_#{REGION_ID}"><!-- template#setting_regions_city --></ul>
    </div>
</template>
<template id="setting_regions_city">
    <li data-index="#{INDEX}" data-name="#{CITY_NAME}" data-id="#{CITY_ID}">
        <span title="Remove City" class="ui-icon ui-icon-circle-minus"></span>
        <span title="Add City" class="ui-icon ui-icon-circle-plus"></span>
        <span class="city-name">#{CITY_NAME}</span>
    </li>
</template>
<template id="setting_regions_msg">
    <b class="message-in-box #{CLASS_NAME}"> #{MSG} </b>
</template>

 <table style="display: none;" id="templatePromotion">
    <tbody>
      <tr id="body">
      <td>
      <select number="" name="select" id="select">
            <option value=""> Select Promotion</option>
           <option value="27"> Here is a very very very very &lt;&gt;|?&gt;]\/[!@#$%^very very very very very very very  Long Promo tiltle</option>
<option value="29">Hello, Long Promo tiltle. With signs</option>
<option value="31">Super Vehicle (test)</option>
<option value="33">SPECIAL OFFER! (test)</option>
<option value="37">Are you Lucky?</option>
<option value="39">Mitsubishi Lancer X</option>
<option value="83">new</option>
<option value="85">6 item</option>
<option value="103">new promo</option>
<option value="105">vit</option>
<option value="107">New Parts</option>
<option value="109">Best cars are here</option>
<option value="111">Price Cut 25%!!!</option>
<option value="113">Used cars</option>
<option value="115">Win Iphone!</option>
<option value="117">Free car wash</option>
<option value="119">Get here! Lowest price ever!</option>
<option value="121">Oil change</option>
<option value="123">Car repair</option>
<option value="125">&lt;Hello, Here is a boat</option>

        </select>
         </td>
         <td>
              <input type="checkbox" checked="checked" name="action" id="action" /> 
         </td>
         <td>
             <div>
             <input readonly="readonly" style="width:90px" name="picer" id="picer" />   
             </div>
           </td>
          <td>
              <img width="55" height="55" src="/images/staff_no_photo.jpg" id="icon" />
           </td>
          <td>
                <span id="remove" class="gl_button alignLeft">
                                                <span><a class="button-style b_delete" href="javascript:void(0)">Remove</a></span>
                                        </span>
           </td>
      </tr>
    </tbody>
 </table>
<div style="display: none;" title="Confirm clearing" id="clearDialog">
    <span>
        Are you sure you want to clear Autocheck Authorization Information (CID, password, SID)?    </span>
    <br />
    <br />
    <br />
    <span onclick="$('#clearDialog').dialog('close');" class="gl_button cancel_btn gl_button_fll alignRight">
        <span>
            <a class="button-style b_close">Cancel</a>
        </span>
    </span>
    <span onclick="makeClearAuthorizationInfo();" class="gl_button save_btn gl_button_fll alignRight">
        <span>
            <a class="button-style b_save">Ok</a>
        </span>
    </span>
</div>


<script type="text/javascript">
    var tmp_id  = 0;
    var counter = 1;
    var CustomOverridePhones = {};
    var duration = 6000;
    $('#wrap_select').html(refererSelect);
    $('#wrap_select').find('select').attr('name','referer_sel').attr('id','referer_sel');
    function ExpandCollapse(id_grup){
        if($("#go_"+id_grup).attr('src')=='/images/arrow_right.png')
            {
                $("#go_"+id_grup).attr('src','/images/arrow_bottom.png');
               // $("#block_"+id_grup).show('slow');
           }
            else
            {
                $("#go_"+id_grup).attr('src','/images/arrow_right.png');
                // $("#block_"+id_grup).hide('slow');
            }

             $("#block_"+id_grup).toggle('fast');

}

    function setCustomVirAccessSettings(param) {
        var vir_settings = $('#form_vir_print_dms_template').serialize();
        var user_id;
        $('#user_tree .jstree-clicked').each(function(i, element){
           user_id = $(element).parent().attr('id').substr(5);
        });
        
        statusOpen("Saving...",0);
        $.ajax({
            url : users_ajax_link,
            type : 'POST',
            data : {
                oper : 'setCustomVirAccessSettings',
                user_id : user_id,
                settings : vir_settings,
                mode : param
            },
            success : function(result) {
                statusRemove();
                if (result.status) {
                    jalert('Setting saved successfully', null, duration);
                    if (result.html) {
                        $('#user_editor_tab10_content').html(result.html);
                    }
                } else {
                    jalert('Vir Access settings not saved! ', 2, duration);
                }
            }
        });
    }

    function proverka(input) {
        var value = input.value;
        var rep = /[!,|]/g;
        if (rep.test(value)) {
            value = value.replace(rep, ''); input.value = value;
        }
    }

    function addCustomOverridePhone(e) {
        e.preventDefault();
        counter++;
        $('#override_phones_table').append(
            '&lt;tr id="tr_override_fone_"' + counter + '&gt;&lt;td valign="middle" class="bold" style="padding-top: 5px"&gt;Custom' + counter + ':&lt;/td&gt;&lt;td valign="middle" class="tb_r tb_r_padding"&gt;' +
            '&lt;input type="text" id="custom_override' + '_' + counter +'" name="custom_' + '_' + counter +'" maxlength="50" /&gt;' +
            '&lt;/td&gt;&lt;td valign="middle" class="tb_r tb_r_padding"&gt;'+
            '&lt;span id="wrap_select_'  + counter + '"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign="middle" class="tb_r tb_r_padding"&gt;' +
            ' &lt;span id="sp_wrp_input_' + counter + '"&gt;&lt;input disabled="disabled" style="width: 120px; vertical-align: middle;" type="text" id="referer_url' + '_' + counter +'" maxlength="50" class="ui-state-disabled" /&gt;&lt;/span&gt; ' +
            '&lt;span id="ref_url_cont" style="display: inline-block; width: 100px"&gt;&lt;/span&gt; &lt;span onclick="addCustomOverridePhone(event)" class="gl_button" style="vertical-align: middle;"&gt;' +
            '&lt;span style="padding: 0px 4px"&gt;&lt;a href="#" class="button-style b_add" style="display: block; height: 24px;"&gt;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt; ' +
            '&lt;span onclick="removeCustomOverridePhone(event)" class="gl_button" style="vertical-align: middle;"&gt;' +
            '&lt;span style="padding: 0px 4px"&gt;&lt;a href="#" class="button-style b_delete" style="display: block; height: 24px;"&gt;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;'
        );
        $('#wrap_select_' + counter).html(refererSelect);
        $('#wrap_select_' + counter).find('select').attr('name', 'referer_sel_' + counter)
            .attr('id','referer_sel_' + counter);
        $('#custom_override_' + counter).rules('add', {custom_override_fill: true});
        $('#referer_sel_' + counter).rules('add', {custom_override_fill: true});
    }

    function removeAllCustomOverridePhone() {
        counter = 1;
        var defaultElem = $('#tr_override_fone');
        var itemForDelete = $('tr[id^=tr_override_fone_]');

        defaultElem.find('input').each(function() {
            $(this).val('');
        });
        $('#sp_wrp_input').html('&lt;input type="text" id="referer_url" disabled="disabled" maxlength="50" style="width: 120px; vertical-align: middle;" class="ui-state-disabled" /&gt;');
        $('#radio_custom').attr("checked","checked");
        $('#wraper_ref_id').hide();
        $('#wraper_ref_code').hide();

        for (var i = 0; i &lt; itemForDelete.length; i++) {
            $(itemForDelete[i]).remove();
        }
    }

    function removeCustomOverridePhone(e) {
        e.preventDefault();
        var elem  = $(e.target).parents('tr');
        if (elem.attr('id') == 'tr_override_fone') {
            var phone = $('#custom_override');
            var url   = $('#referer_url');
            var id    = $('#referer_id');
            elem.find('input').each(function() {
                $(this).val('');
            });
            elem.find('[id ^= "wrap_select"] select').val('0');
            if (id.html() !== '') {
                $('#custom_override').data('refererIdFirstDeleted', id.html());
                id.html('');
            }
            $('#sp_wrp_input').html('&lt;input type="text" id="referer_url" maxlength="50" style="width: 120px; vertical-align: middle;" /&gt;');
            $('#sp_wrp_input').find('#referer_url').addClass('ui-state-disabled').attr('disabled', 'disabled');
            $('#radio_custom').attr("checked","checked");
            $('#wraper_ref_id').hide();
            $('#wraper_ref_code').hide();
        } else {
            var elm_arr = elem.find('input, select');
            for (var i = 0; i &lt; elm_arr.length; i++) {
                $(elm_arr[i]).attr('is_delete', true);
            }
            $('td', elem).hide();
            elem.css('display', 'none');
        }
    }

    function setCustomOverridePhonesForOut() {
        if (CustomOverridePhones !== 'null') {
            return CustomOverridePhones;
            //CustomOverridePhones = 'null';
        }
    }

    function getCustomOverridePhones()
    {
        var result     = {};
        var phone_arr  = $('input[id^=custom_override]');
        var phone; var url; var id;
        for (var i = 0; i &lt; phone_arr.length; i++) {
            phone = $(phone_arr[i]);
            var counter = phone.attr('id').split('_')[2];
            if (typeof counter === 'undefined') {
                counter = '';
            } else {
                counter = '_' + counter;
            }
            id   = $('#referer_id' + counter);
            if (!(phone.attr('id') === 'custom_override' &amp;&amp; phone.val() === '' &amp;&amp; $('#referer_sel').val() === '0')) {
                result[phone.attr('name')]                    = {};
                result[phone.attr('name')]['custom_override'] = phone.val();
                result[phone.attr('name')]['id']              = id.html();
                if ($('#wrap_select' + counter + ' select :selected').val() == 'custom') {
                    result[phone.attr('name')]['referer_url']     = $('#referer_url' + counter).val();
                } else {
                    result[phone.attr('name')]['referer_code']    = $('#wrap_select' + counter + ' select :selected').val();
                }
                if (typeof phone.attr('is_delete') !== 'undefined') {
                    result[phone.attr('name')]['is_delete']   = true;
                }
            }
        }
        
        // add the removal of the first record (since it is not installed attr 'is_delete')
        var refererIdFirstDeleted = $('#custom_override').data('refererIdFirstDeleted');
        
        if ( // If you clear the field of the first record without removing it
            !refererIdFirstDeleted 
            &amp;&amp; ($('#custom_override').val() === '' &amp;&amp; $('#referer_sel').val() === '0' &amp;&amp; $('#referer_id').html() !== '')
        ) {
            refererIdFirstDeleted = $('#referer_id').html();
        }    
        if (refererIdFirstDeleted) {
            result['refererIdFirstDeleted'] = {
                id: refererIdFirstDeleted, 
                custom_override: 'none',
                referer_url: 'none',
                referer_code: 'none',
                is_delete: true
            };
        }    
        return result;
    }

    function setCustomOverridePhones(data)
    {
        removeAllCustomOverridePhone();
        $('#custom_override').data('refererIdFirstDeleted', null);
        if (typeof data !== "undefined" &amp;&amp; data.length != 0) {
            if(data!=null &amp;&amp; data!=undefined ){
                for (var i = 0; i &lt; data.length; i++) {
                    if (i == 0) {
                        $('#custom_override').val(data[i]['phone']);
                        $('#referer_id').html(data[i]['id']);
                        if (
                            typeof data[i]['referer_code'] !== 'undefined'
                            &amp;&amp; data[i]['referer_code'] !== ''
                        ) {
                            $('#wrap_select').html(refererSelect);
                            $('#wrap_select').find('select').attr('name', 'referer_sel').attr('id','referer_sel');
                            
                            $("#wrap_select select [value="+data[i]['referer_code'] + "]").attr("selected", "selected");
                            $('#referer_code').html(data[i]['referer_code']);
                            $('#wraper_ref_code').show();
                        } else {
                            $('#sp_wrp_input input').attr('disabled', false);
                            $('#sp_wrp_input input').removeClass('ui-state-disabled');
                        $('#referer_url').val(data[i]['referer_url']);
                            $("#wrap_select select [value=custom]").attr("selected", "selected");
                            $('#wraper_ref_id').show();
                        }
                    } else {
                        counter++;
                        $('#override_phones_table').append(
                            '&lt;tr id="tr_override_fone_' + counter + '"&gt;&lt;td valign="middle" class="bold" style="padding-top: 5px"&gt;Custom' + counter + ':&lt;/td&gt;&lt;td valign="middle" class="tb_r tb_r_padding"&gt;' +
                                '&lt;input type="text" id="custom_override' + '_' + counter +'" name="custom' + '_' + counter +'" maxlength="50" /&gt;' +
                                '&lt;/td&gt;&lt;td valign="middle" class="tb_r tb_r_padding"&gt;' +
                                '&lt;span id="wrap_select_' + counter + '"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign="middle" class="tb_r tb_r_padding"&gt;' +
                                '&lt;span id="sp_wrp_input_' + counter + '"&gt; &lt;input type="text" disabled="disabled" id="referer_url_' + counter + '" maxlength="50" style="width: 120px; vertical-align: middle;" class="ui-state-disabled"/&gt;&lt;/span&gt; ' +
                                '&lt;span id="ref_url_cont" style="display: inline-block; width: 100px"&gt;' +
                                '&lt;span id="wraper_ref_id_' + counter + '" style="display: none"&gt;[_rfc_&lt;span id="referer_id_' + counter + '"&gt;&lt;/span&gt;]&lt;/span&gt;' +
                                '&lt;span id="wraper_ref_code_' + counter + '" style="display: none"&gt;[_rf_&lt;span id="referer_code_' + counter + '"&gt;&lt;/span&gt;]&lt;/span&gt; ' +
                                '&lt;/span&gt;' +
                                ' &lt;span onclick="addCustomOverridePhone(event)" class="gl_button" style="vertical-align: middle;"&gt;' +
                                '&lt;span style="padding: 0px 4px"&gt;&lt;a href="#" class="button-style b_add" style="display: block; height: 24px;"&gt;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt; ' +
                                '&lt;span onclick="removeCustomOverridePhone(event)" class="gl_button" style="vertical-align: middle;"&gt;' +
                                '&lt;span style="padding: 0px 4px"&gt;&lt;a href="#" class="button-style b_delete" style="display: block; height: 24px;"&gt;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;'
                        );
                        $('#custom_override' + '_' + counter).val(data[i]['phone']);
                        $('#referer_id' + '_' + counter).html(data[i]['id']);
                        $('#wrap_select'    + '_' + counter).html(refererSelect);
                        $('#wrap_select_' + counter).find('select').attr('name', 'referer_sel_' + counter)
                            .attr('id','referer_sel_' + counter);
                        $('#custom_override_' + counter).rules('add', {custom_override_fill: true});
                        $('#referer_sel_' + counter).rules('add', {custom_override_fill: true});
                        if (
                            typeof data[i]['referer_code'] !== 'undefined'
                            &amp;&amp; data[i]['referer_code'] !== ''
                        ) {
                            $('#wrap_select'    + '_' + counter + " select [value="+data[i]['referer_code']+"]").attr("selected", "selected");
                            $('#referer_code'    + '_' + counter).html(data[i]['referer_code']);
                            $('#wraper_ref_code' + '_' + counter).show();
                        } else {
                            $('#wrap_select'    + '_' + counter + " select [value=custom]").attr("selected", "selected");
                            $('#referer_url' + '_' + counter).val(data[i]['referer_url']);
                            $('#referer_url' + '_' + counter).attr('disabled', false);
                            $('#referer_url' + '_' + counter).removeClass('ui-state-disabled');
                            $('#wraper_ref_id'   + '_' + counter).show();
                        }
                    }

                }
            }
        }
    }

var pwd = '';   

    $(document).ready(function(){
        
        if($('.demotores_user_id')){
            $('.demotores_user_id').each(function(key, element){
                $(element).change(function(el){
                    $('.demotores_user_id').each(function(key, element){
                        $(element).val($(el.currentTarget).val());
                    })
                })
            })
        }

        /* geoip phones feature */

        $('#add_geoip_phone').click(function(){
            var _id = tmp_id++;
            $('#geoip_phones').append($.tmpl($('#geoip_phone_template').html(), {id: _id}));
            //$('#geoip_phones').find('.zip_list').numeric({negative:false});
            $('#geoip_phones').find('.zip_list').keyup(function(event){
                    ForInputToUpperceseZip(this,event);

            });
            return false;
        });

        /* end */



$('#user_add_promotion').click(function(){
  var next;
  if($('#list-promotion').find("select:last").attr("number")){
    next =   parseInt(  $('#list-promotion').find("select:last").attr("number"));
    next+=1;
  }else{
    if($('#list-promotion').find("tbody").find("tr[name=title]").length==0)
    $('#list-promotion').find("tbody").append("&lt;tr name='title'&gt;&lt;td&gt;Promotions&lt;/td&gt;&lt;td&gt;Active&lt;/td&gt;&lt;td&gt;Expiration Date&lt;/td&gt;&lt;td&gt;Icon&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;");
    next=1;
  }
  var newElement =  $("#templatePromotion").find("tbody").html();

  newElement =$(newElement);

  $(newElement).attr("id","body_prom"+next);
  $(newElement).find("select[id=select]").attr("id","select_prom"+next).attr("number",next);
  $(newElement).find("span[id=remove]").attr("id","remove_prom"+next).attr("target","body_prom"+next);
  $(newElement).find("input[id=picer]").attr("id","date_picer"+next);
  $(newElement).find("img[id=icon]").attr("id","icon_"+next);
  $('#list-promotion').find("tbody").append(newElement);


  $("#select_prom"+next).change(function(){
    ChangeSelect(this);
  })

  var date =  new Date();
  date.setDate(date.getDate() + 1)
  $('#date_picer'+next).datepicker({
    dateFormat:"M d, yy ",
    changeMonth: true,
    changeYear: true,
    yearRange: "-0:+5",
    minDate:date });
  $("#remove_prom"+next).click(function(){
    if($('#list-promotion  tbody tr[id^=body_prom]').length &lt;=1){
      $('#list-promotion tbody').html("");
    }
    $("#"+$(this).attr("target")).remove();
  });
});

        $('#delete_user_tree_search').change(function(){
            del_search($(this).val());
        });
        $("#delete_user_tree_search").keyup(function(){
            del_search($(this).val());
        });
        $("#delete_user_tree_search").focus(function(){
            if ($(this).val() == 'Search')
                $(this).val('');
        });
        $("#delete_user_tree_search").blur(function(){
            if ($(this).val() == '')
                $(this).val('Search');
        });

        $('span[id^=_tab]').click(function(){
            $('[id^=ax_tab]').hide();
            $('#ax'+$(this).attr('id')).show();
        });

        function validateAutocheck(){
            var pass,   
                lg = $.trim($('#au_login').val());
                key  = $.trim($('#au_key').val()),
                flag = '';
            if ($.trim($('#au_password').val()) === '' &amp;&amp; pwd &amp;&amp; $('#au_password').css('display') === 'none') {
                pass = pwd;
            } else {
                pass = $('#au_password').val();
            } 
            var userId;
            $('#user_tree .jstree-clicked').each(function(i, element){
               userId = $(element).parent().attr('id').substr(5);
            });
            if(!lg &amp;&amp; !pass &amp;&amp; !key){
                if($('#au_show').val() == 2){
                    flag = false;
                    jalert('Please, enter valid Autocheck autorization data.', 1, duration);
                } else {
                    flag = true;
                }
            } else if(lg != '' &amp;&amp; pass != '' &amp;&amp; key != ''){

                statusOpen('Checking Autocheck fields...', 0);
                $.ajax({
                    url: users_ajax_link,
                    async: false,
                    data:{
                        oper: "checkautocheck",
                        CID: lg,
                        PWD: pass,
                        SID: key,
                        userId: userId
                    },
                    dataType:'html',
                    success:function(resp){
                        statusRemove();
                        if(~~resp == 0){
                            jalert('Please, enter valid Autocheck autorization data.', 1, duration);
                            $('#user_editor_tab3').trigger('click');
                            $('[id^=ax_tab]').hide();
                            $('#ax_tab4').show();
                            flag = false;
                        } else {
                            flag = true;
                        }
                    },
                    error: function(){
                        statusRemove();
                        jalert('An error occurred', 2, duration);
                        flag = false;
                    }
                });

            } else {
                var msg = [];

                if(!lg)
                    msg.push('Login');
                if(!pass)
                    msg.push('Password');
                if(!key)
                    msg.push('Key');

                if(msg.length){
                    jalert('Please enter Autocheck ' + msg.join(', ') + ' or leave all fields empty.', 1, duration);
                    $('#user_editor_tab3').trigger('click');
                    $('[id^=ax_tab]').hide();
                    $('#ax_tab4').show();
                    flag = false;
                }

            }
            return flag;
        }

        $("input[id^=phone], input[id^=toll_free_phone],").keyup(function(event){
            var posCur = doGetCaretPosition(this);
        if(event.keyCode==9 || event.keyCode==37 || event.keyCode==39 ||event.keyCode ==32 ){
                if(event.keyCode ==32){
                        var _val = $(this).attr("value");
                        if(!flagChackValidatePhone){
                     $(this).val(_val.toUpperCase().replace(new RegExp(" ",'g'),""));

                       if(_val.length ==$(this).attr("maxlength")  )
                                     setSelectionRange(this,posCur,posCur);
                          else
                                    setSelectionRange(this,posCur,posCur-1);
                    }else{
                           $(this).attr("value" , _val.toUpperCase());
                             setSelectionRange(this,posCur,posCur);
                      }
                }
           }else{
               if(!flagChackValidatePhone){
                 if($(this).parent().find('input[value=]').length==3){

                                  //   if($('[for='+$(this).closest('form').attr("id")+']').length!=0 )
                                          // $(this).parent().find("[for="+$(this).parent().attr("id")+"]").remove();
                }
               }
               var _val = $(this).attr("value");
                if(/^[A-Za-z0-9]+$/i.test(String.fromCharCode(event.keyCode)) ) {
                     if(!flagChackValidatePhone){
                                      $(this).val(_val.toUpperCase().replace(new RegExp(" ",'g'),""));
                      }else{
                               $(this).attr("value" , _val.toUpperCase());
                          }
                         setSelectionRange(this,posCur,posCur);


                }

                  if ($(this).val().length  &gt;= $(this).attr("maxlength") ){


                    var _val = $(this).attr("value");
                        if(!flagChackValidatePhone){
                        $(this).attr("value" , _val.toUpperCase().replace(new RegExp(" ",'g'),""))
                        }else{
                           $(this).attr("value" , _val.toUpperCase());
                        }
                     setSelectionRange(this,posCur,posCur);
                       if (posCur &gt;= $(this).attr("maxlength") &amp;&amp; posCur === $(this).attr("maxlength")) {
                           if ($(this).nextAll('input').length) {
                               $(this).nextAll('input').first().focus();
                           } else if ($(this).parent().nextAll('input').length) {
                               $(this).parent().nextAll('input').first().focus();
                           }
                       }
                    }
           }



           function setSelectionRange(input, selectionStart, selectionEnd) {
                  if (input.setSelectionRange) {
                    input.focus();
                    input.setSelectionRange(selectionStart, selectionEnd);
                  }
                  else if (input.createTextRange) {
                    var range = input.createTextRange();
                    range.collapse(true);
                    range.moveEnd('character', selectionEnd);
                    range.moveStart('character', selectionStart);
                    range.select();
                  }
                }


           function doGetCaretPosition (oField) {
                            var iCaretPos = 0;
                            if (document.selection) {
                            oField.focus ();
                            var oSel = document.selection.createRange ();
                            oSel.moveStart ('character', -oField.value.length);
                            iCaretPos = oSel.text.length;
                            }
                            else if (oField.selectionStart || oField.selectionStart == '0')
                            iCaretPos = oField.selectionStart;

                            return (iCaretPos);
          }

});


        $('#mark_down, #priority').numeric({negative:false});


      $('#international_phone').keyup(function(event){
               ForInputUpperceseInternal(this,event);
        });


        Date.firstDayOfWeek = 0;
        Date.format = 'mmm dd, yyyy';
        var d = new Date();

        $('#active_until').datepicker({ dateFormat:"M d, yy ",
                    changeMonth: true,
                    changeYear: true,
                    yearRange: "-0:+5",
                     minDate: d

            });


    $('#del_active_until').click(function(){
        $('#active_until').attr("value",'');
    });
        /*&lt;Start&gt; User Tree Section*/

        treeHideNotMatched($("#user_tree"), {chengeSearchPlugin: true});

        function searchChange(value){
            var userTree = $("#user_tree");
            userTree.find('.jstree-search').removeClass('jstree-search');
            if (value == "") {
                treeShowAllNodes(userTree, {
                    classes: {
                        listOpen: 'jstree-open',
                        listClose: 'jstree-closed',
                        listEmpty: 'jstree-leaf',
                        rootBranch: 'rootUserBranch',
                        displayNone: 'displ_n_important',
                    }
                });
                return;
            }

            userTree.jstree('search',value);

        }
        function addUserFinish(added){//--------------------------------------------------------------------(User Editor -&gt; User Tree) External Interface
            if (added)
            {
                $("#user_tree").jstree('deselect_node',($("#user_tree").jstree('get_selected')));
                $("#user_tree").jstree('refresh');
                $("#users").jstree('refresh');
            }
            $("#user_tree").jstree('remove','#user_0');
        }
        function addUser(){
            $('#geoip_phones').empty();
            $("#password").rules('add',{required:true});
            var parent = $("#user_tree").jstree('get_selected').filter(':eq(0)');
            var data = {'data':'{New User}','attr':{'id':'user_0','class':'userBranch','rel':'new'}};
            if (!parent.length)
                parent = $('.rootUserBranch');
            $("#user_tree").jstree('create_node',parent,'last',data);
            $("#user_tree").jstree('open_node',parent,null,true);
            parent_id = $(parent).attr('id').substr(5);
            $('#state_id, #city_id').val('');
            //----------------------------------------------------------------------------------------------(User Tree -&gt; User Editor) External Interface
            openEditor(0,function(){addUserFinish(true)},function(){addUserFinish(false)},parent_id);
        }
        function deleteUser(){
            var users = $("#user_tree").jstree('get_selected');
            if (users.length)
            {
                if (users.is('.rootUserBranch'))
                {
                    jalert("You cannot delete youself", 1, duration);
                }
                else
                {
                    statusOpen("Deleting User...",0);
                    var user_ids = [];
                    users.each(function(){
                        var hasLeads=$(this).attr('have_leads');
                        
                        var textNameUser=$(this).children( "a" ).first().text();
                        
                        if(hasLeads=='1'){
                            if(confirm("User '"+$.trim(textNameUser)+"'  has Leads assigned to it in CRM. "+
                                        "If you delete the user then the leads will be included into the Lead Distribution queue. "+
                                        "Click Cancel to assign user's leads manually. "))
                            {
                                user_ids.push($(this).attr('id').substr(5));
                            } 
                        }else{
                            user_ids.push($(this).attr('id').substr(5));
                        }
                    });
                     
                    if(user_ids!=''){
                        $.ajax({
                            url		: users_ajax_link,
                            data	: {oper:'delete',user_ids:user_ids},
                            type	: "POST",
                            dataType: 'json',
                            success	: function(result){
                                statusRemove();
                                if (result['success'])
                                {
                                    jalert(result['message'], null, duration);
                                    $("#user_tree").jstree('deselect_node',($("#user_tree").jstree('get_selected')));
                                    $("#user_tree").jstree('refresh');
                                    $("#users").jstree('refresh');
                                }
                                else
                                {
                                    jalert(result['message'], 2, duration);
                                }
                            },
                            error: function(){
                                statusRemove();
                            }
                        });
                    }else{
                        statusRemove();
                        jalert("Select user which is availble for deleting", 1, duration);
                    }
                }
            }
            else
            {
                jalert("Select user first", 1, duration);
            }
        }
        $.jstree._themes = '/css/jstree-1.0/themes/';
        $("#user_tree").jstree({
            plugins: [ "themes", "json_data", "ui", "crrm", "dnd", "search", "types"],
            core: {
                animation: 0
            },
            json_data: {
                ajax: {
                    url: users_ajax_link,
                    data: {oper: 'load_tree'}
                }
            },
            search: {
                case_insensitive: true
            },
            types: {                
                drag_copy: false,
                valid_children: ['root'],
                types:{
                    'default':{
                        deletable	: false,
                        renameable	: false,
                        max_depth       : 20                    }
                    ,'new':
                        {
                        deletable	: true,
                        draggable	: false
                    }
                    ,'root':{icon:{image:"/images/user_icons/role_7.png",position:"0px"}}
                    ,'role_0':{icon:{image:"/images/user_icons/role_0.png",position:"0px"}}
                    ,'role_1':{icon:{image:"/images/user_icons/role_1.png",position:"0px"}}
                    ,'role_3':{icon:{image:"/images/user_icons/role_3.png",position:"0px"}}
                    ,'role_5':{icon:{image:"/images/user_icons/role_5.png",position:"0px"}}
                    ,'role_7':{icon:{image:"/images/user_icons/role_7.png",position:"0px"}}
                    ,'role_10':{icon:{image:"/images/user_icons/role_10.png",position:"0px"}}
                    ,'role_12':{icon:{image:"/images/user_icons/role_12.png",position:"0px"}}
                    ,'role_15':{icon:{image:"/images/user_icons/role_15.png",position:"0px"}}
                }
            },
            ui:{
                select_multiple_modifier: "shift"
            }
        }).bind("dblclick.jstree",function(event){
            var user_id = $(event.target).closest('li').attr('id').substr(5);
            loadUser(user_id);
        }) .bind("click.jstree",function(event){
                var siteId=new Array();
                var buf;
                $("#sites_tree").find('li').each(function(i, element){
                    buf=$(element).attr('class');
                    $(element).attr('class',buf.replace("-checked","-unchecked"));
                });
                var user_id;
                $('#user_tree .jstree-clicked').each(function(i, element){
                   user_id=$(element).parent().attr('id').substr(5);
                });
                var buf;
                if (partnersEnabled){
                    for(var k in UserPartnerSite){
                        if(user_id==k)
                            for(var j in UserPartnerSite[k]){
                                var siteId=new Array();
                                $("#sites_tree").find('li').each(function(i, element){
                                    siteId[i]=$(element).attr('id').substr(5);
                                    if(UserPartnerSite[k][j].site_id==siteId[i]){
                                        buf=$(element).attr('class');
                                        $(element).attr('class',buf.replace("-unchecked","-checked"));
                                    }
                                });
                        }
                    }

                    if($(event.target).closest('li').attr('rel')=="role_10"){
                        $('#td_sites').show();
                        if (Partners_packages[user_id]){
                            $('#partner_def_package').val(Partners_packages[user_id]);
                        }else{
                            $('#partner_def_package').val('');
                        }
                    } else{
                        $('#td_sites').hide();
                    }
                }

            }).bind("move_node.jstree",function(event,data){
                        node = data.rslt.o[0];
            var parent = data.rslt.np[0];
            rollback = data.rlbk;
            var user_id = node.id.substr(5);
            var parent_id = data.rslt.np[0].id.substr(5);
            if (parent_id)
            {
                statusOpen('Updating user hierarchy..',0);
                $.ajax({
                    url		:users_ajax_link,
                    type	:'POST',
                    data	:{oper:'dragdrop',user_id:user_id,parent_id:parent_id},
                    success	:function(result){
                       $("#users").jstree('refresh');
                        if (result!='')
                        {
                            $.jstree.rollback(rollback);
                            jalert(result, 2, duration);//ERROR
                        }
                        statusRemove();
                    }
                });
            }
                    }).bind("search.jstree", function (e, data) {
            data.rslt.nodes.addClass('jstree-search');
        });

        $('#user_tree_add').click(function(){
            addUser();
        });
        $('#user_tree_delete').click(function(){
                deleteUser();
        });
        $('#user_tree_search').change(function(){
            searchChange($(this).val());
        });
        $("#user_tree_search").keyup(function(){
            searchChange($(this).val());
        });
        $("#user_tree_search").mouseup(function(){
            var val = $(this).val();
            $(this).attr('data-tmp-val', val);
            setTimeout(function(){
                var $field = $("#user_tree_search");
                var fieldTmpVal = $field.attr('data-tmp-val');
                $field.removeAttr('data-tmp-val');
                if (fieldTmpVal != $field.val()) {
                    $field.trigger("change");
                }
            }, 100);
        });
        $("#user_tree_search").mouseup(function(){
            var val = $(this).val();
            $(this).attr('data-tmp-val', val);
            setTimeout(function(){
                var $field = $("#user_tree_search");
                var fieldTmpVal = $field.attr('data-tmp-val');
                $field.removeAttr('data-tmp-val');
                if (fieldTmpVal != $field.val()) {
                    $field.trigger("change");
                }
            }, 100);
        });


        /*&lt;End&gt; User Tree Section*/


        function searchChangeSites(value){

            $("#sites_tree").find('.jstree-search_site').removeClass('jstree-search_site');
            if (value == ""){
                return;
            }
            $("#sites_tree").jstree('search',value);
        }

        if (partnersEnabled){
            $("#sites_tree").jstree({
                plugins: ["themes","json_data","checkbox","ui", "crrm", "dnd", "types", "search"],
                core: {
                      animation: 0
                  },
               "json_data":{"data":SiteLoad},
                  search: {
                      case_insensitive: true
                  },
                   checkbox: {

                       real_checkboxes: true,
                        two_state: true
                  },
                      types:{
                          drag_copy: false,
                          valid_children: ['root'],
                          types:{
                                  'default':{
                                          deletable	: false,
                                          renameable	: false
                                  },
                                  'new':{
                                  deletable	: true,
                                  draggable	: false
                                   }
                                }
                          }

              }).bind("search.jstree", function (e, data) {
                  data.rslt.nodes.addClass('jstree-search_site');
              });
        }


        $('#site_search').change(function(){
            searchChangeSites($('#site_search').val());
        });
        $("#site_search").keyup(function(){
            searchChangeSites($('#site_search').val());
        });
        $('#site_partner_save').click(function(){
            var user_id;
            $('#user_tree .jstree-clicked').each(function(i, element){
               user_id=$(element).parent().attr('id').substr(5);
            });
            if (partnersEnabled){   UserPartnerSite[user_id]=new Array();   }
             var result = new Array();
                $("#sites_tree .jstree-checked").each(function(i, element){
                    result[i] = $(element).attr('id').substr(5);
                    if (partnersEnabled){
                        UserPartnerSite[user_id][i] = new Array();
                        UserPartnerSite[user_id][i]['site_id']=result[i];
                    }
                });
                var partner_def_package=$('#partner_def_package').val();
                Partners_packages[user_id]=partner_def_package;
                statusOpen("Loading...",0);
                $.ajax({
                    url		:users_ajax_link,
                    type	:'POST',
                    data	:{oper:'save_partner_site',site_id:result,user_id:user_id,partner_def_package:partner_def_package},
                    success	:function(result){
                        statusRemove();
                            jalert('Data saved successfully!', null, duration);
                    }
                });
        });

        var user_data;
        var empty_user_data = {
            "user": {
                "id": 0,
                "autocheck_show_report": 0,
                "website_url": "",
                "premium_vehicles_amount": 0,
                "max_discount": "-1",
                "mark_down": "",
                "carfax_show_report": 0,
                "autocheck_cid": "",
                'active_until': '',
                "autocheck_pwd": "",
                "autocheck_sid": "",
                "carfax_id": "",
                "parent_id": '',
                "email": '',
                "position": '',
                "login": '',
                "password": '',
                "name": '',
                "role_id": 0,
                "active": '',
                "country_id": '',
                "state_id": '',
                "city_id": '',
                "zip": '',
                "address": '',
                "lot": '',
                "group": '',
                "phone": ['', '', ''],
                "toll_free_phone": ['', '', ''],
                "international_phone": '',
                "user_contact": '',
                "user_contact2": '',
                "user_comments": '',
                "user_brand": '',
                "priority": '',
                "paid": 0,
                'overlay_image': '/images/staff_no_photo.jpg',
                'overlay_image_settings': '1',
                'marketplace_buyer': 0,
                'marketplace_form_comments': 0,
                'marketplace_dealer_license_number': '',
                'marketplace_auction_access_id': '',
                'marketplace_company_name': '',
                'marketplace_representative_name': '',
                'marketplace_fax_number': '',
                'marketplace_tax_id': '',
                'marketplace_driver_license_number': '',
                'marketplace_surety_bond_number': '',
                'marketplace_amount': 0,
                'marketplace_period': 7,
                'marketplace_seller_notifications_email': '',
                'marketplace_buyer_notifications_email': ''
            },
            user_info: {
                "leads_email_plain": '',
                "leads_email_xml": '',
                'logo': '/images/staff_no_photo.jpg',
                'certified': '/images/staff_no_photo.jpg',
                'iscertified': 0,
                'override_cl_phone': '',
                'override_bp_phone': '',
                'override_eb_phone': '',
                'custom_override': '',
                'referer_url': '',
                'geoip_phones': {}
            }
        };

        empty_user_data.user_info.logo_mobile = '/images/staff_no_photo.jpg';
        empty_user_data.user_info.personal_photo = '/images/staff_no_photo.jpg';
        function setRolesState(_current)
        {
            if (_current == 3){
                $('#role_id').html($('#rolesFull').html());
            }else{
                $('#role_id').html($('#rolesNoPS').html());
            }
        }

        /*&lt;Start&gt; User Info Section*/
        function loadUser(user_id){//-----------------------------------------------------------------------(User Tree -&gt; User Info) External Interface



                  $('#user_editor').find(':text').val('').end()
                             .find(':checkbox').removeAttr('checked').end()
                             .find('select').val('')
            $('#list-promotion tbody').html("");
           $("#password").rules('remove','required');
            statusOpen("Loading User Information...",0);
            $.ajax({
                url:users_ajax_link,
                data:{oper:'load',user_id:user_id},
                type:'POST',
                dataType:'json',
                success: function(result){
                    statusRemove();
                    if (result) {
                         user_data = result;
                        $('#user_editor_tab10_content').html(result.vir);
                        /*Set checkbox Functional Inspection same as Vehicle Condition */
                        $('#vir_dms_condition').change(function(){
                            var checkValue = $(this).is(":checked");
                            $('#vir_dms_inspection').attr('checked',checkValue);
                        });
                                                if(result.promo_all) {
                            loadPromotion(result.promo_all);
                        }
                                                if (result.self) {
                            openEditor(2,function(){
                                $("#user_tree").jstree('deselect_node',($("#user_tree").jstree('get_selected')));
                                $("#user_tree").jstree('refresh');
                                $("#users").jstree('refresh');
                            });
                        } else {
                            openEditor(1,function(){
                                $("#user_tree").jstree('deselect_node',($("#user_tree").jstree('get_selected')));
                                $("#user_tree").jstree('refresh');
                                $("#users").jstree('refresh');
                            });
                        }
                                                if(result.auctions) {
                            AuctionLink.showAccountParams(result.auctions);
                        }
                                                /* save region data to global variable and render region list*/
                        regionFullList = result.user.regionFullList;
                        regionsSelected = {};
                        if ('object' === typeof(result.user.regionList)) {
                            var html = '&lt;option value="0"&gt;Select Region&lt;/option&gt;';
                            for (var key in result.user.regionList) {
                                if (result.user.regionList.hasOwnProperty(key)) {
                                    html += '&lt;option value="' + key + '"&gt;'
                                        + result.user.regionList[key]
                                        + '[' + key + ']'
                                        + '&lt;/option&gt;';
                                }
                            }
                            $('#region_select_list').html(html);
                        }
                    }
                },
                error: function(){
                    statusRemove();
                }
            });
        }




        /*&lt;End&gt; User Info Section*/

        /*&lt;Start&gt; User Editor Section*/
        function openEditor(mode,onSave,onClose,parentId){            
            if (mode == 1 || mode == 2) {
                if (!user_data.user.edit_state || user_data.user.state_id == "") {
                    $('#edit_button_state').hide();
                } else {
                    $('#edit_button_state').show();
                    $('#edit_state').val(user_data.user.edit_state_name);
                    $('#hidden_state_id').val(user_data.user.state_id);
                    $('#edit_custom_state_code').val(user_data.user.edit_state_code);
                    $('#edit_state').data('oldVal', user_data.user.edit_state_name);
                    $('#edit_custom_state_code').data('oldVal', user_data.user.edit_state_code);
                }
                if (!user_data.user.edit_city || user_data.user.city_id == "") {
                    $('#edit_button_city').hide();
                } else {
                    $('#edit_button_city').show();
                    $('#edit_city').val(user_data.user.edit_city_name);
                    $('#hidden_city_id').val(user_data.user.city_id);
                    $('#edit_city').data('oldVal', user_data.user.edit_city_name);
                }
            } 
            
            if (mode == 1)		//mode 0 = Add, 1 = Edit, 2 - Edit self
            {

                $('#login').attr('disabled','disabled');
                data = user_data;
                if (data.user.position) {
                    $('#position').val(data.user.position);
                }
                /* for Facebook user */
                if(data.user.auth_type == 1 ){
                    $('#password').attr('disabled','disabled');
                    $('#cpass').attr('disabled','disabled');
                    $('#name').attr('disabled','disabled');
                    $('#user_contact').attr('disabled','disabled');
                    $('#user_contact2').attr('disabled','disabled');
                }
                else{
                    $('#password').removeAttr('disabled');
                    $('#cpass').removeAttr('disabled');
                    $('#name').removeAttr('disabled');
                    $('#user_contact').removeAttr('disabled');
                    $('#user_contact2').removeAttr('disabled');
                }
                $(".child_update").show();
                $("#user_editor_tab4").show();
                $("#user_editor_tab6").show();
                $("#role_id").removeAttr('disabled');
                $("#active").show().prev().show();

                    $("#delegate").show().prev().show();
            }
            else if (mode == 2)
            {


                $('#login').attr('disabled','disabled');
                data = user_data;
                /* for Facebook user */

                if(data.user.auth_type == 1 ){
                    $('#password').attr('disabled','disabled');
                    $('#cpass').attr('disabled','disabled');
                    $('#name').attr('disabled','disabled');
                    $('#user_contact').attr('disabled','disabled');
                    $('#user_contact2').attr('disabled','disabled');
                }
                else{
                    $('#password').removeAttr('disabled');
                    $('#cpass').removeAttr('disabled');
                    $('#name').removeAttr('disabled');
                    $('#user_contact').removeAttr('disabled');
                    $('#user_contact2').removeAttr('disabled');
                }
                $(".child_update").hide();
                $("#user_editor_tab4").hide();
                $("#user_editor_tab6").hide();
                $("#role_id").attr('disabled','disabled');
                $("#active").hide().prev().hide();
                    $("#delegate").hide().prev().hide();
            }
            else if (mode == 0)
            {
                $('#user_editor_form input').removeAttr('disabled');
                $('#edit_button_city').hide();
                $('#edit_button_state').hide();
                var $overridePhonesTable = $('#override_phones_table');
                $overridePhonesTable.find('#wrap_select select').val('0');
                $overridePhonesTable.find('input[id ^= "override_"][id $= "phone"]').val('');
                $('#login').removeAttr('disabled');
                data = empty_user_data;

                data.user.parent_id = parentId;
                user_data = data;
                $(".child_update").hide();
                $("#active_child_update").removeAttr('checked');
                $("#access_child_update").removeAttr('checked');
                $("#user_editor_tab4").hide();
                $("#user_editor_tab6").hide();
                $("#role_id").removeAttr('disabled');
                $("#active").show().prev().show();
                setVirTemplateSettingsDefault();
                    $("#delegate").show().prev().show();
            }
            setUserEditorData(data);
            $("#user_editor").data('onSave',onSave);
            $("#user_editor").data('onClose',onClose);
            $("#user_editor_tab1").click();
            if($('#role_id').val()=='3'){
                $('#role_id').attr("disabled","true");
            }
            $("#user_editor").dialog('open');
        }
        function setUserEditorData(data){
            if (!data)
            {
                data = user_data;
            }
            if (!data){
                data = empty_user_data;
            }


            $("#user_editor").data('user_id',data.user.id);
            if (data.user.parent_id)
                $("#user_editor").data('parent_id',data.user.parent_id);

            var rp = $('#au_show, #ca_show');
            if(data.user.id == site_root){
                rp.find('option[value="0"]').remove();
                if(data.user.autocheck_show_report == 0){
                    data.user.autocheck_show_report = 1;
                }
                if(data.user.carfax_show_report == 0){
                    data.user.carfax_show_report = 1;
                }
            } else {
                if(!rp.find('option[value="0"]').length){
                    rp.prepend('&lt;option value="0"&gt;Default&lt;/option&gt;');
                }
            }

            //General
            $("#email").val(data.user.email);
            $("#position").val(data.user.position);
            $("#login").val(data.user.login);
            $("#password").val('');
            $("#cpass").val('');
            $("#name").val(data.user.name);
            $("#user_contact").val(data.user.user_contact);
            $("#user_contact2").val(data.user.user_contact2);
            setRolesState(data.user.role_id);
            $("#role_id").val(data.user.role_id);
            $('#international_phone').val(data.user.international_phone);
            $('#override_cl_phone').val(data.user.override_cl_phone);
            $('#override_bp_phone').val(data.user.override_bp_phone);
            $('#override_eb_phone').val(data.user.override_eb_phone);
            $('#active_until').val(data.user.active_until);
            $('#au_show').val(data.user.autocheck_show_report);
            $('#au_login').val(data.user.autocheck_cid);
             $('#au_key').val(data.user.autocheck_sid);
            $('#ca_show').val(data.user.carfax_show_report);
            $('#ca_login').val(data.user.carfax_id);
            pwd = ($.trim(data.user.autocheck_pwd)) ? true : false;
            $('#au_password').val('');
            setCustomOverridePhones(data.user.customer_override_phones);
            if (pwd) {
                $('#changePass').show();
                $('#au_password').hide();
                $('#au_password').val('')
            } else {
                $('#changePass').hide();
                $('#au_password').show();
            }
            if (data.user.active)
                $("#active").attr('checked','checked');
            else
                $("#active").removeAttr('checked');
                if (data.user.delegate)
                    $("#delegate").attr('checked','checked');
                else
                    $("#delegate").removeAttr('checked');
            //Address
            $("#country_id option").removeAttr('selected');
            $("#country_id option[value='"+data.user.country_id+"']").attr('selected','selected');
            $("#state_id").selectchain().setSelected(data.user.state_id);
            $("#city_id").selectchain().setSelected(data.user.city_id);
            $("#country_id").trigger('change');
            $("#zip").val(data.user.zip);
            $("#address").val(data.user.address);
            if ((typeof data.user.phone == 'object') &amp;&amp; (data.user.phone!=null))
            {
                $("#phone1").val(data.user.phone[0]);
                $("#phone2").val(data.user.phone[1]);
                $("#phone3").val(data.user.phone[2]);
            }
            if ((typeof data.user.toll_free_phone == 'object') &amp;&amp; (data.user.toll_free_phone!=null))
            {
                $("#toll_free_phone1").val(data.user.toll_free_phone[0]);
                $("#toll_free_phone2").val(data.user.toll_free_phone[1]);
                $("#toll_free_phone3").val(data.user.toll_free_phone[2]);
            }
            $("#leads_email_plain").val(data.user_info.leads_email_plain);
            $("#leads_email_xml").val(data.user_info.leads_email_xml);

            //Other
            $("#lot").val(data.user.lot);

            if (countryWithDemotoresId.indexOf(data.user.country_id) != -1) {
                $('.demotores_user_id').val(data.user.demotores_user_id);
                $('.demotoresBlock').show();
            } else {
                $('.demotoresBlock').hide();
            }
            $("#website_url").val(data.user.website_url);
            $("#premium_vehicles_amount").val(data.user.premium_vehicles_amount);
            $("#max_discount").val((data.user.max_discount==-1)?"":data.user.max_discount);
            $("#user_brand").val(data.user.user_brand);
            $("#group").val(data.user.group);
            $("#user_comments").val(data.user.user_comments);
            $("#priority").val(data.user.priority);
            $("#paid").val(data.user.paid);
            $('#mark_down').val((data.user.mark_down==0)?"":data.user.mark_down);
            var logo = data.user_info.logo!='null' &amp;&amp; data.user_info.logo!='' ? data.user_info.logo: '/images/staff_no_photo.jpg';
            var logo_mobile = data.user_info.logo_mobile!='null' &amp;&amp; data.user_info.logo_mobile!='' ? data.user_info.logo_mobile: '/images/staff_no_photo.jpg';
            var personal_photo = data.user_info.personal_photo!='null' &amp;&amp; data.user_info.personal_photo!='' ? data.user_info.personal_photo: '/images/staff_no_photo.jpg';
            var  certified = data.user_info.certified!='null' &amp;&amp; data.user_info.certified!=''? data.user_info.certified: '/images/staff_no_photo.jpg';
            var overlay = data.user.overlay_image !='null' &amp;&amp; data.user.overlay_image !=''?data.user.overlay_image: '/images/staff_no_photo.jpg';
            $('#logoImg').attr('src', logo);
            $('#logoMobileImg').attr('src', logo_mobile);
            $('#personalPhotoImg').attr('src', personal_photo);
            $('#certifiedImg').attr('src', certified);
            $('#overlayImg').attr('src', overlay);
            $('#overlay_image_settings').val(data.user.overlay_image_settings);
            $('input[name=iscertified]').attr('checked', data.user_info.iscertified);
            $("#marketplace_buyer").val(data.user.marketplace_buyer);
            $("#marketplace_form_comments").val(data.user.marketplace_form_comments);
            $("#marketplace_dealer_license_number").val(data.user.marketplace_dealer_license_number);
            $("#marketplace_auction_access_id").val(data.user.marketplace_auction_access_id);
            $("#marketplace_company_name").val(data.user.marketplace_company_name);
            $("#marketplace_representative_name").val(data.user.marketplace_representative_name);
            $("#marketplace_fax_number").val(data.user.marketplace_fax_number);
            $("#marketplace_tax_id").val(data.user.marketplace_tax_id);
            $("#marketplace_amount").val(data.user.marketplace_amount);
            $("#marketplace_period").val(data.user.marketplace_period);
            $("#marketplace_outbound_notification_url").val(data.user.marketplace_outbound_notification_url);
            $("a.marketplace_outbound_notification_url")
                .text((data.user.marketplace_outbound_notification_url)
                        ? data.user.marketplace_outbound_notification_url
                        : 'Click here to add an end-point URL'
                );
            $("#marketplace_seller_notifications_email").val(data.user.marketplace_seller_notifications_email);
            $("#marketplace_buyer_notifications_email").val(data.user.marketplace_buyer_notifications_email);
            $("#marketplace_driver_license_number").val(data.user.marketplace_driver_license_number);
            $("#marketplace_surety_bond_number").val(data.user.marketplace_surety_bond_number);

            // marketplace attachments
            var userUploads = data.user_uploads;

            var uploads = [
                'dealer_driver_license',
                'bond_certificate',
                'state_dealer_license',
                'registration_form_pdf'
            ];

            $.each(uploads, function(index, uploadName) {
                var $wrapper = $('.user_attachment[data-type="' + uploadName + '"]');
                var uploadData = (userUploads) ? userUploads[uploadName] : false;

                if (uploadData) {
                    $wrapper.find('.download_file, .delete_file').show();
                    $wrapper.find('.upload_file').hide();
                    $wrapper.find('.file_name').text(uploadData.original_file_name);
                } else {
                    $wrapper.find('.download_file, .delete_file').hide();
                    $wrapper.find('.upload_file').show();
                    $wrapper.find('.file_name').text('-');

                    /* hide in "Add User" dialog */
                    if (!data.user.id) {
                        $wrapper.find('.upload_file').hide();
                    }
                }
            });

            setGeoIpPhones(data.user_info.geoip_phones);

     if (isNaN(parseInt(data.user.livehelpdep))){

     }else{
         if($('#lh_dep')){
         //jalert(data.user.livehelpdep);
            var livehelpdep=data.user.livehelpdep;
            if (livehelpdep.indexOf('||')){
                livehelpdep=livehelpdep.split('||');
               $('#lh_dep').val(livehelpdep);
            }else{
                $('#lh_dep').val(livehelpdep);
            }
         }
     }
            //jalert(data.user.livehelpdep);
            //Access
            if (data.resources)
            {
                for (group_key in data.resources)
                {
                    group_arr = data.resources[group_key];
                    for (i = 0;i &lt; group_arr.length;i++)
                    {
                        if (group_arr[i].privelege &gt; 0)
                            $("#"+group_arr[i].resource).attr('checked','checked');
                        else
                            $("#"+group_arr[i].resource).removeAttr('checked');
                    }
                }
            }
            else
            {
                $('#user_editor_access_rights input:checkbox').removeAttr('checked');
            }

            $('.block').hide();
            $('.go').attr('src','/images/arrow_right.png');

            if(data.qr_fusing) {

                if(data.qr_fusing.is_active){
                    $('#chb_qr_is_active').attr('checked','checked');
                }
                else {
                    $('#chb_qr_is_active').removeAttr('checked');
                }
                $("#inp_qr_min_h").val(data.qr_fusing.min_fusing_h);
                $("#select_qr_url_type").val(data.qr_fusing.url_type);
                $("#select_qr_work_mode").val(data.qr_fusing.work_mode);
                $("#select_qr_horizontal_alignment").val(data.qr_fusing.align_hor);
                $("#select_qr_vertical_alignment").val(data.qr_fusing.align_ver);
                $("#select_qr_border_width").val(data.qr_fusing.border_width);
                $("#select_qr_border_color").val(data.qr_fusing.border_color);
                $("#select_qr_margin").val(data.qr_fusing.margin);
                $("#select_qr_padding").val(data.qr_fusing.padding);
                $("#select_qr_background_color").val(data.qr_fusing.background_color);
                $("#select_qr_foreground_color").val(data.qr_fusing.foreground_color);
                $("#inp_qr_range_setting").val(data.qr_fusing.range_settings);
            }
        }
        function getUserEditorData() {
            var data = {resources:{},user:{},user_info:{},promotion:{},qr_fusing:{}};

            data.user_id = $("#user_editor").data('user_id');
            if ($("#user_editor").data('parent_id'))
                data.user.parent_id = $("#user_editor").data('parent_id');



             data.promotion=GetDatapromotion();




        $('#list-promotion tbody').html("");

            //General
            data.user.email = $("#email").val();
            data.user.login = $("#login").val();
            data.user.password = $("#password").val();
            data.user.name = $("#name").val();
            data.user.position = $("#position").val();
            data.user.user_contact = $("#user_contact").val();
            data.user.user_contact2 = $("#user_contact2").val();
            data.user.role_id = $("#role_id").val();
            data.user.active = $("#active:checked").length;
            data.user.mark_down = ($('#mark_down').val().trim()=='')?0:$('#mark_down').val();
            data.user.active_until = $('#active_until').val();

            data.user.carfax_show_report = $('#ca_show').val();
            data.user.carfax_id = $('#ca_login').val();

            data.user.autocheck_show_report = $('#au_show').val();
            data.user.autocheck_cid = $('#au_login').val();
            data.user.autocheck_sid = $('#au_key').val();
            data.user.website_url = $('#website_url').val();
            data.user.premium_vehicles_amount = $('#premium_vehicles_amount').val();
            data.user.demotores_user_id=$('#demotores_user_id').val();
            var maxDiscount = $('#max_discount').val();
            if ($.trim($('#au_password').val()) === '' &amp;&amp; pwd &amp;&amp; $('#au_password').css('display') === 'none') {
               data.user.autocheck_pwd = pwd;
            } else {
                data.user.autocheck_pwd = $.trim($('#au_password').val());
            }
            if(maxDiscount.trim() == ""){
               data.user.max_discount = -1;
            }else{
               data.user.max_discount = maxDiscount;
            }

                data.user.delegate = $("#delegate:checked").length;
            data.active_child_update = $("#active_child_update:checked").length;
            data.user_info.geoip_phones = getGeoIpPhones();
            //Address
            data.user.country_id = $("#country_id").val();
            data.user.state_id = $("#state_id").val();
            data.user.city_id = $("#city_id").val();
            data.user.zip = $("#zip").val();
            data.user.address = $("#address").val();
            data.user.phone = [$("#phone1").val(),$("#phone2").val(),$("#phone3").val()];
            data.user.toll_free_phone = [$("#toll_free_phone1").val(),$("#toll_free_phone2").val(),$("#toll_free_phone3").val()];
            data.user.international_phone = $('#international_phone').val();
            data.user_info.leads_email_plain = $("#leads_email_plain").val();
            data.user_info.leads_email_xml = $("#leads_email_xml").val();
            data.user.override_bp_phone = $('#override_bp_phone').val();
            data.user.override_cl_phone = $('#override_cl_phone').val();
            data.user.override_eb_phone = $('#override_eb_phone').val();
            data.user.custom_overrite   = setCustomOverridePhonesForOut();
            //Other
            data.user.lot = $("#lot").val();
            data.user.user_brand = $("#user_brand").val();
            data.user.group = $("#group").val();
            data.user.user_comments = $("#user_comments").val();
            data.user.priority = $("#priority").val();
            data.user.paid = $("#paid").val();

            data.user_info.logo             = $('#logoImg').attr('src')!= '/images/staff_no_photo.jpg'?$('#logoImg').attr('src'):null;
            data.user_info.logo_mobile      = $('#logoMobileImg').attr('src')!= '/images/staff_no_photo.jpg'?$('#logoMobileImg').attr('src'):null;
            data.user_info.personal_photo   = $('#personalPhotoImg').attr('src')!= '/images/staff_no_photo.jpg'?$('#personalPhotoImg').attr('src'):null;
            data.user.overlay_image         = $('#overlayImg').attr('src')!= '/images/staff_no_photo.jpg'?$('#overlayImg').attr('src'):null;
            data.user.overlay_image_settings= $('#overlay_image_settings').val();
            data.user_info.certified        = $('#certifiedImg').attr('src')!= '/images/staff_no_photo.jpg'?$('#certifiedImg').attr('src'):null;
            data.user_info.iscertified      = $('input[name=iscertified]').is(':checked')?1:0;
            if ($('#lh_dep'))
            data.user.livehelpdep=$('#lh_dep').val();
            //Access
            if (data.user_id)	//If Edit mode, not an Add
            {
                $("#user_editor_access_rights div.mod_Access").each(function(){
                    group_key = $.trim($(this).find('div.access_group span').text()).toLowerCase().replace(new RegExp('[ ()]', 'g'), '_');
                    data.resources[group_key] = [];
                    for (i = 0;i &lt; $(this).find('input:checkbox').length;i++)
                    {
                        input = $(this).find('input:checkbox')[i];
                        data.resources[group_key][i] = {resource:input.id,privelege:((input.checked)?1:0)};
                    }
                });
                data.access_child_update = $("#access_child_update:checked").length;
            }

            //QR Fusing
            data.qr_fusing.is_active = $('#chb_qr_is_active').is(':checked');
            data.qr_fusing.min_fusing_h = $("#inp_qr_min_h").val();
            data.qr_fusing.url_type = $("#select_qr_url_type").val();
            data.qr_fusing.work_mode = $("#select_qr_work_mode").val();
            data.qr_fusing.align_hor = $("#select_qr_horizontal_alignment").val();
            data.qr_fusing.align_ver = $("#select_qr_vertical_alignment").val();
            data.qr_fusing.border_width = $("#select_qr_border_width").val();
            data.qr_fusing.border_color = $("#select_qr_border_color").val();
            data.qr_fusing.margin = $("#select_qr_margin").val();
            data.qr_fusing.padding = $("#select_qr_padding").val();
            data.qr_fusing.background_color = $("#select_qr_background_color").val();
            data.qr_fusing.foreground_color = $("#select_qr_foreground_color").val();
            data.qr_fusing.range_settings = $("#inp_qr_range_setting").val();

            data.user.marketplace_buyer = $("#marketplace_buyer").val();
            data.user.marketplace_form_comments = $("#marketplace_form_comments").val();
            data.user.marketplace_dealer_license_number = $("#marketplace_dealer_license_number").val();
            data.user.marketplace_auction_access_id = $("#marketplace_auction_access_id").val();
            data.user.marketplace_company_name = $("#marketplace_company_name").val();
            data.user.marketplace_representative_name = $("#marketplace_representative_name").val();
            data.user.marketplace_fax_number = $("#marketplace_fax_number").val();
            data.user.marketplace_tax_id = $("#marketplace_tax_id").val();
            data.user.marketplace_amount = $("#marketplace_amount").val();
            data.user.marketplace_period = $("#marketplace_period").val();
            data.user.marketplace_outbound_notification_url = $("#marketplace_outbound_notification_url").val();
            data.user.marketplace_seller_notifications_email = $("#marketplace_seller_notifications_email").val();
            data.user.marketplace_buyer_notifications_email = $("#marketplace_buyer_notifications_email").val();
            data.user.marketplace_driver_license_number = $("#marketplace_driver_license_number").val();
            data.user.marketplace_surety_bond_number = $("#marketplace_surety_bond_number").val();

            return data;
        }
        function saveUserEditor(callback){
           /* if($('#lh_dep')){
                var lh_dep=$('#lh_dep').val();
            // jalert(lh_dep);
                if(lh_dep!=''){
                    if ($('#crm_livehelp')){
                        $('#crm_livehelp').attr('checked','checked');
                    }
                }else{
                   // jalert(lh_dep);
                    if ($('#crm_livehelp')){
                        $('#crm_livehelp').removeAttr('checked');
                    }
                }
            }*/
            data = getUserEditorData();
            data.oper = 'save';

            statusOpen("Saving User Information...",0);
            $.ajax({
                url:users_ajax_link,
                data:data,
                type:'POST',
                mimeType:"multipart/form-data",
                success: function(result){
                    statusRemove();
                    if ($.trim($('#au_password').val()) !== '') {
                        $('#changePass').show();
                        $('#au_password').hide();
                        data.user.autocheck_pwd = true;
                    }
                    $('#td_sites').hide();
                    if (result != '')
                    {
                        jalert(result, 2, duration);

                    }
                    else
                    {
                        user_data = data;
                    }
                    if (callback)
                        callback();



                },
                error: function(){
                    $('#td_sites').hide();
                    statusRemove();
                }
            });
        }
        function resetUserEditor(){
        $('#list-promotion tbody').html("");

        //$('#list-promotion').find("tbody tr[id]").remove();
         ///

            if (typeof loadPromotion === 'function') {
                loadPromotion(user_data.promo_all);
            }
             setUserEditorData();
        }


        //window.loadedCity      = false;
        //window.loadedState     = false;

        $('#country_id').bind('change', function(){
            if (countryWithDemotoresId.indexOf(parseInt($(this).val())) != -1) {
                $('.demotoresBlock').show();
            } else {
                $('.demotores_user_id').val('');
                $('.demotoresBlock').hide();
            }
        });

        $('#country_id').selectchain({
            target	: '#state_id',
            url		: users_ajax_link,
            data	: {oper:'selectchain',selectchain: 'country'},
            prepend	: {'':'Select Country'}
        }).reload();

        $('#state_id').selectchain({
            target	: '#city_id',
            url		: users_ajax_link,
            sources	: ['#country_id'],
            data	: {oper:'selectchain',selectchain: 'state'},
            prepend	: {'':'Select State'},
            onReload: function (){
                 window.loadedState = true;
            }
        });

        $('#city_id').selectchain({
            url		: users_ajax_link,
            sources	: ['#state_id'],
            data	: {oper:'selectchain',selectchain: 'city'},
            prepend	: {'':'Select City'},
            onReload: function (){
                 window.loadedCity = true;
            }
        });

        $("#user_editor").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            draggable: false,
            title: 'User Editor',
            //height: 400,
            width: 780,
            open: function() {
                //$('#user_editor_buttons').hide();
                window.loadedCity      = false;
                window.loadedState     = false;
            },
            close: function() {

                //for(var i=0; i &lt;  $("input[id^=phone], input[id^=toll_free_phone]").length;i++){

                       //  $('[for^='+$($("input[id^=phone], input[id^=toll_free_phone]")[i]).parent().attr("id")+']').parent().remove();
               // }


                $("#user_editor_form").validate().resetForm();

                onClose = $("#user_editor").data('onClose');
                if (onClose)
                {
                    onClose();

                }
                CustomOverridePhones = getCustomOverridePhones();
                $('tr[id^=tr_override_fone_]').remove();
                $('#referer_id').html('');
                $('#wraper_ref_id').hide();
                $('#wraper_ref_code').hide();
                counter = 1;
                if ($('#au_login').val() !== '') {
                    $('#changePass').show();
                    $('#au_password').hide();
                    
                }
                $("input[name^='phone']").attr('required', false);
                $("input[name^='toll_free_phone']").attr('required', false);
             }
        });

        $('#add_custom_city').dialog({
            autoOpen: false,
            modal: true,
            resizeable: false,
            draggable: false,
            width: 310,
            title: "Add Custom City"
        });
         $('#add_custom_state').dialog({
            autoOpen: false,
            modal: true,
            resizeable: false,
            draggable: false,
            width: 310,
            title: "Add Custom State"
        });
        $('#add_new_region').dialog({
            autoOpen: false,
            modal: true,
            resizeable: false,
            draggable: false,
            width: 780,
            title: "Add New Region"
        });
         $('#edit_custom_city').dialog({
            autoOpen: false,
            modal: true,
            resizeable: false,
            draggable: false,
            width: 310,
            title: "Edit Custom City"
        });
         $('#edit_custom_state').dialog({
            autoOpen: false,
            modal: true,
            resizeable: false,
            draggable: false,
            width: 310,
            title: "Edit Custom State"
        });
//////
        $('#city_id').change(function() {
            if ($('#user_editor_tab2_content').css('display') != 'none') {
                // lock the button for the duration of the operation
                $('#edit_button_city').data('loadingData', true);
                var city_id = $('#city_id').find("option:selected:first").val();
                $.ajax({
                    url     : users_ajax_link,
                    data    : {oper: 'editCity', city_id: city_id},
                    type    : "POST",
                    dataType: 'json',
                    success : function(result){
                        if(result.dealer_id != null &amp;&amp; result.dealer_id != ""){
                            $('#edit_city').val(result.name);
                            $('#edit_city').data('oldVal', result.name);
                            $('#hidden_city_id').val(city_id);
                            $('#edit_button_city').show();
                        }else{
                            $('#edit_button_city').hide();
                        }
                    },
                    complete: function() {
                        $('#edit_button_city').data('loadingData', false);
                    }    
                });
            }
        })
        $('#state_id').change(function() {
            if ($('#user_editor_tab2_content').css('display') != 'none') {
                $('#edit_button_state').data('loadingData', true);
                var state_id = $("#state_id").find("option:selected:first").val();
                $.ajax({
                    url: users_ajax_link,
                    data: {oper:'editState', state_id:state_id},
                    type: "POST",
                    dataType: 'json',
                    success: function(result) {
                        if(result.dealer_id != null &amp;&amp; result.dealer_id != "") {
                            $('#edit_state').val(result.name);
                            $('#edit_state').data('oldVal', result.name);
                            $('#hidden_state_id').val(state_id);
                            $('#edit_custom_state_code').val(result.code);
                              $('#edit_custom_state_code').data('oldVal',result.code);
                                $('#edit_button_state').show();
                            }else{
                                $('#edit_button_state').hide();
                            }
                    },
                    complete: function() {
                        $('#edit_button_state').data('loadingData', false);
                    }    
                });
            }
        })

        $('#add_button_state').click(function(){
              if($('#country_id').val()){
                  $('#add_custom_state').dialog('open');
                }else{
                    jalert("Need select Country", null, duration);
                }
        })
        $('#add_button_region').click(function () {
            $('#add_new_region_save').data('type', 'add');
            regionsSelected = {};
            loadStatesForCountry();
        })

        $('#edit_button_state').click(function() {
            if (
                $('#edit_button_state').data('loadingData')
                || $('#state_id').attr('disabled')
            ) {
                // blocking call when loading data
                jalert('Please wait...');
                return false;
            }
            if ($('#country_id').val()) {
                $('#edit_custom_state').dialog('open');
            } else {
                jalert("Need select Country");
            }
        })
         $('#add_button_city').click(function(){
            if ($('#state_id').attr('disabled')) {
                // blocking call when loading data
                jalert('Please wait...');
                return false;
            }
            if($('#state_id').val()){
                $('#add_custom_city').dialog('open');
                var state_name = $("#state_id").find("option:selected:first").text();
                $("#state_id_city").html(state_name);
            }else{
               jalert("Need select State", null, duration);
            }
        })
        $('#edit_button_city').click(function() {
            if (
                $('#edit_button_city').data('loadingData')
                || $('#city_id').attr('disabled')
                || $('#state_id').attr('disabled')
            ) {
                // blocking call when loading data
                jalert('Please wait...');
                return false;
            }
            if ($('#state_id').val()) {
                $('#edit_custom_city').dialog('open');
                var state_name = $("#state_id").find("option:selected:first").text();
                $("#edit_state_id_city").html(state_name);
            } else {
                jalert("Need select State", null, duration);
            }
        });

        $('.custom_editor_reset').click(function(){
             if($(this).attr("enterType") == 'city'){

                $('#add_custom_city').dialog('close');
            }else{
                $('#add_custom_state').dialog('close');
            }
        });

        $('.edit_custom_editor_reset').click(function(){
             if($(this).attr("enterType") == 'city'){

                $('#edit_custom_city').dialog('close');
            }else{
                $('#edit_custom_state').dialog('close');
            }
        });

         ///////// The result of editing custom state and city is being saved. //////////
         $('.edit_custom_editor_save').click(function(){
                if($(this).attr("enterType") == "city"){
                    var editNameCity = $('#edit_city');
                    if(editNameCity.data('oldVal') != editNameCity.val()){
                        var parent_id = $('#country_id').val();
                        var custom_city  = $.trim(editNameCity.val()).toUpperCase()
                        editNameCity.val(custom_city);
                        var state_id = $("#state_id").val();
                        var city_id = $('#hidden_city_id').val();

                        if(state_id){

                        ajaxCall({
                            msg: 'Saving City...',
                            params: {
                                oper: 'editLookup',
                                lparam: 'city',
                                city_id: city_id,
                                value: custom_city ,
                                parent_id: state_id
                            }
                        }, function(resp){
                            if ($.isPlainObject(resp)) {
                                if(resp.answer == 1){
                                    var cityId = $('#hidden_city_id').val();
                                    var cityName = editNameCity.val();
                                    // remove editable option
                                    $('#city_id').find('option[value="' + cityId + '"]').text(cityName);
                                    editNameCity.data('oldVal', cityName);
                                    $('#custom_city').val('');
                                    $('#edit_custom_city').dialog('close');
                                    jalert('The item was successfully updated', null, duration);
                                } else if (resp.answer == 'exists') {
                                    jalert('This City already exists', null, duration);
                                } else {
                                    jalert('An error occurred', null, duration);
                                }
                            } else {
                                jalert('An error occurred', null, duration);
                            }
                        });
                    }else{
                        jalert('Please select state for saving city');
                    }
                    }else{
                        $('#edit_custom_city').dialog('close');
                        jalert('Changed nothing', null, duration);
                    }
            }
            if($(this).attr("enterType") == "state"){
                var editNameState = $('#edit_state');
                var editStateCode = $('#edit_custom_state_code');
                if(editNameState.data('oldVal') != editNameState.val() || editStateCode.data('oldVal') != editStateCode.val()){
                    var parent_id = $('#country_id').val();
                    var custom_state = $.trim(editNameState.val()).toUpperCase();
                    editNameState.val(custom_state);
                    var custom_state_code = $.trim(editStateCode.val()).toUpperCase();
                    editStateCode.val(custom_state_code);
                    var state_id = $('#hidden_state_id').val();

                    if(parent_id &amp;&amp; custom_state){
                     ajaxCall({params:{
                                oper: 'editLookup',
                                lparam: 'state',
                                state_id: state_id,
                                value: custom_state,
                                svalue: custom_state_code,
                                parent_id: parent_id
                            }, msg: 'Saving State...'},
                        function(resp){
                            if ($.isPlainObject(resp)) {
                                if (resp.answer == 1) {
                                   $("#state_id option[value='"+$('#hidden_state_id').val()+"']").remove();
                                   $('#state_id').append('&lt;option value="'+$('#hidden_state_id').val()+'"&gt;'+editNameState.val()+'&lt;/option&gt;');
                                   $('#state_id').val($('#hidden_state_id').val());
                                   editNameState.data('oldVal',editNameState.val());
                                   editStateCode.data('oldVal',editStateCode.val());
                                   $('#custom_state_code').val('');
                                   $('#custom_state').val('')
                                   $('#edit_custom_state').dialog('close');
                                   jalert('The item was successfully updated', null, duration);
                                } else if (resp.answer == 'exists') {
                                    var editableValues = ((resp.answer_add == 'state_code') ? 'State Code' : 'State');
                                    jalert('This ' + editableValues + ' already exists', null, duration);
                                } else {
                                   jalert('An error occurred', null, duration)
                                }

                            } else {
                                jalert('An error occurred', null, duration);
                            }
                        });

                    }
                }else{
                    jalert('Changed nothing', null, duration);
                    $('#edit_custom_state').dialog('close');
                }
            }
         });

        $('.custom_editor_save').click(function(){

                if($(this).attr("enterType") == "city"){
                    var parent_id = $('#country_id').val();
                    var custom_city  = $.trim($('#custom_city').val()).toUpperCase()
                    var state_id = $("#state_id").val();

                    if(state_id){

                    ajaxCall({
                        msg: 'Saving City...',
                        params: {
                            oper: 'saveLookup',
                            lparam: 'city',
                            value: custom_city ,
                            parent_id: state_id
                        }
                    }, function(resp){
                        if(resp.html){                           
                            $('#edit_city').val($('#custom_city').val().toUpperCase());
                            $('#edit_city').data('oldVal',$('#custom_city').val().toUpperCase());
                            $('#hidden_city_id').val(resp.id);
                            $('#custom_city').val('');
                            $('#add_custom_city').dialog('close');
                            if(resp.answer=='exists'){
                                jalert('This City already exists and it has been selected', null, duration);
                            }else{
                                $('#city_id').append(resp.html);                               
                                 $('#edit_button_city').show();
                                jalert('New City saved successfully', null, duration);
                            }
                            $('#city_id').val(resp.id);        
                        } else {
                            jalert('An error occurred', null, duration);
                        }
                    });
                }else{
                    jalert('Please select state for saving city', null, duration);
                }
            }else{
                var parent_id = $('#country_id').val();
                var custom_state = $.trim($('#custom_state').val()).toUpperCase();
                var custom_state_code = $.trim($('#custom_state_code').val()).toUpperCase();

                if(parent_id &amp;&amp; custom_state){
                 ajaxCall({params:{
                            oper: 'saveLookup',
                            lparam: 'state',
                            value: custom_state,
                            svalue: custom_state_code,
                            parent_id: parent_id
                        }, msg: 'Saving State...'},
                    function(resp){
                        if ($.isPlainObject(resp)) {
                            if(resp.html){                                                         
                               $('#edit_state').val($('#custom_state').val().toUpperCase());
                               $('#edit_state').data('oldVal',$('#custom_state').val().toUpperCase());
                               $('#edit_custom_state_code').data('oldVal',$('#custom_state_code').val().toUpperCase());
                               $('#hidden_state_id').val(resp.id);
                               $('#edit_custom_state_code').val($('#custom_state_code').val().toUpperCase());
                               $('#state_id').val(resp.id);
                               $('#custom_state_code').val('');
                               $('#custom_state').val('')
                               $('#add_custom_state').dialog('close');                               
                               $('#edit_city').empty();
                               $('#edit_button_city').hide();
                                if(resp.answer=='exists'){
                                    var editableValues = ((resp.answer_add == 'state_code') ? 'State Code' : 'State');
                                    jalert('This ' + editableValues + ' already exists and it has been selected', null, duration);
                                   
                                }else{
                                    $('#state_id').append(resp.html);
                                    $('#state_id').val(resp.id);//                                
                                    $('#edit_button_state').show();
                                    jalert('New State saved successfully', null, duration);
                                }  
                                 $('#state_id').change();
                            }else{
                               jalert('An error occurred', null, duration)
                            }

                        } else {
                            jalert('An error occurred', null, duration);
                        }
                    });

                }
            }
        });










        $("#user_editor_save").click(function(){
            $('.error:first').focus();
            if (!$('#override_phones_table_form').valid()) {
                $('#user_editor_tab3').click();
                $('#user_editor_tab3_content').find('#_tab2').click();
                $('#override_phones_table_form').find('input[name^="custom"].error:first').focus();
                return false;
            }
            var override_phones_tr = $('tr[id^=tr_override_fone]');
            var cur_option;
            for (var i = 0; i &lt; override_phones_tr.length; i++) {
                cur_option = $(override_phones_tr[i]).find('select :selected')[0];
                if ($(cur_option).val() == 'custom') {
                    var override_phone = $($(override_phones_tr[i]).find('input[id^=custom_override]')[0]).val();
                    var referer_url   = $($(override_phones_tr[i]).find('input[id^=referer_url]')[0]).val();
                    if (override_phone !== '' &amp;&amp; referer_url === '') {
                        jalert('Please, specify referral url', null, duration);
                        return false;
                    }
                }
            }
             var carfax_flag = $('input[name="carfax_login"]', '#auto_reports_form').valid(),
                 autocheck_flag = validateAutocheck();

                if (!flagChackValidatePhone &amp;&amp; (!$('#phoneF').valid() || !$('#phoneTF').valid())) {

                         $('#user_editor_tab2').trigger('click');
                }

                if(!carfax_flag){
                      $('#user_editor_tab3').trigger('click');
                      $('[id^=ax_tab]').hide();
                      $('#ax_tab4').show();
                }

                var qrRangeSettingValue = $('#inp_qr_range_setting').val();
                var isqrOrderSettingValid = true;
                if(qrRangeSettingValue.length&gt;0) {
                    if(/^(\d{1,3}[\d,-]*\d{0,3})$/.test(qrRangeSettingValue)) {
                        isqrOrderSettingValid = true;
                    }
                    else {
                        isqrOrderSettingValid = false;
                    }
                }

                var RangeSettingValue = $('#overlay_image_settings').val();
                var isOrderSettingValid = true;
                if(RangeSettingValue.length&gt;0) {
                    var RangeValue=RangeSettingValue.split(',');
                    for(var i in RangeValue) {
                         RangeValueArray = RangeValue[i].split('-');
                         var newRangeValue=RangeValueArray;
                                if(RangeValueArray.join('')!=newRangeValue.sort().join('')){
                                    isOrderSettingValid = false;
                                    break;
                                }
                    }
                    if(/^(\d{1,3}(-\d{1,3})?)(,\d{1,3}(-\d{1,3})?)*$/.test(RangeSettingValue)&amp;&amp;isOrderSettingValid) {
                        isOrderSettingValid = true;
                    }
                    else {
                        isOrderSettingValid = false;
                    }
                }else{
                    isOrderSettingValid = false;
                }

                if (
                    carfax_flag
                    &amp;&amp; autocheck_flag
                    &amp;&amp; $("#user_editor_form").valid()
                    &amp;&amp; $("#zipForm").valid()
                    &amp;&amp; (flagChackValidatePhone || !flagChackValidatePhone &amp;&amp; $('#phoneF').valid() &amp;&amp; $('#phoneTF').valid())
                    &amp;&amp; isqrOrderSettingValid
                    &amp;&amp; isOrderSettingValid
                ) {
                    saveUserEditor($("#user_editor").data('onSave'));

                    $("#user_editor").data('onClose', 0);
                    $("#user_editor").dialog('close');
                } else {
                    var errorShown = false;
                    if ($("#user_editor_tabs").find('input.error').length) {
                        var error_elem = $("#user_editor_tabs").find('input.error').eq(0);
                        if (error_elem.length &amp;&amp; !error_elem.is(':visible')) {
                            var tab_id = error_elem.parents("[id^='user_editor_tab']").eq(0).attr('id').substr(0,'user_editor_tab'.length+1);
                            $('#'+tab_id).trigger('click');
                            errorShown = true;
                        }
                    }

                    if(!isqrOrderSettingValid) {
                        $("#user_editor_tab5").click();

                        var container = $('#user_editor_tab5_content'),
                        scrollTo = $('#tr_qr_fusing');

                        container.scrollTop(
                            scrollTo.offset().top - container.offset().top + container.scrollTop()
                        );

                        $('#inp_qr_range_setting').focus();

                        jalert('"Order setting" for QR Fusing has wrong format. Correct format is "1,2,3" or "2-8"','warning');
                    }
                    if(!isOrderSettingValid) {
                        $("#user_editor_tab5").click();

                        var container = $('#user_editor_tab5_content'),
                        scrollTo = $('#tr_overlay');

                        container.scrollTop(
                            scrollTo.offset().top - container.offset().top + container.scrollTop()
                        );

                        $('#overlay_image_settings').focus();

                        jalert('"Range settings" for Overlay is empty or has wrong format','warning', duration);
                    }
                }
        });


        $("#user_editor_reset").click(function(){
            $("#user_editor_form").validate().resetForm();
            resetUserEditor();
        });
        $("span[id^='user_editor_tab']").click(function(){
            $("span[id^='user_editor_tab']").removeClass('gl_active');
            $(this).addClass('gl_active');
            $("div#user_editor_tabs &gt; div").hide();
            $("div#"+this.id+"_content").show();
        });
        $("#user_editor_tab2").click(function(){
            $("#zipForm").valid();
            if (!flagChackValidatePhone) {
                $('#phoneF').valid();
                $('#phoneTF').valid();
            }
            if (parseInt($("#region_select_list").val())) {
                $('#edit_button_region').css('display', 'inline-block');
                $('#delete_button_region').css('display', 'inline-block');
            } else {
                $('#edit_button_region').hide();
                $('#delete_button_region').hide();
            }
        });

        $("input[name^='phone']").blur(function(){
            $("input[name^='phone']").each(function(){
                if(this.value){
                    $("input[name^='phone']").attr('required', true);
                    return false;
                }else{
                    $("input[name^='phone']").attr('required', false);
                }
            });
            $('#phoneF').valid();
        });
        $("input[name^='toll_free_phone']").blur(function(){
            $("input[name^='toll_free_phone']").each(function(){
                if(this.value){
                    $("input[name^='toll_free_phone']").attr('required', true);
                    return false;
                }else{
                    $("input[name^='toll_free_phone']").attr('required', false);
                }
            });
            $('#phoneTF').valid();
        });


         if(!flagChackValidatePhone){
            $("#phoneF").validate({
                    submitHandler: function(){return false;},
                    rules:{
                                 phone1:{
                                   number_char:true
                                },
                                phone2:{
                                    number_char:true
                                },
                                phone3:{
                                    number_char:true
                                }
                    }/*,

                      messages:{
                           phone1:"1",
                           phone2:"2",
                           phone3:"3"
                      },*/
                        ,errorPlacement: function(error, element) {
                          var er = element.attr("name");
                          error.appendTo('.error_'+er);
                        }

                });

               $("#phoneTF").validate({
                    submitHandler: function(){return false;},
                    rules:{
                                 toll_free_phone1:{
                                   number_char:true
                                },
                                toll_free_phone2:{
                                    number_char:true
                                },
                                toll_free_phone3:{
                                    number_char:true
                                }
                    }/*,

                      messages:{
                           phone1:"1",
                           phone2:"2",
                           phone3:"3"
                      },*/
                        ,errorPlacement: function(error, element) {
                          var er = element.attr("name");
                          error.appendTo('.error_'+er);
                        }

            });
            
            $("#phoneF, #phoneTF").find('input').bind('input', function(){
                var regexp = /[^a-zA-Z0-9]/gi;
                var value = $(this).val();
                value = value.replace(regexp, '');
                $(this).val(value);
            });
        }
        
        $("#zipForm").validate({
		submitHandler: function(){return false;},
		rules:{

			zip: {
				digits: true,
				minlength: lenMin,
				maxlength: lenMax
			}
		}
	});
        
        
        $.validator.addMethod('custom_override_fill',
            function (value, element) {
                var rezOk = false;
                if ((value !== '' &amp;&amp; value !== '0') || $(element).attr('is_delete') === "true") {
                    rezOk = true;
                } else {
                    if ($.inArray(element.id, ['custom_override', 'referer_sel']) !== -1) {
                        var relatedSelector = '';
                        switch (element.id) {
                            case 'custom_override':
                              relatedSelector = '#referer_sel';
                              break;
                            case 'referer_sel':
                              relatedSelector = '#custom_override';
                              break;
                        }
                        $linkRelated = $(relatedSelector);
                        if ($.inArray($linkRelated.val(),  ['', '0']) !== -1) {
                            rezOk = true;
                        }
                    }
                }
                return rezOk;
            },
            'This field is required'
        );

        $('#override_phones_table_form').validate({
            onfocusout: false,
            rules: { 
                custom_1: {
                    custom_override_fill: true
                },
                referer_sel: {
                    custom_override_fill: true
                }
            }
        });    
            
               if(flagZipcodeCharOrNumber){
                        $('#zip').rules('remove');
                         $('#zip').rules('add', {
                             zip_char: true,
                             minlength: lenMin,
                             maxlength: lenMax,
                         });
                        $('input[name=zip]').keyup(function(event){

                             ForInputToUppercese(this, event);


                        });
                }

        $("#role_id").change(function(){
            if ($('#user_editor_tab4').is(':visible'))
            {
                var id = $(this).val();
                var resources = roles_resources[id];
                $('#user_editor_access_rights').find('input:checkbox').removeAttr('checked');
                if (resources)
                {
                    $('#user_editor_access_rights').find('input:checkbox').each(function(){
                        for (i in resources)
                        {
                            if (resources[i] == $(this).attr('id'))
                                $(this).attr('checked','checked');
                        }
                    });
                }
            }
        });
        /*&lt;End&gt; User Editor Section*/

        function initUserEditorMarketplaceTab() {
            $('.user_attachment .download_file').click(function() {
                var userId = user_data.user.id;
                var type = $(this).closest('.user_attachment').attr('data-type');
                var url = users_ajax_link + '?oper=marketplace_download_attachment&amp;user_id=' + userId + '&amp;type=' + type;

                window.location.assign(url);
            });

            $('.user_attachment .delete_file').click(function() {
                var $wrapper = $(this).closest('.user_attachment');
                var userId = user_data.user.id;
                var type = $wrapper.attr('data-type');
                var fileName = $wrapper.find('.file_name').text();

                if (confirm('Are you sure you want to remove attachment "' + fileName + '"?')) {
                    statusOpen('Removing...', 0);

                    $.ajax({
                        url: users_ajax_link,
                        type: 'post',
                        dataType: 'json',
                        data: {
                            oper: 'marketplace_remove_attachment',
                            user_id: userId,
                            type: type
                        },
                        success: function (data) {
                            if (data['success']) {
                                $wrapper.find('.file_name').text('-');
                                $wrapper.find('.download_file, .delete_file').hide();
                                $wrapper.find('.upload_file').show();

                                jalert('Complete!');
                            } else {
                                jalert('Some error occurred!', 'error');
                            }
                        },
                        complete: function () {
                            statusRemove();
                        }
                    });
                }
            });

            // attachments
            var $targets = $('.user_attachment input[type="file"]');

            $targets.change(function() {
                if (1 === this.files.length) {
                    var $wrapper = $(this).closest('.user_attachment');
                    var $form = $(this).closest('form');
                    var attachmentType = $(this).closest('.user_attachment').attr('data-type');
                    var file = this.files[0];

                    // validate
                    var allowedFileTypes = ['html', 'pdf', 'jpg', 'jpeg', 'png'];
                    var fileName = String($(this).val()).replace(/^.*[\\\/]/i, '');
                    var fileType = String(fileName.split('.').pop()).toLowerCase();
                    var fileSize = file.size;
                    var errorMsg = '';

                    if (!fileType || -1 === allowedFileTypes.indexOf(fileType)) {
                        errorMsg = 'Invalid file type';
                    } else if (String(fileName).length &gt; 50) {
                        errorMsg = 'File name is too long';
                    } else if (fileSize &gt; 1024 * 1024 * 10) { /* 10MB */
                        errorMsg = 'File is larger than 10MB';
                    }

                    if (errorMsg) {
                        jalert(errorMsg, 'error');
                    } else {
                        statusOpen('Uploading...', 0);

                        $form.ajaxForm({
                            url: users_ajax_link + '?oper=marketplace_upload_attachment&amp;user_id=' + user_data.user.id + '&amp;type=' + attachmentType,
                            dataType: 'json',
                            type: 'post',
                            success: function(result) {
                                if (result) {
                                    if (result.success) {
                                        $wrapper.find('.file_name').text(result.upload.original_file_name);
                                        $wrapper.find('.upload_file').hide();
                                        $wrapper.find('.download_file, .delete_file').show();

                                        jalert('Complete!');
                                    } else {
                                        var errorMsg = result.error || 'Some error occurred';
                                        jalert(errorMsg, 'error');
                                    }
                                }
                            },
                            complete: function() {
                                statusRemove();
                            },
                            error: function() {
                                jalert('Some error occurred', 'error');
                            }
                        });

                        $form.submit();
                    }
                }

                $(this).val('');
            });
        }

        initUserEditorMarketplaceTab();
    });
        function select_tab(tab_id)
    {
        $("div[id^='tabs-']").hide();
        $("li[id^='tabs']").removeClass('_tab').addClass('tab');
        $("div#tabs-"+tab_id).show();
        $("li#tabs"+tab_id).removeClass('tab').addClass('_tab');
        dms_resize();
    }

    $('#deleteLogo').click(function(){
        $('#logoImg').attr('src', '/images/staff_no_photo.jpg');
        $.ajax({
            url: users_ajax_link,
            data: {oper: 'delete_logo'}
        });
    });
    // del logoMobileImg
    $('#deleteMobileLogo').click(function(){
        $('#logoMobileImg').attr('src', '/images/staff_no_photo.jpg');
        $.ajax({
            url: users_ajax_link,
            data: {oper: 'delete_logo_mobile'}
        });
    });

    $('#deleteOverlay').click(function(){
        $('#overlayImg').attr('src', '/images/staff_no_photo.jpg');
        $.ajax({
            url: users_ajax_link,
            data: {oper: 'delete_overlay'}
        });
    });

    $('#deleteCertified').click(function(){
        $('#certifiedImg').attr('src', '/images/staff_no_photo.jpg');
        $.ajax({
            url: users_ajax_link,
            data: {oper: 'delete_certified'}
        });
    });

    function logoSuccess(file, serverData) {
        jalert('Logo uploaded successfully', null, duration);
        $('#logoImg').attr('src', serverData);
    }

    function logoMobileSuccess(file, serverData) {
        jalert('Logo Mobile uploaded successfully', null, duration);
        $('#logoMobileImg').attr('src', serverData);
    }
    function overlaySuccess(file, serverData) {
        jalert('Overlay image uploaded successfully', null, duration);
        $('#overlayImg').attr('src', serverData);
    }


    function certifiedSuccess(file, serverData) {
        jalert('Certified image uploaded successfully', null, duration);
        $('#certifiedImg').attr('src', serverData);
    }

    function uploadComplete(file) {
   }

    function uploadStart(file) {

       return true;
    }

    function uploadProgress(file, bytesLoaded, bytesTotal) {
        try {
            var percent = Math.ceil((bytesLoaded / file.size) * 100);

            if (percent === 100) {
                $('#editProgress').empty().append("Image download successfully.");

            } else {
                $('#editProgress').empty().append("Loading "+percent+"%");

            }
        } catch (ex) {
            this.debug(ex);
        }
    }

    jQuery.validator.addMethod("number_char", function(value, element) {

                    return   this.optional(element) || /^-?(?:[A-Z0-9]{1,}|[A-Z0-9]{0,})?$/.test(value)  ;
            });

       jQuery.validator.addMethod("zip_char", function(value, element) {

                     return this.optional(element) || /^-?(?:[A-Z0-9]*)?$/.test(value);
        }, "Please enter only characters and digits");
    function fileDialogComplete(numFilesSelected, numFilesQueued) {
        this.startUpload();
    }

    var add_logo = new SWFUpload({
        upload_url: users_ajax_link,
        post_params: {'oper': 'uploadPhoto','type':'logo',"PHPSESSID": "5b16b09ea0065ec0d39f336b2469ed01"},
        file_size_limit : "1 MB",
        file_types : "*.jpeg;*.jpg; *.png; *.gif;",
        file_types_description : "Images",
        file_upload_limit : "999",
        file_dialog_complete_handler : fileDialogComplete,
        upload_progress_handler : uploadProgress,
        upload_success_handler : logoSuccess,
        button_image_url : "/images/imgUpload.png",
        button_placeholder_id : "logoPlaceholder",
        button_width: 28,
        button_height: 28,
        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,
        button_cursor: SWFUpload.CURSOR.HAND,
        flash_url : "/js/swfupload/swfupload.swf",
        debug: false
    });

    // add logoMobile
    var add_logo_mobile = new SWFUpload({
        upload_url: users_ajax_link,
        post_params: {'oper': 'uploadPhoto','type':'logo_mobile',"PHPSESSID": "5b16b09ea0065ec0d39f336b2469ed01"},
        file_size_limit : "1 MB",
        file_types : "*.jpeg;*.jpg; *.png; *.gif;",
        file_types_description : "Images",
        file_upload_limit : "999",
        file_dialog_complete_handler : fileDialogComplete,
        upload_progress_handler : uploadProgress,
        upload_success_handler : logoMobileSuccess,
        button_image_url : "/images/imgUpload.png",
        button_placeholder_id : "logoMobilePlaceholder",
        button_width: 28,
        button_height: 28,
        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,
        button_cursor: SWFUpload.CURSOR.HAND,
        flash_url : "/js/swfupload/swfupload.swf",
        debug: false
    });
    
     var add_overlay = new SWFUpload({
        upload_url: users_ajax_link,
        post_params: {'oper': 'uploadPhoto','type':'overlay_image',"PHPSESSID": "5b16b09ea0065ec0d39f336b2469ed01"},
        file_size_limit : "2 MB",
        file_types : "*.jpeg;*.jpg; *.png; *.gif;",
        file_types_description : "Images",
        file_upload_limit : "999",
        file_dialog_complete_handler : fileDialogComplete,
        upload_progress_handler : uploadProgress,
        upload_success_handler : overlaySuccess,
        button_image_url : "/images/imgUpload.png",
        button_placeholder_id : "overlayPlaceholder",
        button_width: 28,
        button_height: 28,
        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,
        button_cursor: SWFUpload.CURSOR.HAND,
        flash_url : "/js/swfupload/swfupload.swf",
        debug: false
    });

     var add_certified = new SWFUpload({
        upload_url: users_ajax_link,
        post_params: {'oper': 'uploadPhoto','type':'certified',"PHPSESSID": "5b16b09ea0065ec0d39f336b2469ed01"},
        file_size_limit : "2 MB",
        file_types : "*.jpeg;*.jpg; *.png; *.gif;",
        file_types_description : "Images",
        file_upload_limit : "999",
        file_dialog_complete_handler : fileDialogComplete,
        upload_progress_handler : uploadProgress,
        upload_success_handler : certifiedSuccess,
        button_image_url : "/images/imgUpload.png",
        button_placeholder_id : "certifiedPlaceholder",
        button_width: 28,
        button_height: 28,
        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,
        button_cursor: SWFUpload.CURSOR.HAND,
        flash_url : "/js/swfupload/swfupload.swf",
        debug: false
    });


    add_logo.fileQueueError = function (file, error_code, message) {
        try {
                if (error_code === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {
                        jalert("You have attempted to upload too many files.\n" + (message === 0 ? "You have reached the upload limit." : "You may select " + (message &gt; 1 ? "up to " + message + " files." : "one file.")),2);
                        return;
                }
                switch (error_code) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                        jalert(file.name + " is larger than 1 MB. Please upload a file less than 1 MB.", 2);
                        break;
                case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:
                        jalert("Cannot upload Zero Byte File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                        jalert("Invalid File Type.File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                        jalert("You have selected too many files.  " +  (message &gt; 1 ? "You may only add " +  message + " more files" : "You cannot add any more files."),2);
                        break;
                default:
                        jalert("Unhandled Error",2);
                }
        } catch (ex) {
                this.debug(ex);
        }
}
    add_logo_mobile.fileQueueError = function (file, error_code, message) {
        try {
                if (error_code === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {
                        jalert("You have attempted to upload too many files.\n" + (message === 0 ? "You have reached the upload limit." : "You may select " + (message &gt; 1 ? "up to " + message + " files." : "one file.")),2);
                        return;
                }
                switch (error_code) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                        jalert(file.name + " is larger than 1 MB. Please upload a file less than 1 MB.", 2);
                        break;
                case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:
                        jalert("Cannot upload Zero Byte File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                        jalert("Invalid File Type.File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                        jalert("You have selected too many files.  " +  (message &gt; 1 ? "You may only add " +  message + " more files" : "You cannot add any more files."),2);
                        break;
                default:
                        jalert("Unhandled Error",2);
                }
        } catch (ex) {
                this.debug(ex);
        }
    }
    
    add_certified.fileQueueError = function (file, error_code, message) {
        try {
                if (error_code === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {
                        jalert("You have attempted to upload too many files.\n" + (message === 0 ? "You have reached the upload limit." : "You may select " + (message &gt; 1 ? "up to " + message + " files." : "one file.")),2);
                        return;
                }
                switch (error_code) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                        jalert(file.name + " is larger than 2 MB. Please upload a file less than 2 MB.",2);
                        break;
                case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:
                        jalert("Cannot upload Zero Byte File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                        jalert("Invalid File Type.File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                        jalert("You have selected too many files.  " +  (message &gt; 1 ? "You may only add " +  message + " more files" : "You cannot add any more files."),2);
                        break;
                default:
                        jalert("Unhandled Error",2);
                }
        } catch (ex) {
                this.debug(ex);
        }
}

   add_overlay.fileQueueError = function (file, error_code, message) {
        try {
                if (error_code === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {
                        jalert("You have attempted to upload too many files.\n" + (message === 0 ? "You have reached the upload limit." : "You may select " + (message &gt; 1 ? "up to " + message + " files." : "one file.")),2);
                        return;
                }
                switch (error_code) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                        jalert(file.name + " is larger than 2 MB. Please upload a file less than 2 MB.",2);
                        break;
                case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:
                        jalert("Cannot upload Zero Byte File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                        jalert("Invalid File Type.File name: " + file.name + ".",2);
                        break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                        jalert("You have selected too many files.  " +  (message &gt; 1 ? "You may only add " +  message + " more files" : "You cannot add any more files."),2);
                        break;
                default:
                        jalert("Unhandled Error",2);
                }
        } catch (ex) {
                this.debug(ex);
        }
}

function getGeoIpPhones(){
    var data = new Array();

    $('#geoip_phones [id^=geophone_]').each(function(index, elem){
        var phone = {};
        var type  = $(elem).find(':radio:checked').val();
        var phone_number = $(elem).find('.phone_number').val();
        if(type &amp;&amp; phone_number){
            switch(type){
                case 'zip':
                    phone.zip = $(elem).find('.zip_list').val();
                    phone.miles = $(elem).find('.miles_list').val();
                    break;
                case 'state':
                    phone.state = $(elem).find('.states_list').val();
                    break;
            }
            phone.type = type;
            phone.number = phone_number;
            data.push(phone);
        }
    });
    $('#geoip_phones').empty();
    return data;
}

function setGeoIpPhones(data){
    $('#geoip_phones').empty();
    if(data != null &amp;&amp; data != ''){
        for(var id in data){
            var _id = tmp_id++;
            $('#geoip_phones').append($.tmpl($('#geoip_phone_template').html(), {id: _id}));
            var d = data[id];
            var table = $('#geophone_'+_id);
            table.find('.phone_number').val(d.number);

            switch(d.type){
                case 'zip':
                    table.find(':radio[value=zip]').attr('checked', true);
                    table.find('.miles_list').val(d.miles);
                    table.find('.zip_list').val(d.zip).numeric({negative:false});
                    break;
                case 'state':
                     table.find('.states_list option[value='+d.state+']').attr("selected","true");
                    table.find(':radio[value=state]').attr('checked', true);
                    table.find('.zip_list').val("").numeric({negative:false});
                    break;
            }


        }
    }
}
function ChangeSelect(elem){
    var  value =  $(elem).val()




   var   array = $('#list-promotion').find("tbody").find("select[number][value="+value+"]")
   for(var i =0; i &lt;array.length;i++){
       if($(array[i]).attr("id")!=$(elem).attr("id")){
           $(elem).removeAttr("selected");
           $(elem).find("option[value=]").attr("selected",true);
       }
   }

 var  value =  $(elem).val();
                    if(value){
                                    $.ajax({
                                                url	: users_ajax_link,
                                                data	: {oper:'get_img_promo',item_id: value},
                                                type	: "POST",
                                                dataType:'json',
                                                success	: function(result){

                                                            $("#icon_"+$(elem).attr("number")).attr("src",result['image_url']);
                                                            $("#icon_"+$(elem).attr("number")).attr("title",result['description']);
                                                            $("#icon_"+$(elem).attr("number")).attr("alt",result['description']);
                                                }

                                            });
                    }else{
                             $("#icon_"+$(elem).attr("number")).attr("src","/images/staff_no_photo.jpg");

                    }


}


function GetDatapromotion(){
          var  array = $('#list-promotion').find("tbody tr[id]");
          var data={};
            for(var i =0; i &lt; array.length;i++){
              if($(array[i]).find("select[name=select]").val())
              data[i] = {"item_id":$(array[i]).find("select[name=select]").val(),
                               "expirat_date":$(array[i]).find("input[name=picer]").val(),
                               "active":(  Boolean($(array[i]).find("input[name=action]").attr("checked")))
              }
            }
           return data
}


function loadPromotion(data){
             var next=1;
       if(data!==undefined){
        if(data &amp;&amp; data.length!=0)
            if($('#list-promotion').find("tbody").find("tr[name=title]").length==0)
             $('#list-promotion').find("tbody").append("&lt;tr name='title'&gt;&lt;td&gt;Promotions&lt;/td&gt;&lt;td&gt;Active&lt;/td&gt;&lt;td&gt;Expiration Date&lt;/td&gt;&lt;td&gt;Icon&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;");

             for (var key in data){
                        var newElement =  $("#templatePromotion").find("tbody").html();

                     newElement =$(newElement );
                                                    var str = new String(  data[key].expirat_date);
                 data[key].expirat_date =  str.replace(/-/g,"/");

                     $(newElement).attr("id","body_prom"+next);
                     $(newElement).find("select[id=select]").attr("id","select_prom"+next).attr("number",next).find("option[value="+data[key].item_id+"]").attr("selected",'true');
                     $(newElement).find("span[id=remove]").attr("id","remove_prom"+next).attr("target","body_prom"+next).attr("remove_id",data[key].id);
                     $(newElement).find("input[id=picer]").attr("id","date_picer"+next);
                     $(newElement).find("img[id=icon]").attr("id","icon_"+next).attr("src",data[key].img).attr("title",data[key].description).attr("alt",data[key].description);

                     $('#list-promotion').find("tbody").append(newElement);

                  var mydata = new Date( data[key].expirat_date);
                  var date =  new Date();
        //             date.setDate(date.getDate() + 1)

            $('#date_picer'+next).val($.datepicker.formatDate("M d, yy ",  mydata));

            $('#date_picer'+next).datepicker({ dateFormat:"M d, yy ",
								  changeMonth: true,
                                                                  changeYear: true,
                                                                  yearRange: "-0:+5",
                                                                   minDate: date

            });


                       $("#select_prom"+next).find("option[value="+data[key].item_id+"]").attr("selected",'true');

                       $(newElement).find("input[name=action]").attr("checked",data[key].active);


                      $("#select_prom"+next).change(function(){
                         ChangeSelect(this);
                     })
                     $("#remove_prom"+next).click(function(){


                                          if($('#list-promotion  tbody tr[id^=body_prom]').length &lt;=1){

                                     $('#list-promotion tbody').html("");
                                 }

                                 if($(this).attr("remove_id")){
                                           $.ajax({
                                                url	: users_ajax_link,
                                                data	: {oper:'delete_promo_item',id:$(this).attr("remove_id")},
                                                type	: "POST",

                                                success	: function(result){
                                                    statusRemove();
                                                    if (result == 'deleted successfully')
                                                    {
                                                        jalert("Has been successfully deleted", null, duration);


                                                    }
                                                    else
                                                    {
                                                        jalert(result, 2, duration);
                                                    }

                                                },
                                                error: function(){
                                                    statusRemove();
                                                }
                                            });
                                                 statusRemove();

                                       $("#"+$(this).attr("target")).remove();
                                    }
                     });

                     next+=1;

             }
}

}
function ajaxCall(data, callback){
    var call_type = data.type || 'POST';
    var call_url  = data.url  || users_ajax_link;
    var call_params = data.params || {};
    var msg       = data.msg || 'Saving data...'
    statusOpen(msg, 0);
    $.ajax({
        url: call_url,
        type: call_type,
        data: call_params,
        success: function(resp){
            statusRemove();
            if(callback)
                callback(resp);
        }, error: function(){
            statusRemove();
            jalert('An error occurred', null, duration);
        }
    });
}
    function setCustomInput(event) {
        var id = $(event.target).parent('span').attr('id');
        (typeof id.split('_')[2] === 'undefined')? id = '': id = '_' + id.split('_')[2];
        if (event.target.value === 'custom') {
            $('#sp_wrp_input' + id + ' input').attr('disabled', false);
            $('#sp_wrp_input' + id + ' input').removeClass('ui-state-disabled');
        } else {
            $('#sp_wrp_input' + id + ' input').val('');
            $('#sp_wrp_input' + id + ' input').attr('disabled', 'disabled');
            $('#sp_wrp_input' + id + ' input').addClass('ui-state-disabled');
        }
        $('#wraper_ref_id'   + id).hide();
        $('#wraper_ref_code' + id).hide();
        if (event.target.value === '0') { // If deselected, then delete the error message
            $('#override_phones_table_form').find('#custom_override' + id).valid();
        }
    }
    function loadStatesForCountry()
    {
        statusOpen("Loading states list...", 0);
        var data = {};
        data.oper = 'selectchain';
        data.country_id = parseInt($('#country_id').val()) || 1;
        data.selectchain = 'state';

        $.ajax({
            url: users_ajax_link,
            data: data,
            type: 'POST',
            dataType: 'json',
            success: function (result) {
                if (result) {
                    regionsAvailable = {};
                    for (var id in result) {
                        regionsAvailable['region_' + id] = {
                            'id': id,
                            'name': result[id],
                            'isOpen': false,
                            'cities': {
                                'city_0': {
                                    'id': 0,
                                    'name': 'absent'
                                }
                            }
                        };
                    }
                    $('#add_new_region').dialog('open');
                } else {
                    jalert('Some error occured.', 2);
                }
            },
            error: function () {
                jalert('Some error occured.', 2);
            },
            complete: function () {
                statusRemove();
            }
        });
    }
    $('#deletePersonalPhoto').click(function() {
    $('#personalPhotoImg').attr('src', '/images/staff_no_photo.jpg');
});

function personalPhotoSuccess(file, serverData) {
    jalert('Personal Photo uploaded successfully');
    $('#personalPhotoImg').attr('src', serverData);
}

var add_personal_photo = new SWFUpload({
    upload_url: users_ajax_link,
    post_params: {'oper': 'uploadPhoto', 'type': 'personal_photo', "PHPSESSID": "5b16b09ea0065ec0d39f336b2469ed01"},
    file_size_limit: "2 MB",
    file_types: "*.jpeg;*.jpg; *.png; *.gif;",
    file_types_description: "Images",
    file_upload_limit: "999",
    file_dialog_complete_handler: fileDialogComplete,
    upload_progress_handler: uploadProgress,
    upload_success_handler: personalPhotoSuccess,
    button_image_url: "/images/imgUpload.png",
    button_placeholder_id: "personalPhotoPlaceholder",
    button_width: 28,
    button_height: 28,
    button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,
    button_cursor: SWFUpload.CURSOR.HAND,
    flash_url: "/js/swfupload/swfupload.swf",
    debug: false
});

add_personal_photo.fileQueueError = function(file, error_code, message) {
    try {
        if (error_code === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {
            jalert("You have attempted to upload too many files.\n" + (message === 0 ? "You have reached the upload limit." : "You may select " + (message &gt; 1 ? "up to " + message + " files." : "one file.")), 2);
            return;
        }
        switch (error_code) {
            case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                jalert(file.name + " is larger than 2 MB. Please upload a file less than 2 MB.", 2);
                break;
            case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:
                jalert("Cannot upload Zero Byte File name: " + file.name + ".", 2);
                break;
            case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                jalert("Invalid File Type.File name: " + file.name + ".", 2);
                break;
            case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                jalert("You have selected too many files.  " + (message &gt; 1 ? "You may only add " + message + " more files" : "You cannot add any more files."), 2);
                break;
            default:
                jalert("Unhandled Error", 2);
        }
    } catch (ex) {
        this.debug(ex);
    }
}

 function openClearDialog() {
        $('#clearDialog').dialog({
            width: '400px',
            modal: true,
            draggable: true,
            resizable: false,
        });
    }

    function clearAuthorizationInfo() {
        $('#au_login').val('');
        $('#au_password').val('');
        $('#au_key').val('');
        $('#changePass').hide();
        $('#au_password').show();
    }

    function makeClearAuthorizationInfo() {
        clearAuthorizationInfo();
        $('#clearDialog').dialog('close');
    }

function saveMarketplaceOutboundNotificationUrl(value) {
    statusOpen("Saving Outbound Notification Url...", 0);
    $.ajax({
        url: users_ajax_link,
        data: {
            'oper': 'saveOutboundNotificationUrl',
            'marketplace_outbound_notification_url': value,
            'user_id': $("#user_editor").data('user_id')
        },
        type: 'POST',
        mimeType: "multipart/form-data",
        success: function(result) {
            statusRemove();
            if (result != '')
            {
                jalert(result, 2);
            }
        },
        error: function(){
            $('#td_sites').hide();
            statusRemove();
        }
    });
}

function setupMarketplaceOutboundNotificationUrlEditor() {
    $buttonClear = $('.marketplace_outbound_notification_url_clear a');
    $buttonSave = $('.marketplace_outbound_notification_url_save a');
    $buttonsParent = $('.marketplace_outbound_buttons');
    $input = $('#marketplace_outbound_notification_url');
    $a = $('a.marketplace_outbound_notification_url');
    $newInput = null;
    $label = $('#marketplace_outbound_caption');

    function editorModeOff() {
        if ($newInput) {
            $newInput.remove();
        }

        $buttonsParent.hide();

        $a.parent().show();
    }

    function appendText(text) {
        $input.val(text);
        $a.text((text)
            ? text
            : 'Click here to add an end-point URL'
        );
    }

    $buttonClear.click(function() {
        appendText('');
        saveMarketplaceOutboundNotificationUrl('');
        editorModeOff();
        $label.removeClass('open');
    });

    $buttonSave.click(function() {
        appendText($newInput.val());
        saveMarketplaceOutboundNotificationUrl($input.val());
        editorModeOff();
        $label.removeClass('open');
    });

    $a.click(function() {
        $newInput = $('&lt;input type="url"&gt;')
            .val($input.val())
            .keypress(function(e) {
                appendText($(this).val());
                if (e.which == 13) {
                    saveMarketplaceOutboundNotificationUrl($(this).val());
                    editorModeOff();
                } else if (e.which == 27) {
                    editorModeOff();
                }
            })
        ;
        $a.parent().hide();
        $a.parent().parent().prepend($newInput);
        $buttonsParent.show();
        $label.addClass('open');
    });
}

$(document).ready(function () {
    $("#region_select_list").change(function () {
        if (parseInt($(this).val())) {
            $('#edit_button_region').css('display', 'inline-block');
            $('#delete_button_region').css('display', 'inline-block');
        } else {
            $('#edit_button_region').hide();
            $('#delete_button_region').hide();
        }
    });


    $('#clearInfo').click(function () {
        openClearDialog();
    });

    $('#changePass').click(function () {
        $('#changePass').hide();
        $('#au_password').show();
    });

    if ($('#au_login').val() !== '') {
        $('#changePass').show();
        $('#au_password').hide();
    }

    setupMarketplaceOutboundNotificationUrlEditor();

    // Add New Region
    var messagesRegionsListHTML = '',
        templateMsg = $('template#setting_regions_msg').html();

    $.each((messagesRegionsList || {}), function (className, msg) {
        messagesRegionsListHTML += $.tmpl(templateMsg, {
            CLASS_NAME: className,
            MSG: msg
        });
    });

    var
        $window = $(window),
        $dialogAddNewRegion = $("#add_new_region"),

        $boxes = $dialogAddNewRegion.find('.cities-box'),
        $boxSelected = $boxes.filter('.cities-box-selected'),
        $boxAvailable = $boxes.filter('.cities-box-available'),

        $btnMoveFromSelected = $dialogAddNewRegion.find('.icon-right'),
        $btnMoveFromSelectedAll = $dialogAddNewRegion.find('.icon-right2'),

        $btnMoveToSelected = $dialogAddNewRegion.find('.icon-left'),
        $btnMoveToSelectedAll = $dialogAddNewRegion.find('.icon-left2'),

        timeoutSearch = 0;

    function setDataBox($box, data) {
        var boxIsAvailable = $box.hasClass('cities-box-available'),
            $boxIsEmpty = true,
            index = 0,
            templateListCities = $('template#setting_regions_city').html(),
            templateRegion = $('template#setting_regions').html();

        $box.empty();
        data = alphabeticalSortObjectOfObjects(data, 'name');
        $.each(data, function(index) {
            if ('object' === typeof(data[index]['cities'])) {
                var tempCitiesArray = [];
                tempCitiesArray = alphabeticalSortObjectOfObjects(data[index]['cities'], 'name');
                var tempCitiesObj = {};
                $.each(tempCitiesArray, function (key) {
                    tempCitiesObj['city_' + tempCitiesArray[key]['id']] = tempCitiesArray[key];
                });
                data[index]['cities'] = tempCitiesObj;
            }
        });

        $.each(data, function (regionKey, regionData) {
            var renderListCities = '',
                cityLength = 0;

            $.each(regionData['cities'], function (cityKey, cityData) {
                cityLength++;
                index++;

                renderListCities += $.tmpl(templateListCities, {
                    CITY_ID: cityData['id'],
                    CITY_NAME: cityData['name'],
                    INDEX: index
                });
            });

            if (cityLength) {
                var renderSection = $.tmpl(templateRegion, {
                    REGION_ID: regionData['id'],
                    REGION_NAME: regionData['name']
                });

                $box
                    .append(renderSection)
                    .find('ul#cities_' + regionData['id'])
                    .html(renderListCities)
                    .each(function () {
                        if (regionData['isOpen']) {
                            $(this).closest('div.list-segment').toggleClass('open');
                        }
                    });

                $boxIsEmpty = false;
            }
        });

        $box
            .append(messagesRegionsListHTML)
            [$boxIsEmpty ? 'addClass' : 'removeClass']('list-empty')
            .removeClass('not-found');

        (boxIsAvailable ? $btnMoveFromSelectedAll : $btnMoveToSelectedAll)[(!$boxIsEmpty ? 'addClass' : 'removeClass' )]('active');
        (boxIsAvailable ? $btnMoveFromSelected : $btnMoveToSelected).removeClass('active');

        var $elem = $($box).siblings('div.list-search').find('input');
        if ($.trim($elem.val())) {
            searchInRegionCityBox($elem, 'focus');
        }
    }

    function alphabeticalSortObjectOfObjects(data, attr) {
        var arr = [];
        for (var prop in data) {
            if (data.hasOwnProperty(prop) &amp;&amp; data[prop].hasOwnProperty(attr)) {
                var obj = {};
                obj[prop] = data[prop];
                obj.tempSortName = data[prop][attr].toLowerCase();
                arr.push(obj);
            }
        }
        arr.sort(function(a, b) {
            var result;
            var at = a.tempSortName,
                bt = b.tempSortName;
            if (at &gt; bt) {
                result = 1;
            } else {
                if (at &lt; bt) {
                    result = -1;
                } else {
                    result = 0;
                }
            }
            return result;
        });

        var result = [];
        for (var i = 0, l = arr.length; i &lt; l; i++) {
            var obj = arr[i];
            delete obj.tempSortName;
            for (var prop in obj) {
                if (obj.hasOwnProperty(prop)) {
                    var id = prop;
                }
            }
            var item = obj[id];
            result.push(item);
        }

        return result;
    }

    function getDataBox($box, type) { // $box - Selected OR Available box-cities, type == (all || selected || unselected)
        var result = {};
        $box
            .find('.list-segment')
            .each(function () {
                var $segment = $(this),
                    region_id = $segment.attr('data-id'),
                    region_name = $segment.attr('data-name'),
                    region_cities = {},
                    region_cities_length = 0;

                $segment.find('ul &gt; li').each(function () {
                    var $this = $(this),
                        city_id = $this.attr('data-id'),
                        city_name = $this.attr('data-name');

                    if (
                        ( type == 'all' ) ||
                        ( type == 'selected' &amp;&amp; $this.hasClass('active') ) ||
                        ( type == 'unselected' &amp;&amp; !$this.hasClass('active') )
                    ) {
                        region_cities_length++;
                        region_cities['city_' + city_id] = {
                            id: city_id,
                            name: city_name
                        };
                    }
                });
                if (region_cities_length) {
                    result['region_' + region_id] = {
                        id: region_id,
                        name: region_name,
                        isOpen: $segment.hasClass('open'),
                        cities: region_cities
                    };
                }
            });

        return result;
    }

    function resetData() {
        /* rebuild data array */
        var type = $('#add_new_region_save').data('type')
        if ('edit' === type) {
            var dataSelected = $.extend({}, regionsSelected);
            var dataAvaible = $.extend({}, regionsAvailable);

            for (var key in regionsAvailable) {
                if ('undefined' != typeof(regionsAvailable[key])) {
                    for (var city in regionsAvailable[key]) {
                        if (
                            'undefined' != typeof(dataSelected[key])
                            &amp;&amp; 'undefined' != typeof(dataSelected[key]['cities'])
                            &amp;&amp; dataSelected[key]['cities'].hasOwnProperty(city)
                        ) {
                            delete(dataAvaible[key]['cities'][city]);
                        }
                    }
                }
            }
            $('#ui-dialog-title-add_new_region').html('Edit Region');
        } else {
            var dataSelected = regionsSelected = {};
            var dataAvaible = $.extend({}, regionsAvailable);
            $('#ui-dialog-title-add_new_region').html('Add New Region');
        }

        setDataBox($boxSelected, (dataSelected || {}));
        setDataBox($boxAvailable, (dataAvaible || {}));
        $('#region-name-input').css('border-color', '#ccc');
        $('#region-name-input').val('');

        if ('edit' === type) {
            var regionName = $('#region_select_list').find('option:selected').text();
            var pos = regionName.indexOf('[');
            regionName = regionName.substr(0, pos);
            $('#region-name-input').val(regionName);
        }

        resetSearch($boxSelected);
        resetSearch($boxAvailable);
    }

    function resetSearch($data) {
        $('#add_new_region').find('div.section div.list-search input').val('');
        if ('object' === typeof($data)) {
            $data.find('div.list-segment').each(function () {
                if ($(this).hasClass('hidden-region')) {
                    $(this).removeClass('hidden-region');
                }
                if ($(this).hasClass('open')) {
                    $(this).removeClass('open');
                }
            });
            $data.removeClass('activated-search');
            $data.removeClass('activated-search not-found');
        }
    }

    function saveData(type) {
        regionsAvailable = getDataBox($boxAvailable, 'all');
        regionsSelected = getDataBox($boxSelected, 'all');
        var regionName = $.trim($('#region-name-input').val());

        if (regionName.length &amp;&amp; /^[\s0-9a-zA-Z_#]+$/.test(regionName)) {
            $('#region-name-input').css('border-color','#ccc');
            var cityIds = '';
            for (var key in regionsSelected) {
                for (var id in regionsSelected[key]['cities']) {
                    cityIds += regionsSelected[key]['cities'][id]['id'] + ','
                }
            }
            cityIds = cityIds.slice(0, -1);

            var data = {};
            data.oper = 'saveRegion';
            data.type = type;
            data.cityIds = cityIds;
            data.regionName = regionName;
            if ('edit' === type) {
                var regionId = parseInt($('#region_select_list').val());
                data.regionId = regionId;
            }
            statusOpen("Saving region...", 0);
            $.ajax({
                url: users_ajax_link,
                data: data,
                type: 'POST',
                dataType: 'json',
                success: function (result) {
                    if (result.status) {
                        jalert('Region saved successfully.');
                        if ('add' === type) {
                            var optionHtml = '&lt;option value="'
                                + result.regionId + '"&gt;'
                                + regionName
                                + '[' + result.regionId + ']'
                                + '&lt;/option&gt;';
                            $('#region_select_list').append(optionHtml);
                        } else if ('edit' === type) {
                            regionName = regionName + '[' + data.regionId +']';
                            $('#region_select_list').find('option:selected').text(regionName);
                        }
                        if ('object' === typeof(result.fullRegionList)) {
                            regionFullList = result.fullRegionList;
                        }
                        $dialogAddNewRegion.dialog('close');
                    } else {
                        if (result.exist) {
                            jalert('Some error occured.', 2);
                        } else {
                            jalert('This region name already exists.', 2);
                        }
                    }
                },
                error: function () {
                    jalert('Some error occured.', 2);
                },
                complete: function () {
                    statusRemove();
                }
            });
        } else {
            $('#region-name-input').css('border-color','red');
            jalert('Please enter region name, not empty, a-Z, 0-9, #, _', 2);
        }
    }

    function rebuildList(elem, data)
    {
        var key = 'region_' + data.stateId;
        var flag = data.flag;
        var ajax = data.ajax || false;

        switch (flag) {
            case 'ui-icon ui-icon-circle-plus': /* press on + icon on state in avaible city box */
                regionsAvailable[key]['isOpen'] = false;
                var tempRegion = regionsAvailable[key];
                if ('undefined' != typeof(regionsSelected[key])) {
                    regionsSelected[key]['cities'] = $.extend(tempRegion['cities'], regionsSelected[key]['cities']);
                    delete(regionsAvailable[key]);
                } else {
                    regionsSelected[key] = tempRegion;
                    delete(regionsAvailable[key]);
                }
                setDataBox($boxSelected, regionsSelected);
                setDataBox($boxAvailable, regionsAvailable);
                break;

            case 'ui-icon ui-icon-circle-minus': /* pres on - icon on state in selected city box*/
                regionsSelected[key]['isOpen'] = false;
                var tempRegion = regionsSelected[key];
                if ('undefined' != typeof(regionsAvailable[key])) {
                    regionsAvailable[key]['cities'] = $.extend(tempRegion['cities'], regionsAvailable[key]['cities']);
                    delete(regionsSelected[key]);
                } else {
                    regionsAvailable[key] = tempRegion;
                    delete(regionsSelected[key]);
                }
                setDataBox($boxSelected, regionsSelected);
                setDataBox($boxAvailable, regionsAvailable);
                break;

            case 'region-name':/* press on state any where */
            case 'list-title':
            case 'ui-icon ui-icon-carat-1-n':
            case 'ui-icon ui-icon-carat-1-s':
                var cityBox = $(elem).closest('div.cities-box').hasClass('cities-box-selected') ? 'selected' : 'avaible';
                if ('selected' === cityBox) {
                    /* remove records from dataAvaible that exists in selected records */
                    for (var region in regionsAvailable) {
                        if (regionsSelected.hasOwnProperty(region)) {
                            for (var city in regionsAvailable[region]['cities']) {
                                if (regionsSelected[region]['cities'].hasOwnProperty(city)) {
                                    delete(regionsAvailable[region]['cities'][city]);
                                }
                            }
                        }
                    }
                    if ('undefined' != typeof(regionsAvailable[key])) {
                        //regionsAvailable[key]['isOpen'] = false;
                        setDataBox($boxAvailable, (regionsAvailable || {}));
                    }
                    $(elem).closest('div.list-segment').toggleClass('open');
                } else {
                    if (ajax) {
                        var dataAvaible = $.extend({}, regionsAvailable);
                        /* remove records from dataAvaible that exists in selected records */
                        for (var region in regionsAvailable) {
                            if (regionsSelected.hasOwnProperty(region)) {
                                for (var city in regionsAvailable[region]['cities']) {
                                    if (regionsSelected[region]['cities'].hasOwnProperty(city)) {
                                        delete(dataAvaible[region]['cities'][city]);
                                    }
                                }
                            }
                        }
                        dataAvaible[key]['isOpen'] = true;
                        setDataBox($boxAvailable, (dataAvaible || {}));
                    } else {
                        regionsAvailable[key]['isOpen'] = (regionsAvailable[key]['isOpen']) ? false : true;
                        $(elem).closest('div.list-segment').toggleClass('open');
                    }
                }

                break;
        }
    }

    function changeSearchBoxClass($elem, switchCondition, className) {
        var $result = $elem
            .closest('.section')
            .find('.cities-box')
            [switchCondition ? 'addClass' : 'removeClass'](className)

        return $result;
    }

    function formatSegmentList($elem, emptyBoxParam, hasMatchRegion, hasMatchCity, valueCity, reg) {
        $elem.each(function () {
            var $thisLi = $(this),
                $thisLiName = ($thisLi.attr('data-name') || ''),
                $cityNameSpan = $thisLi.find('.city-name'),
                matchCity = ( $thisLiName.toLowerCase().indexOf(valueCity) &gt; -1 );

            if (matchCity) {
                hasMatchCity = true;
                $cityNameSpan.html($thisLiName.replace(reg, '&lt;b&gt;$1&lt;/b&gt;'));
            } else if ($cityNameSpan.has('b')) {
                $cityNameSpan.html($thisLiName);
            }

            if (emptyBoxParam) {
                $thisLi[matchCity ? 'removeClass' : 'addClass']('hidden-city');
            } else {
                $thisLi[(hasMatchRegion || (!hasMatchRegion &amp;&amp; matchCity) ) ? 'removeClass' : 'addClass']('hidden-city');
            }

        });

        return hasMatchCity;
    }

    function searchInRegionCityBox(elem, type) {
        var eventIsKeyUp = (type == 'keyup'),
            $this = $(elem),
            $box = changeSearchBoxClass($this, eventIsKeyUp, 'load-search'),
            thisValue = $.trim($this.val()).toLowerCase();

        if (thisValue &amp;&amp; !$box.hasClass('list-empty')) {
            var arraySearch = $.grep(thisValue.split(/\s*,\s*/), function (val) {
                    return ($.trim(val).length &gt; 0);
                }),
                doubleSearch = (arraySearch.length == 2 &amp;&amp; $.trim(arraySearch[1])),
                valueRegion = (doubleSearch ? arraySearch[0] : thisValue),
                valueCity = (doubleSearch ? arraySearch[1] : thisValue),
                reg = new RegExp('(' + valueCity + ')', 'i'),
                boxIsEmpty = true,
                result;

            changeSearchBoxClass($this, false, 'load-search');
            changeSearchBoxClass($this, true, 'activated-search');

            $box
                .find('.list-segment')
                .each(function () {
                    var $thisSegment = $(this),
                        $thisSegmentName = ($thisSegment.attr('data-name') || ''),
                        $thisSegmentList = $thisSegment.find('ul').children('li'),
                        $thisSegmentRegionName = $thisSegment.find('.region-name'),
                        hasMatchRegion = ($thisSegmentName.toLowerCase().indexOf(valueRegion) &gt; -1),
                        hasMatchCity = false;

                    if (doubleSearch &amp;&amp; valueRegion &amp;&amp; valueCity) {
                        if (hasMatchRegion) {
                            result = formatSegmentList($thisSegmentList, true, hasMatchRegion, hasMatchCity, valueCity, reg);
                            if (result) {
                                hasMatchCity = true;
                                boxIsEmpty = false;
                            }
                        }
                        $thisSegmentRegionName
                            .filter('.region-match')
                            .removeClass('region-match')
                            .html($thisSegmentName);

                        $thisSegment
                            [hasMatchCity ? 'removeClass' : 'addClass']('hidden-region')
                            [hasMatchCity ? 'addClass' : 'removeClass']('open');
                    } else {
                        if (hasMatchRegion) {
                            $thisSegmentRegionName
                                .addClass('region-match')
                                .html($thisSegmentName.replace(reg, '&lt;span&gt;$1&lt;/span&gt;'));
                        } else if ($thisSegmentRegionName.hasClass('region-match')) {
                            $thisSegmentRegionName
                                .removeClass('region-match')
                                .html($thisSegmentName);
                        }

                        result = formatSegmentList($thisSegmentList, false, hasMatchRegion, hasMatchCity, valueCity, reg);
                        if (result) {
                            hasMatchCity = true;
                        }

                        if (hasMatchCity || hasMatchRegion) {
                            $thisSegment
                                .removeClass('hidden-region')
                                [hasMatchCity ? 'addClass' : 'removeClass']('open');
                            boxIsEmpty = false;
                        } else {
                            $thisSegment
                                .addClass('hidden-region')
                                .removeClass('open');
                        }
                    }
                });

            changeSearchBoxClass($this, boxIsEmpty, 'not-found');
        } else {
            changeSearchBoxClass($this, false, 'activated-search load-search not-found');
            if (type == 'keyup') {
                $box.find('div.list-segment').each(function () {
                    if ($(this).hasClass('open')) {
                        $(this).removeClass('open');
                    }
                });
            }
        }
    }

    $dialogAddNewRegion.dialog({
        open: function () {
            resetData();
            $dialogAddNewRegion
                .undelegate()
                .delegate('.section.center &gt; div', 'click', function (event, obj) {
                    if ('undefined' != typeof(obj) &amp;&amp; obj.hasClass('list-title')) {
                        return false;
                    }
                    var toSelected = $(this).is('.icon-right'),
                        $boxFrom = toSelected ? $boxAvailable : $boxSelected,
                        $boxTo = toSelected ? $boxSelected : $boxAvailable,

                        dataFrom = getDataBox($boxFrom, 'selected'),
                        dataTo = getDataBox($boxTo, 'all'),
                        dataExtend = $.extend(true, dataTo, dataFrom),
                        dataCut = getDataBox($boxFrom, 'unselected');

                    if (toSelected) {
                        regionsSelected = $.extend({}, dataExtend);
                        regionsAvailable = $.extend({}, dataCut);
                    } else {
                        regionsSelected = $.extend({}, dataCut);
                        regionsAvailable = $.extend({}, dataExtend);
                    }

                    setDataBox($boxTo, dataExtend);
                    setDataBox($boxFrom, dataCut);
                })
                .delegate('.list-title', 'click', function (event) {
                    var self = $(this);

                    var stateId = parseInt($(self).closest('div.list-segment').attr('data-id'));
                    var stateName = $(self).find('span.region-name').text();
                    /* check data if exists*/
                    var value = '';
                    if (
                        'object' === typeof(regionsAvailable)
                        &amp;&amp; 'undefined' != typeof(regionsAvailable['region_' + stateId])
                        &amp;&amp; 'undefined' != typeof(regionsAvailable['region_' + stateId]['cities'])
                        &amp;&amp; 'undefined' != typeof(regionsAvailable['region_' + stateId]['cities']['city_0'])
                        &amp;&amp; 'undefined' != typeof(regionsAvailable['region_' + stateId]['cities']['city_0']['name'])
                    ) {
                        value = regionsAvailable['region_' + stateId]['cities']['city_0']['name'];
                    }

                    if ('absent' === value) {
                        statusOpen("Loading cities list...", 0);
                        var data = {};
                        data.oper = 'selectchain';
                        data.state_id = stateId;
                        data.selectchain = 'city';

                        $.ajax({
                            url: users_ajax_link,
                            data: data,
                            type: 'POST',
                            dataType: 'json',
                            success: function (result) {
                                if (result) {
                                    var tempObj = {};
                                    for (var id in result) {
                                        tempObj['city_' + id] = {
                                            'id': id,
                                            'name': result[id]
                                        }
                                    }

                                    regionsAvailable['region_' + stateId] = {
                                        'id': stateId,
                                        'name': stateName,
                                        'isOpen': ('ui-icon ui-icon-circle-plus' === event.target.className) ? false : true,
                                        'cities': tempObj

                                    };
                                    var data = {};
                                    data.flag = event.target.className;
                                    data.stateId = stateId;
                                    data.ajax = true;
                                    rebuildList(self, data);
                                 } else {
                                    jalert('Some error occured.', 2);
                                }
                            },
                            error: function () {
                                jalert('Some error occured.', 2);
                            },
                            complete: function () {
                                statusRemove();
                            }
                        });
                    } else {
                        var data = {};
                        data.flag = event.target.className;
                        data.stateId = stateId;
                        rebuildList(self, data);
                    }

                })
                .delegate('.ui-icon-circle-plus, .ui-icon-circle-minus', 'click', function (e) {
                    var $this = $(this),
                        $item = $this.parent(),
                        isRegion = !$item.is('li'),
                        $button = $this.hasClass('ui-icon-circle-minus') ? $btnMoveToSelected : $btnMoveFromSelected;

                    $item
                        .closest('.cities-box')
                        .find('li.active')
                        .removeClass('active');

                    if (isRegion) {
                        $item
                            .closest('.list-segment')
                            .find('li')
                            .addClass('active');
                    } else {
                        $item
                            .closest('li')
                            .addClass('active');
                    }

                    var elem = $this.closest('div.list-title');
                    $button.addClass('active').trigger('click',[elem]);
                    e.stopPropagation();
                })
                .delegate('li', 'dblclick', function(){
                    $(this)
                        .find('.ui-icon-circle-plus, .ui-icon-circle-minus')
                        .filter(':visible')
                        .click();
                })
                .delegate('li', 'click', function (e) {
                    var $this = $(this),
                        $box = $this.closest('.cities-box'),
                        $controlButton = ($box.hasClass('cities-box-selected') ? $btnMoveToSelected : $btnMoveFromSelected),
                        $cities = $box.find('li'),
                        indFrom = 0, indTo = 0, siblingsLength = 0;

                    if (e.ctrlKey) {
                        $this.toggleClass('active');
                    } else if (e.shiftKey &amp;&amp; $cities.filter('.active.last-active').length) {
                        indFrom = parseInt($cities.filter('.active.last-active').attr('data-index'));
                        indTo = parseInt($this.attr('data-index'));

                        $this.addClass('active');

                        $cities
                            .not($this)
                            .not('.activated-search .hidden-city')
                            .each(function () {
                                var $thisLi = $(this),
                                    indThis = parseInt($thisLi.attr('data-index'));

                                if (
                                    (indThis &gt; indFrom &amp;&amp; indThis &lt; indTo) ||
                                    (indThis &lt; indFrom &amp;&amp; indThis &gt; indTo)
                                ) {
                                    $thisLi.toggleClass('active');
                                }
                            });
                    } else {
                        siblingsLength = $cities.not($this).filter('.active').removeClass('active');
                        $this[siblingsLength ? 'addClass' : 'toggleClass']('active');
                    }

                    if ($this.hasClass('active')) {
                        $cities.filter('.active.last-active').removeClass('last-active');
                        $this.addClass('last-active');
                    } else {
                        $this.removeClass('last-active');
                    }
                    $controlButton[$cities.filter('.active').length ? 'addClass' : 'removeClass']('active');

                    return false;
                })
                .delegate('.list-search &gt; input', 'focus keyup blur', function (e) {
                    searchInRegionCityBox(this, e.type);
                });
        }
    });

    });

    $(document).ready(function(){
    
    $('.changeAccount').change(function(){
        AuctionLink.showChangeAccount(this);
    });
    
    $('.user_editor_auction_save').click(function(){
        AuctionLink.editAccount(this);
    });
    $('.user_editor_auction_clear').click(function(){
        AuctionLink.clearAccount(this);
    });
});

var AuctionLink = (function() 
{
    var _this;
    
    function AuctionLink(){
        _this = this;
        return _this;
    };
    
    AuctionLink.prototype.clearAccount = function(object){
        object = $(object);
        var auction = object.attr('auction');
        var data = {};
        data.oper = 'clearExternalAuctionParams';
        data.auction = auction;
        data.user_id = $("#user_editor").data('user_id');
        statusOpen('Saving..', 0);
        $.ajax({
            url:users_ajax_link,
            data: data,
            type:'POST',
            dataType: 'json',
            success: function(result){
                statusRemove();
                if (result.status) {
                    jalert(result.message);
                    _this.showAccountParams(result.auction_params);
                } else {
                    jalert(result.message, 2);
                }
            },
            error: function(){
                statusRemove();
                jalert('Error change auction', 2);
            }
        });
    }
    
    AuctionLink.prototype.editAccount = function(object){
        object = $(object);
        var auction = object.attr('auction');
        if ($('#' + auction).val() == '') {
            jalert('Please set value');
            return;
        }
        var data = {};
        data.oper = 'saveExternalAuctionAccountParams';
        data.auction = auction;
        data.user_id = $("#user_editor").data('user_id');

        data.params = [];
        $.each($('.' + auction), function (index, object) {
            var param = {}
            var $object = $(object);
            param.name = $object.attr('name');
            param.value = $object.val();
            data.params.push($.param(param));
        });

        statusOpen('Saving..', 0);
        $.ajax({
            url:users_ajax_link,
            data: data,
            type:'POST',
            dataType: 'json',
            success: function(result){
                statusRemove();
                if (result.status) {
                    jalert(result.message);
                    if (typeof result.params !== 'undefined') {
                        $.each(result.params, function(index, value){
                            $('.changeAccount[auction=' + index + ']').attr('checked', false);
                            $('.changeAccount[auction=' + index + ']').change();
                        });
                    }
                } else {
                    jalert(result.message, 2);
                }
            },
            error: function(){
                statusRemove();
                jalert('Error change auction', 2);
            }
        });
    }
    
    AuctionLink.prototype.showAccountParams = function (auctions) {
        $('.changeAccount').attr('checked', false);
        $('.user_editor_auction_save').hide();
        $('.user_editor_auction_clear').hide();
        $('.auctionInput').attr("disabled", true);
        $.each(auctions, function (auction, value) {
            $.each(value, function (index, param) {
                $('.' + auction + '[name=' + param['key'] + ']').val(param['value']);
            });
        });
    };
    
    AuctionLink.prototype.showChangeAccount = function(object){
        var auction = $(object).attr('auction');
        if ($(object).is(':checked')) {
            $('.user_editor_auction_save[auction=' + auction + ']').show();
            $('.user_editor_auction_clear[auction=' + auction + ']').show();
            $('.' + auction).attr("disabled",false);
        } else {
            $('.user_editor_auction_save[auction=' + auction + ']').hide();
            $('.user_editor_auction_clear[auction=' + auction + ']').hide();
            $('.' + auction).attr("disabled",true);
        }
    }
    
    return AuctionLink;
})();

var AuctionLink = new AuctionLink();/*function saveCustomCity(city_name,state_id, isnew){
        if(state_id != '' &amp;&amp; state_id != null)
            ajaxCall({
                msg: 'Saving City...',
                params: {
                    oper: 'saveLookup',
                    lparam: 'city',
                    value: city_name,
                    parent_id: state_id
                }
            }, function(resp){
                if(resp != null &amp;&amp; resp != ''){
                   if(isnew)
                       $('#city_id').empty();
                   if(resp.html)
                       $('#city_id').append(resp.html);
                   $('#city_id').val(resp.id);
                   $('#add_custom_city').dialog('close');
                   $('#custom_city, #custom_state, #custom_state_code').val('');
                   jalert('New City saved successfully');
                } else {
                    jalert('Some Error occured');
                }
            });
        else
            jalert('Please select state for saving city');
    }*/

    function setVirTemplateSettingsDefault()
    {
        $('#form_vir_print_dms_template').find('input[type=checkbox]')
                .each(function(){
                    $(this).attr('checked',true);
                });
    }

    $(window).load(function () {
        //$('#ui-datepicker-div').remove(); // fixed bug
        $('#ui-datepicker-div').css('display', 'none'); // fixed bug ticket=30729 and ticket = ??? ask alexey
    });

    // filter value on input
    $('#marketplace_amount').bind('input', function() {
        var value = $(this).val();
        var filteredValue = Math.abs(parseInt(value)) || '';
        if (filteredValue != value) {
            $(this).val(filteredValue);
        }
    }).bind('change blur', function() {
        // set 0 if value is empty
        var value = $(this).val();
        if (!value) {
            $(this).val(0);
        }
    });

    $(document).ready(function() {
        /* Autoresize users list
         autoResize(elem, params)*/
        autoResize('#user_tree', ['.navigation_menu', '#tabs-1 .offset_min10px', '.text_dealership', '.users-block .space', '.buttons_block', '#user_tree_delete']);
        autoResize('#sites_tree', ['.navigation_menu', '#tabs-1 .offset_min10px', '.text_dealership', '.users-block .space', '.buttons_block', '#user_tree_delete']);
    });

</script>

<select style="display:none" id="rolesFull">
<option value="0">UNREGISTERED SELLER</option>
<option value="1">REGISTERED SELLER</option>
<option value="3">PRIVATE SELLER</option>
<option value="5">MANAGER</option>
<option value="7">DEALERSHIP OWNER</option>
<option value="10">PARTNER</option>
<option value="12">SUPERVISOR</option>
</select>
<select style="display:none" id="rolesNoPS">
<option value="0">UNREGISTERED SELLER</option>
<option value="1">REGISTERED SELLER</option>
<option value="5">MANAGER</option>
<option value="7">DEALERSHIP OWNER</option>
<option value="10">PARTNER</option>
<option value="12">SUPERVISOR</option>
</select><!-- pls do not change the footer ID! -->
<!--
<div id="mainFooter">
<table border="0" cellpadding="0" cellpadding="0" width="99%" align="center" class="footer_block">
    <tr>
        <td width="33%" align="left"><span class="bold">Powered by:</span> <a href="http://www.Autoxloo.com/">Autoxloo</a></td>
        <td width="33%" align="center" class="footerCopyright">&#169; 2011 All Rights Reserved Worldwide</td>
        <td width="33%" align="right"><span class="bold">Support:</span> <a href="mailto:Support@Autoxloo.com">Support@Autoxloo.com</a></td>
    </tr>
</table>
</div>
-->
</div>


<div id="jstree-marker" style="display: none;">»</div><div id="jstree-marker-line" style="display: none;"></div><div id="vakata-contextmenu"></div><div class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" id="ui-datepicker-div" style="display: none;"></div><div style="display: none; z-index: 1000; outline: 0px none;" class="ui-dialog ui-widget ui-widget-content ui-corner-all " tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-user_editor"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-user_editor">User Editor</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div id="user_editor" style="display: block;" class="ui-dialog-content ui-widget-content">
                        <span id="user_editor_tab1" class="gl_button notranslate">
    <span>General</span>
</span>
<span id="user_editor_tab2" class="gl_button notranslate">
    <span>Address</span>
</span>
<span id="user_editor_tab3" class="gl_button">
    <span>Autoxloo</span>
</span>
<span id="user_editor_tab4" class="gl_button notranslate">
    <span>Access</span>
</span>
<span id="user_editor_tab5" class="gl_button notranslate">
    <span>Images</span>
</span>
<span id="user_editor_tab6" class="gl_button notranslate">
    <span>Live Help</span>
</span>
<span id="user_editor_tab7" class="gl_button notranslate">
    <span>Promotions</span>
</span>
<span id="user_editor_tab8" class="gl_button notranslate">
    <span>Auction Link</span>
</span>
<span id="user_editor_tab9" class="gl_button notranslate">
    <span>Auction Marketplace</span>
</span>
<span id="user_editor_tab10" class="gl_button notranslate">
    <span>VIR Form Access</span>
</span>
<div style="clear: both;"></div>
                        <div style="border:1px solid #c4c4c4; padding:10px;margin: 10px 0;" id="user_editor_tabs">
                            <div id="user_editor_tab1_content">
                                <form id="user_editor_form">
                                    <table>
    <tbody><tr>
        <td class="bold">
            Login:
            <span class="col_red">*</span>
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" id="login" name="login2" tabindex="1" />
        </td>
        <td class="tb_separator"></td>
        <td class="bold">
            Role:
        </td>
        <td class="tb_r tb_r_padding">
            <select id="role_id" tabindex="7">
                <option value="0">UNREGISTERED SELLER</option><option value="1">REGISTERED SELLER</option><option value="3">PRIVATE SELLER</option><option value="5">MANAGER</option><option value="7">DEALERSHIP OWNER</option><option value="10">PARTNER</option><option value="12">SUPERVISOR</option>            </select>
        </td>
    </tr>
    <tr>
        <td class="bold notranslate">
            Password: 
            <span class="col_red">*</span>
        </td>
        <td class="tb_r tb_r_padding">
            <input type="password" id="password" name="password" tabindex="2" />
        </td>
        <td class="tb_separator"></td>
        <td class="bold notranslate">
            First Name:
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" name="user_contact" id="user_contact" tabindex="8" />
        </td>
    </tr>
    <tr>
        <td class="bold notranslate">
            Confirm Password:
            <span class="col_red">*</span>
        </td>
        <td class="tb_r tb_r_padding">
            <input type="password" id="cpass" name="cpass" tabindex="3" />
        </td>
        <td class="tb_separator"></td>
        <td class="bold notranslate">
            Last Name:
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" name="user_contact2" id="user_contact2" tabindex="9" />
        </td>
    </tr>
    <tr>
        <td class="bold notranslate">
            User/Dealer Name:
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" id="name" name="name" tabindex="4" />
        </td>
        <td class="tb_separator"></td>
        <td class="bold notranslate">
            Email XML:
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" name="leads_email_xml2" id="leads_email_xml" tabindex="10" />
        </td>
    </tr>
    <tr>
        <td class="bold">
            Email:
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" id="email" name="email2" tabindex="5" />
        </td>
        <td class="tb_separator"></td>
        <td class="bold">
            Email Plain Text:
        </td>
        <td class="tb_r tb_r_padding">
            <input type="text" name="leads_email_plain2" id="leads_email_plain" tabindex="11" />
        </td>
    </tr>
    <tr>
        <td class="bold">
            Position:
        </td>
        <td class="tb_r tb_r_padding"> 
            <input type="text" name="position" id="position" tabindex="6" />
        </td>
        <td class="tb_separator"></td>
        <td class="bold demotoresBlock" style="display: none;">
                    </td>
        <td class="tb_r tb_r_padding demotoresBlock" colspan="1" style="display: none;">
                    </td>
    </tr>
   
    <tr>
        <td colspan="4">
            <label class="notranslate" for="active">
                Active 
            </label>
            <input type="checkbox" id="active" tabindex="12" />
            <div class="child_update">
                <label for="active_child_update">
                    Set the option "Active" for sub-users                </label>
                <input type="checkbox" id="active_child_update" tabindex="13" />
            </div>
                            <div class="delegate_inventory">
                    <label class="notranslate" for="delegate">
                        Allow user to manage your inventory                    </label> 
                    <input type="checkbox" id="delegate" tabindex="14" />
                </div>
                    </td>
    </tr>
</tbody></table>                                </form>
                            </div>

<div style="display:none; min-height: 185px;" id="user_editor_tab2_content">
<table class="user_set_tab">
<tbody><tr>
    <td valign="top" class="bold notranslate">Address:</td>
    <td valign="top" class="tb_r tb_r_padding"><input type="text" id="address" tabindex="1" /></td>
    <td></td>
    <td valign="top" style="padding-top:6px;" class="bold notranslate">Phone:</td>

    <td class="tb_r tb_r_padding2"><form onsubmit="return false;" action="" name="phoneF" id="phoneF">
    <div class="phone_div">
        <span>(
            <input type="text" maxlength="3" style="width:30px;" name="phone1" id="phone1" minlength="3" tabindex="6" /> )  
            <div class="for-validation">Enter a valid phone number</div>
            <input type="text" maxlength="3" style="width:30px;" minlength="3" name="phone2" id="phone2" tabindex="7" /> -
            <div class="for-validation">Enter a valid phone number</div>
            <input type="text" maxlength="4" minlength="4" style="width: 40px;" name="phone3" id="phone3" tabindex="8" />
            <div class="for-validation">Enter a valid phone number</div>
        </span>
    </div>
    </form>
    </td>
</tr>
<tr>
    <td valign="top" style="padding-top:6px;" class="bold notranslate">City:</td>
    <td valign="top" class="tb_r tb_r_padding"><select id="city_id" tabindex="2" class="notranslate"><option value="">Select City</option></select></td>
    <td valign="top" style="padding-right: 10px;">
        <span class="gl_button" id="add_button_city">
            <span>
            <a href="javascript:void(0);" class="button-style b_add notranslate">Add</a>
            </span>
        </span>
        <span class="gl_button" id="edit_button_city">
            <span>
            <a href="javascript:void(0);" class="button-style b_edit notranslate">Edit</a>
            </span>
        </span>
    </td>
    <td valign="top" style="padding-top:6px;" class="bold notranslate">Toll Free Phone:</td>
    <td valign="top" class="tb_r tb_r_padding2"><form onsubmit="return false;" action="" name="phoneTF" id="phoneTF">
    <div class="phone_div">
        <span>(
            <input type="text" maxlength="3" style="width:30px;" name="toll_free_phone1" id="toll_free_phone1" minlength="3" tabindex="9" /> )  
            <div class="for-validation">Enter a valid phone number</div>
            <input type="text" maxlength="3" style="width:30px;" id="toll_free_phone2" name="toll_free_phone2" minlength="3" tabindex="10" /> -
            <div class="for-validation">Enter a valid phone number</div>
            <input type="text" maxlength="4" minlength="4" style="width: 40px;" name="toll_free_phone3" id="toll_free_phone3" tabindex="11" />
            <div class="for-validation">Enter a valid phone number</div>
        </span>
    </div>
    </form></td>
</tr>
<tr>
    <td class="bold notranslate">State:</td>
    <td class="tb_r tb_r_padding"><select id="state_id" tabindex="3" class="notranslate"><option value="">Select State</option></select></td>
    <td style="padding-right: 10px; width: 150px;">
        <span class="gl_button" id="add_button_state">
            <span>
            <a href="javascript:void(0);" class="button-style b_add notranslate">Add</a>
            </span>
        </span>
         <span class="gl_button" id="edit_button_state">
            <span>
            <a href="javascript:void(0);" class="button-style b_edit notranslate">Edit</a>
            </span>
        </span>
    </td>
    <td class="bold notranslate">International Phone:</td>
    <td class="tb_r tb_r_padding2">
        <div class="phone_div">
            <span class="phone_part_0"></span>
            <input type="text" maxlength="20" id="international_phone" name="international_phone" tabindex="12" />
        </div>
    </td>
</tr>
<tr>
    <td class="bold notranslate">Zip:</td>
    <td class="tb_r tb_r_padding">
       <form onsubmit="return false;" action="" name="zipForm" id="zipForm">
                <input type="text" maxlength="6" id="zip" name="zip" tabindex="4" />
        </form>
    </td>
    <td></td>
    <td colspan="2"></td>
</tr>
<tr>
    <td class="bold notranslate">Country:</td>
    <td class="tb_r tb_r_padding">
        <select id="country_id" tabindex="5"><option value="">Select Country</option><option value="3">AFGHANISTAN</option><option value="4">ALBANIA</option><option value="5">ALGERIA</option><option value="6">ANDORRA</option><option value="7">ANGOLA</option><option value="8">ANTIGUA AND BARBUDA</option><option value="9">ARGENTINA</option><option value="10">ARMENIA</option><option value="11">AUSTRALIA</option><option value="12">AUSTRIA</option><option value="13">AZERBAIJAN</option><option value="14">BAHAMAS</option><option value="15">BAHRAIN</option><option value="16">BANGLADESH</option><option value="17">BARBADOS</option><option value="18">BELARUS</option><option value="19">BELGIUM</option><option value="20">BELIZE</option><option value="21">BENIN</option><option value="22">BHUTAN</option><option value="23">BOLIVIA</option><option value="24">BOSNIA AND HERZEGOVINA</option><option value="25">BOTSWANA</option><option value="26">BRAZIL</option><option value="27">BRUNEI</option><option value="28">BULGARIA</option><option value="29">BURKINA FASO</option><option value="30">BURUNDI</option><option value="31">CAMBODIA</option><option value="32">CAMEROON</option><option value="2">CANADA</option><option value="33">CAPE VERDE</option><option value="34">CENTRAL AFRICAN REPUBLIC</option><option value="35">CHAD</option><option value="36">CHILE</option><option value="37">CHINA</option><option value="38">COLOMBIA</option><option value="39">COMOROS</option><option value="40">CONGO (BRAZZAVILLE)</option><option value="41">CONGO, DEMOCRATIC REPUBLIC OF THE</option><option value="42">COSTA RICA</option><option value="43">COTE D'IVOIRE</option><option value="44">CROATIA</option><option value="45">CUBA</option><option value="46">CYPRUS</option><option value="47">CZECH REPUBLIC</option><option value="48">DENMARK</option><option value="49">DJIBOUTI</option><option value="50">DOMINICA</option><option value="51">DOMINICAN REPUBLIC</option><option value="52">EAST TIMOR (TIMOR TIMUR)</option><option value="53">ECUADOR</option><option value="54">EGYPT</option><option value="55">EL SALVADOR</option><option value="56">EQUATORIAL GUINEA</option><option value="57">ERITREA</option><option value="58">ESTONIA</option><option value="59">ETHIOPIA</option><option value="60">FIJI</option><option value="61">FINLAND</option><option value="62">FRANCE</option><option value="63">GABON</option><option value="64">GAMBIA, THE</option><option value="65">GEORGIA</option><option value="66">GERMANY</option><option value="67">GHANA</option><option value="68">GREECE</option><option value="69">GRENADA</option><option value="70">GUATEMALA</option><option value="71">GUINEA</option><option value="72">GUINEA-BISSAU</option><option value="73">GUYANA</option><option value="74">HAITI</option><option value="75">HONDURAS</option><option value="76">HUNGARY</option><option value="77">ICELAND</option><option value="78">INDIA</option><option value="79">INDONESIA</option><option value="80">IRAN</option><option value="81">IRAQ</option><option value="82">IRELAND</option><option value="83">ISRAEL</option><option value="84">ITALY</option><option value="85">JAMAICA</option><option value="86">JAPAN</option><option value="87">JORDAN</option><option value="88">KAZAKHSTAN</option><option value="89">KENYA</option><option value="90">KIRIBATI</option><option value="91">KOREA, NORTH</option><option value="92">KOREA, SOUTH</option><option value="93">KUWAIT</option><option value="94">KYRGYZSTAN</option><option value="95">LAOS</option><option value="96">LATVIA</option><option value="97">LEBANON</option><option value="98">LESOTHO</option><option value="99">LIBERIA</option><option value="100">LIBYA</option><option value="101">LIECHTENSTEIN</option><option value="102">LITHUANIA</option><option value="103">LUXEMBOURG</option><option value="104">MACEDONIA, FORMER YUGOSLAV REPUBLIC OF</option><option value="105">MADAGASCAR</option><option value="106">MALAWI</option><option value="107">MALAYSIA</option><option value="108">MALDIVES</option><option value="109">MALI</option><option value="110">MALTA</option><option value="111">MARSHALL ISLANDS</option><option value="112">MAURITANIA</option><option value="113">MAURITIUS</option><option value="114">MEXICO</option><option value="115">MICRONESIA, FEDERATED STATES OF</option><option value="116">MOLDOVA</option><option value="117">MONACO</option><option value="118">MONGOLIA</option><option value="119">MONTENEGRO</option><option value="120">MOROCCO</option><option value="121">MOZAMBIQUE</option><option value="122">MYANMAR (BURMA)</option><option value="123">NAMIBIA</option><option value="124">NAURU</option><option value="125">NEPAL</option><option value="126">NETHERLANDS</option><option value="127">NEW ZEALAND</option><option value="128">NICARAGUA</option><option value="129">NIGER</option><option value="130">NIGERIA</option><option value="131">NORWAY</option><option value="132">OMAN</option><option value="133">PAKISTAN</option><option value="134">PALAU</option><option value="135">PANAMA</option><option value="136">PAPUA NEW GUINEA</option><option value="137">PARAGUAY</option><option value="138">PERU</option><option value="139">PHILIPPINES</option><option value="140">POLAND</option><option value="141">PORTUGAL</option><option value="142">QATAR</option><option value="143">ROMANIA</option><option value="144">RUSSIA</option><option value="145">RWANDA</option><option value="146">SAINT KITTS AND NEVIS</option><option value="147">SAINT LUCIA</option><option value="148">SAINT VINCENT AND THE GRENADINES</option><option value="149">SAMOA</option><option value="150">SAN MARINO</option><option value="151">SAO TOME AND PRINCIPE</option><option value="152">SAUDI ARABIA</option><option value="153">SENEGAL</option><option value="154">SERBIA</option><option value="155">SEYCHELLES</option><option value="156">SIERRA LEONE</option><option value="157">SINGAPORE</option><option value="158">SLOVAKIA</option><option value="159">SLOVENIA</option><option value="160">SOLOMON ISLANDS</option><option value="161">SOMALIA</option><option value="162">SOUTH AFRICA</option><option value="163">SPAIN</option><option value="164">SRI LANKA</option><option value="165">SUDAN</option><option value="166">SURINAME</option><option value="167">SWAZILAND</option><option value="168">SWEDEN</option><option value="169">SWITZERLAND</option><option value="170">SYRIA</option><option value="171">TAIWAN</option><option value="172">TAJIKISTAN</option><option value="173">TANZANIA</option><option value="174">THAILAND</option><option value="175">TOGO</option><option value="176">TONGA</option><option value="177">TRINIDAD AND TOBAGO</option><option value="178">TUNISIA</option><option value="179">TURKEY</option><option value="180">TURKMENISTAN</option><option value="181">TUVALU</option><option value="182">UGANDA</option><option value="183">UKRAINE</option><option value="184">UNITED ARAB EMIRATES</option><option value="185">UNITED KINGDOM</option><option value="187">URUGUAY</option><option value="1">USA</option><option value="188">UZBEKISTAN</option><option value="189">VANUATU</option><option value="190">VATICAN CITY</option><option value="191">VENEZUELA</option><option value="192">VIETNAM</option><option value="193">WESTERN SAHARA</option><option value="194">YEMEN</option><option value="195">ZAMBIA</option><option value="196">ZIMBABWE</option></select>
    </td>
    <td></td>
            <td colspan="2"></td>
    </tr>
<tr>
    <td colspan="3"></td>
            <td colspan="2"></td>
    </tr>
    </tbody></table>
                            </div>
                            <div style="display:none;" id="user_editor_tab3_content">
                                <span id="_tab1" class="gl_button notranslate"><span>General Settings</span></span>
                                <span id="_tab2" class="gl_button notranslate"><span>Phone Substitution via Referral</span></span>
                                <span id="_tab3" class="gl_button notranslate"><span>GeoIP Override Phones</span></span>
                                <span id="_tab4" class="gl_button notranslate"><span>Auto Reports</span></span>
                                <div id="ax_tab1">
                                    <table>
                                        <tbody><tr>
                                            <td class="bold notranslate">Lot/Account ID:</td>
                                            <td class="tb_r tb_r_padding"><input type="text" id="lot" /></td>
                                            <td class="bold notranslate">Brand:</td>
                                            <td class="tb_r tb_r_padding"><input type="text" id="user_brand" /></td>
                                        </tr>
                                        <tr>
                                            <td class="bold notranslate">Group:</td>
                                            <td class="tb_r tb_r_padding"><input type="text" id="group" /></td>
                                            <td class="al_top bold notranslate" rowspan="2">Comments:</td>
                                            <td class="tb_r tb_r_padding" rowspan="2"><textarea id="user_comments" rows="0" cols="0"></textarea></td>
                                        </tr>
                                        <tr>
                                            <td class="bold notranslate">Priority:</td>
                                            <td class="tb_r tb_r_padding" colspan="1"><input type="text" maxlength="2" id="priority" /></td>
                                        </tr>
                                        <tr>
                                            <td class="bold notranslate">Paid:</td>
                                            <td class="tb_r tb_r_padding" colspan="1">
                                                <select id="paid">
                                                    <option value="0">No</option>
                                                    <option value="1">Yes</option>
                                                </select>
                                            </td>
                                            <td class="bold notranslate">Mark Down:<sup>*</sup></td>
                                            <td class="tb_r tb_r_padding"><input type="text" maxlength="2" id="mark_down" /></td>
                                        </tr>
                                        <tr>
                                            <td class="bold notranslate">Active Until:</td>
                                            <td class="tb_r tb_r_padding" colspan="1">
                                                <input type="text" readonly="true" id="active_until" style="width: 45%" class="hasDatepicker" />
                                                <span class="gl_button" id="del_active_until"><span><a class="button-style b_reset">Clear</a></span></span>
                                            </td>

                                            <td class="bold notranslate">Max Discount($):<sup>**</sup></td>
                                            <td class="tb_r tb_r_padding" colspan="1">
                                                <input type="text" id="max_discount" maxlength="9" />
                                            </td>


                                        </tr>
                                        <tr>
                                            <td class="bold notranslate">Custom Website URL:</td>
                                            <td class="tb_r tb_r_padding" colspan="1">
                                                <input type="text" id="website_url" />
                                            </td>
                                                                                            <td class="bold"></td>
                                                <td class="tb_r tb_r_padding" colspan="1">
                                                </td>
                                                                                    </tr>
                                        <tr>
                                            <td class="bold notranslate">Premium Vehicles Amount:</td>
                                            <td class="tb_r tb_r_padding" colspan="1">
                                                <select id="premium_vehicles_amount">
                                                                                                            <option value="0">0</option>
                                                                                                           <option value="5">5</option>
                                                                                                           <option value="10">10</option>
                                                                                                           <option value="15">15</option>
                                                                                                           <option value="20">20</option>
                                                                                                   </select>
                                            </td>
                                            <td class="bold"></td>
                                            <td class="tb_r tb_r_padding" colspan="1"></td>
                                        </tr>
                                    </tbody></table>
                                    <hr />
                                <div class="notranslate">
                                    <sup>*</sup><span style="font-size: 7pt;" class="text-align-center"> -   % applied to all current prices for this user</span>
                                    <br /><sup>**</sup><span style="font-size: 7pt;" class="text-align-center"> -   "0" means ignore max discount</span>
                                </div>
                                </div>
                                <div style="display: none" id="ax_tab2">
                                   <form id="override_phones_table_form">
                                   <table class="notranslate" style="width: 736px" id="override_phones_table">
                                       <tbody><tr>
                                            <td class="bold">Craigslist:</td>
                                            <td class="tb_r tb_r_padding"><input type="text" maxlength="50" id="override_cl_phone" /></td>
                                            <td></td>
                                            <td></td>
                                       </tr>
                                       <tr>
                                            <td class="bold">Backpage:</td>
                                            <td class="tb_r tb_r_padding"><input type="text" maxlength="50" id="override_bp_phone" /></td>
                                            <td></td>
                                            <td></td>
                                       </tr>
                                       <tr>
                                            <td class="bold">eBay:</td>
                                            <td class="tb_r tb_r_padding"><input type="text" maxlength="50" id="override_eb_phone" /></td>
                                            <td></td>
                                            <td></td>
                                       </tr>
                                       <tr id="tr_override_fone">
                                           <td valign="middle" style="padding-top: 5px" class="bold">Custom1:</td>
                                           <td valign="middle" class="tb_r tb_r_padding">
                                               <input type="text" maxlength="50" name="custom_1" id="custom_override" />
                                           </td>
                                           <td valign="middle" class="tb_r tb_r_padding">
                                               <span id="wrap_select"><select onchange="setCustomInput(event)" style="width: 140px; vertical-align: middle;" name="referer_sel" id="referer_sel"><option value="0">Select referral</option><option value="go">Google</option><option value="bi">Bing</option><option value="ya">Yahoo</option><option value="at">AutoTrader</option><option value="lf">Lemonfree</option><option value="cc">Cars.com</option><option value="va">Vast</option><option value="fb">Facebook</option><option value="tw">Twitter</option><option value="kj">Kijiji</option><option value="yt">YouTube</option><option value="dm">Demotores</option><option value="la">Localautosonline</option><option value="mt">MotorTrader</option><option value="ga">Google Adwords</option><option value="gt">Gumtree.co.za</option><option value="mz">MotorTrader.co.za</option><option value="tr">Trovit</option><option value="mi">Mitula</option><option value="ol">OLX</option><option value="ml">MercadoLibre</option><option value="af">AutoFocusLLC</option><option value="ms">Myspace</option><option value="dg">Digg</option><option value="li">Linkedin</option><option value="dl">Delicious</option><option value="fl">Flickr</option><option value="pi">Pinterest</option><option value="tz">AutoTrader.co.za</option><option value="cr">CRM</option><option value="ac">ADs&amp;Coupons</option><option value="do">Donkiz</option><option value="re">Reddit</option><option value="lo">Locanto</option><option value="ev">Everycar</option><option value="custom">Custom</option></select></span>
                                           </td>
                                           <td valign="middle" class="tb_r tb_r_padding">
                                               <span id="sp_wrp_input"><input type="text" class="ui-state-disabled" style="width: 120px; vertical-align: middle;" maxlength="50" id="referer_url" disabled="disabled" /></span>
                                               <span style="display: inline-block; width: 100px" id="ref_url_cont">
                                                   <span style="display: none" id="wraper_ref_id">[_rfc_<span id="referer_id"></span>]</span>
                                                   <span style="display: none" id="wraper_ref_code">[_rf_<span id="referer_code"></span>]</span>
                                               </span>
                                               <span style="vertical-align: middle;" class="gl_button" onclick="addCustomOverridePhone(event)">
                                               <span style="padding: 0px 4px"><a style="display: block; height: 24px;" class="button-style b_add" href="#"></a></span>
                                               </span>
                                               <span style="vertical-align: middle;" class="gl_button" onclick="removeCustomOverridePhone(event)">
                                                   <span style="padding: 0px 4px"><a style="display: block; height: 24px;" class="button-style b_delete" href="#"></a></span>
                                               </span>
                                           </td>
                                       </tr>
                                   </tbody></table>
                                   </form>
                                </div>


                                <div style="display: none; min-height: 100px" id="ax_tab3">
                                    <div id="geoip_phones">
                                    </div>
                                    <div style="height:26px;">
                                    <span class="gl_button alignRight" id="add_geoip_phone"><span><a class="button-style b_add" href="javascript:void(0);">Add Phone</a></span></span>
                                    </div>
                                </div>

                                <div style="display: none" id="ax_tab4">
                                    <form id="auto_reports_form">
                                        <table>
                                            <tbody><tr>
                                                <td style="padding-left: 6px;">
                                                    <table style="width: 343px;">
                                                        <tbody><tr>
                                                            <td> </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="font-weight: bold;">Autocheck</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2"><hr /></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 125px;" class="bold notranslate">Show Report:</td>
                                                            <td style="width: 218px;" class="tb_r tb_r_padding">
                                                                <select id="au_show">
                                                                    <option value="0">Default</option>
                                                                    <option value="2">Yes</option>
                                                                    <option value="1">No</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 125px;" class="bold notranslate">Login:</td>
                                                            <td style="width: 218px;" class="tb_r tb_r_padding"><input type="text" maxlength="8" id="au_login" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 125px;" class="bold notranslate">Password:</td>
                                                            <td style="width: 218px;" class="tb_r tb_r_padding">
                                                                <a style="display: none;" id="changePass" href="javascript:void(0);">Change Password</a>
                                                                <input type="password" placeholder="Type password" maxlength="64" id="au_password" />
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 125px;" class="bold notranslate">Key:</td>
                                                            <td style="width: 218px;" class="tb_r tb_r_padding"><input type="text" maxlength="8" id="au_key" /></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 125px;"></td>
                                                            <td>
                                                                <a id="clearInfo" href="javascript:void(0);">Clear Authorization Information</a>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td> </td>
                                                        </tr>
                                                    </tbody></table>
                                                </td>
                                                <td valign="top" style="padding-left: 32px;">
                                                    <table style="width: 343px;">
                                                        <tbody><tr>
                                                           <td> </td>
                                                       </tr>
                                                       <tr>
                                                           <td style="font-weight: bold;">Carfax</td>
                                                       </tr>
                                                       <tr>
                                                           <td colspan="2"><hr /></td>
                                                       </tr>
                                                       <tr>
                                                           <td style="width: 125px;" class="bold notranslate">Show Report:</td>
                                                           <td style="width: 218px;" class="tb_r tb_r_padding">
                                                               <select id="ca_show">
                                                                   <option value="0">Default</option>
                                                                   <option value="2">Yes</option>
                                                                   <option value="1">No</option>
                                                               </select>
                                                           </td>
                                                       </tr>
                                                       <tr>
                                                           <td style="width: 125px; vertical-align: top; padding-top: 6px;" class="bold">
                                                               ID:
                                                           </td>
                                                           <td style="width: 218px;" class="tb_r tb_r_padding">
                                                               <input type="text" maxlength="8" name="carfax_login" id="ca_login" />
                                                           </td>
                                                       </tr>
                                                   </tbody></table>
                                                </td>
                                            </tr>
                                        </tbody></table>
                                    </form>
                                </div>

                            </div>
                            <div style="display:none;overflow: auto; height: 300px;" id="user_editor_tab4_content">
                                <span class="mod_Access">
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('#user_editor_access_rights input:checkbox').attr('checked','checked');" class="button-style b_add" href="javascript:void(0);">Check All</a></span>
                                    </span>
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('#user_editor_access_rights input:checkbox').removeAttr('checked');" class="button-style b_minus" href="javascript:void(0);">Uncheck All</a></span>
                                    </span>
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('.block').show('fast');$('.go').attr('src','/images/arrow_bottom.png');" class="button-style b_update" href="javascript:void(0);">Expand All</a></span>
                                    </span>
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('.block').hide('fast'); $('.go').attr('src','/images/arrow_right.png');" class="button-style b_upload" href="javascript:void(0);">Collapse All</a></span>
                                    </span>
                                    <div class="clear"></div>
                                </span>
                                <div id="user_editor_access_rights">
                                    <div class="mod_Access"><div onclick="ExpandCollapse(1)" class="access_group"><img src="/images/arrow_right.png" id="go_1" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Inventory</span></div><div style="display:none" id="block_1" class="block"><input type="checkbox" id="bg_custom_warranty_type" /> <label for="bg_custom_warranty_type">BG Custom Warranty Type</label><br /><input type="checkbox" id="inventory_backup" /> <label for="inventory_backup">Backup Inventory</label><br /><input type="checkbox" id="inventory_disable_automatic_vehicle_reassignment" /> <label for="inventory_disable_automatic_vehicle_reassignment">Disable Automatic Vehicle Reassignment</label><br /><input type="checkbox" id="admin_vin_decoder_disabled" /> <label for="admin_vin_decoder_disabled">Disable VIN Decoder</label><br /><input type="checkbox" id="inventory_list" /> <label for="inventory_list">Inventory</label><br /><input type="checkbox" id="inventory_edit_fields" /> <label for="inventory_edit_fields">Inventory Edit Fields</label><br /><input type="checkbox" id="inventory_reports" /> <label for="inventory_reports">Inventory reports</label><br /><input type="checkbox" id="admin_mmcode_decoder" /> <label for="admin_mmcode_decoder">M&amp;M Code Decoder</label><br /><input type="checkbox" id="inventory_tools_make_a_show" /> <label for="inventory_tools_make_a_show">Make A Show</label><br /><input type="checkbox" id="inventory_data_import_quick" /> <label for="inventory_data_import_quick">Quick Import (TruckPaper is default)</label><br /><input type="checkbox" id="inventory_data_import_quick_csv" /> <label for="inventory_data_import_quick_csv">Quick Import - CSV|XML addon (TruckPaper must be enabled first)</label><br /><input type="checkbox" id="inventory_recycle_bin" /> <label for="inventory_recycle_bin">Recycle Bin</label><br /><input type="checkbox" id="inventory_take_down_price" /> <label for="inventory_take_down_price">Take Down Price</label><br /><input type="checkbox" id="inventory_upload_wizard" /> <label for="inventory_upload_wizard">Upload Wizard</label><br /><input type="checkbox" id="inventory_vehicle_condition" /> <label for="inventory_vehicle_condition">Vehicle Condition</label><br /><input type="checkbox" id="inventory_vehicle_video" /> <label for="inventory_vehicle_video">Vehicle Video</label><br /><input type="checkbox" id="inventory_history" /> <label for="inventory_history">View History of Changes (adm)</label><br /><input type="checkbox" id="inventory_tools_warranty_sticker" /> <label for="inventory_tools_warranty_sticker">Warranty Sticker</label><br /><input type="checkbox" id="inventory_tools_window_sticker" /> <label for="inventory_tools_window_sticker">Window Sticker</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(2)" class="access_group"><img src="/images/arrow_right.png" id="go_2" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Buyers Assist</span></div><div style="display:none" id="block_2" class="block"><input type="checkbox" id="inventory_vehicle_autocheck" /> <label for="inventory_vehicle_autocheck">Autocheck (Applicable for Root Users only)</label><br /><input type="checkbox" id="inventory_vehicle_carfax" /> <label for="inventory_vehicle_carfax">Carfax (Applicable for Root Users only)</label><br /><input type="checkbox" id="settings_dealer_review" /> <label for="settings_dealer_review">Review Dealer (agg)</label><br /><input type="checkbox" id="settings_vehicle_review" /> <label for="settings_vehicle_review">Review Vehicle (agg)</label><br /><input type="checkbox" id="inventory_vehicle_spin360" /> <label for="inventory_vehicle_spin360">Vehicle 360 degrees Spin (Vehicle Details addon)</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(3)" class="access_group"><img src="/images/arrow_right.png" id="go_3" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Settings Website</span></div><div style="display:none" id="block_3" class="block"><input type="checkbox" id="settings_third_party" /> <label for="settings_third_party">3rd Party (adm)</label><br /><input type="checkbox" id="addon_site_guard" /> <label for="addon_site_guard">DWS Password Locker (agg)</label><br /><input type="checkbox" id="sys_login" /> <label for="sys_login">Dealer Login</label><br /><input type="checkbox" id="settings_dealership" /> <label for="settings_dealership">Dealership Settings</label><br /><input type="checkbox" id="addon_dynamic_menu" /> <label for="addon_dynamic_menu">Dynamic Menu</label><br /><input type="checkbox" id="settings_email" /> <label for="settings_email">Email Settings</label><br /><input type="checkbox" id="settings_leads_email" /> <label for="settings_leads_email">Leads Email</label><br /><input type="checkbox" id="settings_leads_email_custom" /> <label for="settings_leads_email_custom">Leads Email CUSTOM</label><br /><input type="checkbox" id="addon_market_iq" /> <label for="addon_market_iq">Market IQ</label><br /><input type="checkbox" id="addon_news" /> <label for="addon_news">News</label><br /><input type="checkbox" id="sys_sites_management" /> <label for="sys_sites_management">Sites Management (agg)</label><br /><input type="checkbox" id="settings_staff" /> <label for="settings_staff">Staff Settings</label><br /><input type="checkbox" id="settings_website" /> <label for="settings_website">Website Settings</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(4)" class="access_group"><img src="/images/arrow_right.png" id="go_4" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Settings Users</span></div><div style="display:none" id="block_4" class="block"><input type="checkbox" id="sys_batch_user" /> <label for="sys_batch_user">Batch User Processing</label><br /><input type="checkbox" id="sys_user_management_inventory_delegation" /> <label for="sys_user_management_inventory_delegation">Inventory Delegation</label><br /><input type="checkbox" id="sys_assign_perm" /> <label for="sys_assign_perm">Re-Assign Vehicles</label><br /><input type="checkbox" id="sys_relogin" /> <label for="sys_relogin">Relogin (Login as sub user)</label><br /><input type="checkbox" id="sys_user_management" /> <label for="sys_user_management">User Management</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(5)" class="access_group"><img src="/images/arrow_right.png" id="go_5" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Analytics (home page)</span></div><div style="display:none" id="block_5" class="block"><input type="checkbox" id="inventory_metrics" /> <label for="inventory_metrics">DashBoard Metrics</label><br /><input type="checkbox" id="ei_reports" /> <label for="ei_reports">Statistical Reports and Summary (Backpage, Craigslist, eBay)</label><br /><input type="checkbox" id="addon_custom_analitycs" /> <label for="addon_custom_analitycs">Website Analytics [Piwik] (adm)</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(6)" class="access_group"><img src="/images/arrow_right.png" id="go_6" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Exchange</span></div><div style="display:none" id="block_6" class="block"><input type="checkbox" id="dfi_export" /> <label for="dfi_export">DFI Export (adm)</label><br /><input type="checkbox" id="inventory_data_import_simple" /> <label for="inventory_data_import_simple">DFI Import (adm)</label><br /><input type="checkbox" id="dfi_import" /> <label for="dfi_import">DFI Scheduled Tasks (adm)</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(7)" class="access_group"><img src="/images/arrow_right.png" id="go_7" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Lead Generation Systems</span></div><div style="display:none" id="block_7" class="block"><input type="checkbox" id="ei_backpage" /> <label for="ei_backpage">Backpage</label><br /><input type="checkbox" id="ei_backpage2" /> <label for="ei_backpage2">Backpage (BP2 - Make-A-Template)</label><br /><input type="checkbox" id="ei_craigslist" /> <label for="ei_craigslist">Craigslist (CL1 - manual version with uploading to PC)</label><br /><input type="checkbox" id="ei_craigslist2" /> <label for="ei_craigslist2">Craigslist (CL2 - CL1 + automated images and map, no credit card and no accounts)</label><br /><input type="checkbox" id="ei_craigslist3" /> <label for="ei_craigslist3">Craigslist (CL3 - CL2 + credit card and accounts)</label><br /><input type="checkbox" id="ei_craigslist4" /> <label for="ei_craigslist4">Craigslist (CL4 - CL3 + full templates and image customization) (adm)</label><br /><input type="checkbox" id="ei_ebay" /> <label for="ei_ebay">Ebay</label><br /><input type="checkbox" id="ei_googleadwords" /> <label for="ei_googleadwords">Googleadword (adm)</label><br /><input type="checkbox" id="ei_gumtree" /> <label for="ei_gumtree">Gumtree</label><br /><input type="checkbox" id="ei_pinterest" /> <label for="ei_pinterest">Pinterest</label><br /><input type="checkbox" id="ei_twitter" /> <label for="ei_twitter">Twitter (adm)</label><br /><input type="checkbox" id="ei_wanelo" /> <label for="ei_wanelo">Wanelo</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(8)" class="access_group"><img src="/images/arrow_right.png" id="go_8" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Customers</span></div><div style="display:none" id="block_8" class="block"><input type="checkbox" id="crm" /> <label for="crm">CRM</label><br /><input type="checkbox" id="crm_leads" /> <label for="crm_leads">Leads (CRM)</label><br /><input type="checkbox" id="crm_livehelp" /> <label for="crm_livehelp">LiveHelp</label><br /><input type="checkbox" id="inventory_testimonials" /> <label for="inventory_testimonials">Testimonials</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(9)" class="access_group"><img src="/images/arrow_right.png" id="go_9" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Tools</span></div><div style="display:none" id="block_9" class="block"><input type="checkbox" id="addon_coupons_banners" /> <label for="addon_coupons_banners">ADs &amp; Coupons (widget required)</label><br /><input type="checkbox" id="addon_canned_images" /> <label for="addon_canned_images">Canned Images</label><br /><input type="checkbox" id="addon_dealer_rating" /> <label for="addon_dealer_rating">Dealer Score (DMS)</label><br /><input type="checkbox" id="addon_storage" /> <label for="addon_storage">Dealer Storage</label><br /><input type="checkbox" id="sys_discount" /> <label for="sys_discount">Discount</label><br /><input type="checkbox" id="inventory_tools_etch_a_word_2" /> <label for="inventory_tools_etch_a_word_2">Etch-A-Word </label><br /><input type="checkbox" id="addon_make_a_banner" /> <label for="addon_make_a_banner">Make-A-Banner</label><br /><input type="checkbox" id="addon_make_a_coupon" /> <label for="addon_make_a_coupon">Make-A-Coupon</label><br /><input type="checkbox" id="addon_make_a_form" /> <label for="addon_make_a_form">Make-A-Form</label><br /><input type="checkbox" id="addon_make_a_form_builder" /> <label for="addon_make_a_form_builder">Make-A-Form (FormBuilder)</label><br /><input type="checkbox" id="addon_make_a_form_management" /> <label for="addon_make_a_form_management">Make-A-Form (Template Management)</label><br /><input type="checkbox" id="addon_make_a_form_stickers" /> <label for="addon_make_a_form_stickers">Make-A-Form (Window Stickers Export)</label><br /><input type="checkbox" id="addon_make_a_page" /> <label for="addon_make_a_page">Make-A-Page</label><br /><input type="checkbox" id="addon_make_a_page_schedule" /> <label for="addon_make_a_page_schedule">Make-A-Page (Scheduled Activation) </label><br /><input type="checkbox" id="addon_make_a_page_responsive" /> <label for="addon_make_a_page_responsive">Make-A-Page 1.5 (responsive)</label><br /><input type="checkbox" id="addon_make_a_page_2" /> <label for="addon_make_a_page_2">Make-A-Page 2.0 (development)</label><br /><input type="checkbox" id="addon_make_a_page_custom_pages" /> <label for="addon_make_a_page_custom_pages">Make-A-Page Custom Pages</label><br /><input type="checkbox" id="addon_make_a_template" /> <label for="addon_make_a_template">Make-A-Template</label><br /><input type="checkbox" id="addon_make_a_template_containers" /> <label for="addon_make_a_template_containers">Make-A-Template (Containers)</label><br /><input type="checkbox" id="addon_make_a_template_stickers" /> <label for="addon_make_a_template_stickers">Make-A-Template (Window Stickers Export)</label><br /><input type="checkbox" id="addon_notify" /> <label for="addon_notify">Notify Profiles</label><br /><input type="checkbox" id="addon_photobox" /> <label for="addon_photobox">Photobox</label><br /><input type="checkbox" id="addon_surveys" /> <label for="addon_surveys">Surveys</label><br /><input type="checkbox" id="addon_video_manager" /> <label for="addon_video_manager">Video Manager</label><br /><input type="checkbox" id="addon_webmail" /> <label for="addon_webmail">WebMail</label><br /><input type="checkbox" id="addon_widget_builder" /> <label for="addon_widget_builder">Widget Builder</label><br /><input type="checkbox" id="addon_widget_builder_2" /> <label for="addon_widget_builder_2">Widget Builder 2 (Responsive)</label><br /><input type="checkbox" id="ei_ebrochure2" /> <label for="ei_ebrochure2">e-Magazine (Make-A-Template support)</label><br /><input type="checkbox" id="addon_ebrochure_stickers" /> <label for="addon_ebrochure_stickers">eBrochure Stickers (Display standard eBrochure templates in Window Stickers list)</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(10)" class="access_group"><img src="/images/arrow_right.png" id="go_10" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Admin</span></div><div style="display:none" id="block_10" class="block"><input type="checkbox" id="sys_log" /> <label for="sys_log">Adm menu (Event Log, Cron, SVN, Trim mngr, VIN list mngr, Deploy Changes)</label><br /><input type="checkbox" id="sys_warrantymanager" /> <label for="sys_warrantymanager">Buyers Guide Auto-Report</label><br /><input type="checkbox" id="sys_calltrackingsummarytwilio" /> <label for="sys_calltrackingsummarytwilio">Call Tracking Summary</label><br /><input type="checkbox" id="sys_copyrights" /> <label for="sys_copyrights">Copyrights Override (adm)</label><br /><input type="checkbox" id="sys_dealers_management" /> <label for="sys_dealers_management">Dealers Management (adm)</label><br /><input type="checkbox" id="sys_email_dealers_management" /> <label for="sys_email_dealers_management">Email Management</label><br /><input type="checkbox" id="sys_livehelp" /> <label for="sys_livehelp">Live Help  (adm)</label><br /><input type="checkbox" id="sys_lookup_editors" /> <label for="sys_lookup_editors">Lookup Editors (adm)</label><br /><input type="checkbox" id="sys_config_editors" /> <label for="sys_config_editors">Other Admin Tools (park,promo, override, etc...) (adm)</label><br /><input type="checkbox" id="admin_shareicons" /> <label for="admin_shareicons">Share It Icons Settings (adm)</label><br /><input type="checkbox" id="sys_edit_stats_services" /> <label for="sys_edit_stats_services">Statistics Sources (adm)</label><br /><input type="checkbox" id="sys_stock_images" /> <label for="sys_stock_images">Stock images editor (adm)</label><br /><input type="checkbox" id="sys_testcase" /> <label for="sys_testcase">Test Case (adm)</label><br /><input type="checkbox" id="sys_vehicle_specification" /> <label for="sys_vehicle_specification">Vehicle Specification</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(11)" class="access_group"><img src="/images/arrow_right.png" id="go_11" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Merchant Services</span></div><div style="display:none" id="block_11" class="block"><input type="checkbox" id="sys_accounting" /> <label for="sys_accounting">Merchant Settings</label><br /><input type="checkbox" id="addon_payment" /> <label for="addon_payment">Payment</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(12)" class="access_group"><img src="/images/arrow_right.png" id="go_12" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Reports (Admin)</span></div><div style="display:none" id="block_12" class="block"><input type="checkbox" id="sys_craigslistreportpost" /> <label for="sys_craigslistreportpost">CL Posting Report</label><br /><input type="checkbox" id="taw_leads_summary_export" /> <label for="taw_leads_summary_export">Leads Summary Export</label><br /><input type="checkbox" id="taw_leads_summary" /> <label for="taw_leads_summary">Summary of Calls (adm)</label><br /><input type="checkbox" id="taw_leads_summary_email" /> <label for="taw_leads_summary_email">Summary of Email (adm)</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(13)" class="access_group"><img src="/images/arrow_right.png" id="go_13" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Call Tracking</span></div><div style="display:none" id="block_13" class="block"><input type="checkbox" id="twilio_invoice_acl" /> <label for="twilio_invoice_acl">Advanced Summary of Calls (adm)</label><br /><input type="checkbox" id="twilio_basic_acl" /> <label for="twilio_basic_acl">Basic Summary of Calls</label><br /><input type="checkbox" id="twilio_settings_acl" /> <label for="twilio_settings_acl">Settings</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(14)" class="access_group"><img src="/images/arrow_right.png" id="go_14" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Auction Services</span></div><div style="display:none" id="block_14" class="block"><input type="checkbox" id="auctions_vcr" /> <label for="auctions_vcr">VIR (Vehicle Inspection Reports + Removal Service)</label><br /><input type="checkbox" id="auctions_vcr_admin" /> <label for="auctions_vcr_admin">VIR - Administration -  "Default Settings" (must be enabled to use addons)</label><br /><input type="checkbox" id="auctions_vcr_admin_pipelines" /> <label for="auctions_vcr_admin_pipelines">VIR - Administration - "Automated Removal of Sold Vehicles" Addon</label><br /><input type="checkbox" id="auctions_vcr_admin_pricing" /> <label for="auctions_vcr_admin_pricing">VIR - Administration - "Pricing Options" Addon</label><br /><input type="checkbox" id="auctions_vcr_admin_rules" /> <label for="auctions_vcr_admin_rules">VIR - Administration - "Rules and Filters" Addon</label><br /><input type="checkbox" id="auctions_vcr_reportseditor" /> <label for="auctions_vcr_reportseditor">VIR - Report Editor</label><br /></div></div><div class="mod_Access"><div onclick="ExpandCollapse(15)" class="access_group"><img src="/images/arrow_right.png" id="go_15" class="go" style="margin-right: 5px;" /><span style="cursor: pointer">Slingshot2 System</span></div><div style="display:none" id="block_15" class="block"><input type="checkbox" id="slingshot2_advanced" /> <label for="slingshot2_advanced">Slingshot2: Advanced Upload Wizard + Inventory</label><br /><input type="checkbox" id="slingshot2_compliance" /> <label for="slingshot2_compliance">Slingshot2: Compliance</label><br /><input type="checkbox" id="slingshot2_lvs" /> <label for="slingshot2_lvs">Slingshot2: LVS</label><br /><input type="checkbox" id="slingshot2_obdii" /> <label for="slingshot2_obdii">Slingshot2: OBDII Connectivity</label><br /><input type="checkbox" id="slingshot2_quickupload" /> <label for="slingshot2_quickupload">Slingshot2: Quick Upload Wizard</label><br /></div></div>                                </div>
                                <br />
                                <div class="child_update"><input type="checkbox" id="access_child_update" /> <label for="access_child_update">Set this access rights to sub-users</label></div>
                                <span class="mod_Access">
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('#user_editor_access_rights input:checkbox').attr('checked','checked');" class="button-style b_add" href="javascript:void(0);">Check All</a></span>
                                    </span>
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('#user_editor_access_rights input:checkbox').removeAttr('checked');" class="button-style b_minus" href="javascript:void(0);">Uncheck All</a></span>
                                    </span>
                                     <span class="gl_button alignLeft">
                                        <span><a onclick="$('.block').show('fast');$('.go').attr('src','/images/arrow_bottom.png');" class="button-style b_update" href="javascript:void(0);">Expand All</a></span>
                                    </span>
                                    <span class="gl_button alignLeft">
                                        <span><a onclick="$('.block').hide('fast'); $('.go').attr('src','/images/arrow_right.png');" class="button-style b_upload" href="javascript:void(0);">Collapse All</a></span>
                                    </span>
                                    <div class="clear"></div>
                                </span>
                            </div>
                            <div style="display:none;overflow: auto; height: 300px;" id="user_editor_tab5_content">
                                <table>
    <tbody><tr>
        <td>
            Logo:
        </td>
        <td>
            <img width="180" id="logoImg" src="" />
            <div style="width:180px; margin:5px 0px 0px 0px; text-align:right;">
                <object width="28" height="28" class="swfupload" title="" data="/js/swfupload/swfupload.swf?preventswfcaching=1486464992580" type="application/x-shockwave-flash" id="SWFUpload_0"><param value="transparent" name="wmode" /><param value="/js/swfupload/swfupload.swf?preventswfcaching=1486464992580" name="movie" /><param value="high" name="quality" /><param value="false" name="menu" /><param value="always" name="allowScriptAccess" /><param value="movieName=SWFUpload_0&amp;uploadURL=%2Fdms%2Fsettings%2Fusers%2Fajax&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=&amp;params=oper%3DuploadPhoto%26amp%3Btype%3Dlogo%26amp%3BPHPSESSID%3D5b16b09ea0065ec0d39f336b2469ed01&amp;filePostName=Filedata&amp;fileTypes=*.jpeg%3B*.jpg%3B%20*.png%3B%20*.gif%3B&amp;fileTypesDescription=Images&amp;fileSizeLimit=1%20MB&amp;fileUploadLimit=999&amp;fileQueueLimit=0&amp;debugEnabled=false&amp;buttonImageURL=%2Fimages%2FimgUpload.png&amp;buttonWidth=28&amp;buttonHeight=28&amp;buttonText=&amp;buttonTitle=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-110&amp;buttonDisabled=false&amp;buttonCursor=-2" name="flashvars" /></object>
                <img title="Delete Photo" alt="Delete Photo" id="deleteLogo" src="/images/imgDel.png" />
            </div>
        </td>
        <td>
            <table>
                <tbody><tr>
                    <td class="notranslate">For the best results on forms use 250x80px logo.</td>
                </tr>
                <tr>
                    <td class="notranslate">Logo file size limit: 1 MB</td>
                </tr>
                <tr>
                    <td class="notranslate">Logo file types: *.jpeg; *.jpg; *.png; *.gif</td>
                </tr>
            </tbody></table>
        </td>
    </tr>
    <tr>
        <td class="notranslate">Logo/Banner<br />for Mobile Phones:</td>
        <td>
            <img width="180" id="logoMobileImg" src="" />
            <div style="width:180px; margin:5px 0px 0px 0px; text-align:right;">
                <object width="28" height="28" class="swfupload" title="" data="/js/swfupload/swfupload.swf?preventswfcaching=1486464992608" type="application/x-shockwave-flash" id="SWFUpload_1"><param value="transparent" name="wmode" /><param value="/js/swfupload/swfupload.swf?preventswfcaching=1486464992608" name="movie" /><param value="high" name="quality" /><param value="false" name="menu" /><param value="always" name="allowScriptAccess" /><param value="movieName=SWFUpload_1&amp;uploadURL=%2Fdms%2Fsettings%2Fusers%2Fajax&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=&amp;params=oper%3DuploadPhoto%26amp%3Btype%3Dlogo_mobile%26amp%3BPHPSESSID%3D5b16b09ea0065ec0d39f336b2469ed01&amp;filePostName=Filedata&amp;fileTypes=*.jpeg%3B*.jpg%3B%20*.png%3B%20*.gif%3B&amp;fileTypesDescription=Images&amp;fileSizeLimit=1%20MB&amp;fileUploadLimit=999&amp;fileQueueLimit=0&amp;debugEnabled=false&amp;buttonImageURL=%2Fimages%2FimgUpload.png&amp;buttonWidth=28&amp;buttonHeight=28&amp;buttonText=&amp;buttonTitle=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-110&amp;buttonDisabled=false&amp;buttonCursor=-2" name="flashvars" /></object>
                <img title="Delete Logo Mobile" alt="Delete Logo Mobile" id="deleteMobileLogo" src="/images/imgDel.png" />
            </div>
        </td>
        <td><table>
                <tbody><tr>
                    <td class="notranslate">Logo/Banner for Mobile Phones file size limit: 1 MB</td>
                </tr>
                <tr>
                    <td class="notranslate">Logo/Banner for Mobile Phones file types: *.jpeg; *.jpg; *.png; *.gif</td>
                </tr>
            </tbody></table></td>
    </tr>
    <tr>
        <td class="notranslate">Personal Photo:</td>
        <td>
            <img width="180" id="personalPhotoImg" src="" />
            <div style="width:180px; margin:5px 0px 0px 0px; text-align:right;">
                <object width="28" height="28" class="swfupload" title="" data="/js/swfupload/swfupload.swf?preventswfcaching=1486464992687" type="application/x-shockwave-flash" id="SWFUpload_4"><param value="transparent" name="wmode" /><param value="/js/swfupload/swfupload.swf?preventswfcaching=1486464992687" name="movie" /><param value="high" name="quality" /><param value="false" name="menu" /><param value="always" name="allowScriptAccess" /><param value="movieName=SWFUpload_4&amp;uploadURL=%2Fdms%2Fsettings%2Fusers%2Fajax&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=&amp;params=oper%3DuploadPhoto%26amp%3Btype%3Dpersonal_photo%26amp%3BPHPSESSID%3D5b16b09ea0065ec0d39f336b2469ed01&amp;filePostName=Filedata&amp;fileTypes=*.jpeg%3B*.jpg%3B%20*.png%3B%20*.gif%3B&amp;fileTypesDescription=Images&amp;fileSizeLimit=2%20MB&amp;fileUploadLimit=999&amp;fileQueueLimit=0&amp;debugEnabled=false&amp;buttonImageURL=%2Fimages%2FimgUpload.png&amp;buttonWidth=28&amp;buttonHeight=28&amp;buttonText=&amp;buttonTitle=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-110&amp;buttonDisabled=false&amp;buttonCursor=-2" name="flashvars" /></object>
                <img title="Delete Personal Photo" alt="Delete Personal Photo" id="deletePersonalPhoto" src="/images/imgDel.png" />
            </div>
        </td>
        <td>
            <table>
                <tbody><tr>
                    <td class="notranslate">Personal Photo file size limit: 2 MB</td>
                </tr>
                <tr>
                    <td class="notranslate">Personal Photo file types: *.jpeg; *.jpg; *.png; *.gif</td>
                </tr>
            </tbody></table>
        </td>
    </tr>
    <tr id="tr_overlay">
        <td class="notranslate">Overlay:</td>
        <td>
            <img width="180" id="overlayImg" src="" />
            <div style="width:180px; margin:5px 0px 0px 0px; text-align:right;">
                <object width="28" height="28" class="swfupload" title="" data="/js/swfupload/swfupload.swf?preventswfcaching=1486464992637" type="application/x-shockwave-flash" id="SWFUpload_2"><param value="transparent" name="wmode" /><param value="/js/swfupload/swfupload.swf?preventswfcaching=1486464992637" name="movie" /><param value="high" name="quality" /><param value="false" name="menu" /><param value="always" name="allowScriptAccess" /><param value="movieName=SWFUpload_2&amp;uploadURL=%2Fdms%2Fsettings%2Fusers%2Fajax&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=&amp;params=oper%3DuploadPhoto%26amp%3Btype%3Doverlay_image%26amp%3BPHPSESSID%3D5b16b09ea0065ec0d39f336b2469ed01&amp;filePostName=Filedata&amp;fileTypes=*.jpeg%3B*.jpg%3B%20*.png%3B%20*.gif%3B&amp;fileTypesDescription=Images&amp;fileSizeLimit=2%20MB&amp;fileUploadLimit=999&amp;fileQueueLimit=0&amp;debugEnabled=false&amp;buttonImageURL=%2Fimages%2FimgUpload.png&amp;buttonWidth=28&amp;buttonHeight=28&amp;buttonText=&amp;buttonTitle=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-110&amp;buttonDisabled=false&amp;buttonCursor=-2" name="flashvars" /></object>
                <img title="Delete Photo" alt="Delete Photo" id="deleteOverlay" src="/images/imgDel.png" />
            </div>
        </td>
        <td> <span>Range setting:</span><input type="text" value="1" id="overlay_image_settings" /></td>
    </tr>
    <tr>
        <td class="notranslate">Certified:</td>
        <td>
            <img width="180" id="certifiedImg" src="" />
            <div style="width:180px; margin:5px 0px 0px 0px; text-align:right;">
                <object width="28" height="28" class="swfupload" title="" data="/js/swfupload/swfupload.swf?preventswfcaching=1486464992661" type="application/x-shockwave-flash" id="SWFUpload_3"><param value="transparent" name="wmode" /><param value="/js/swfupload/swfupload.swf?preventswfcaching=1486464992661" name="movie" /><param value="high" name="quality" /><param value="false" name="menu" /><param value="always" name="allowScriptAccess" /><param value="movieName=SWFUpload_3&amp;uploadURL=%2Fdms%2Fsettings%2Fusers%2Fajax&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=&amp;params=oper%3DuploadPhoto%26amp%3Btype%3Dcertified%26amp%3BPHPSESSID%3D5b16b09ea0065ec0d39f336b2469ed01&amp;filePostName=Filedata&amp;fileTypes=*.jpeg%3B*.jpg%3B%20*.png%3B%20*.gif%3B&amp;fileTypesDescription=Images&amp;fileSizeLimit=2%20MB&amp;fileUploadLimit=999&amp;fileQueueLimit=0&amp;debugEnabled=false&amp;buttonImageURL=%2Fimages%2FimgUpload.png&amp;buttonWidth=28&amp;buttonHeight=28&amp;buttonText=&amp;buttonTitle=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-110&amp;buttonDisabled=false&amp;buttonCursor=-2" name="flashvars" /></object>
                <img title="Delete Photo" alt="Delete Photo" id="deleteCertified" src="/images/imgDel.png" />
            </div><br />
            <label><input type="checkbox" class="notranslate" name="iscertified" /> Certified</label>
        </td>
        <td></td>
    </tr>
            <tr>
            <td colspan="4">
                <hr />
            </td>
        </tr>
        <tr id="tr_qr_fusing">
            <td>QR Fusing*:</td>
            <td colspan="2">
                <table>
                    <tbody>
                        <tr>
                            <td>Is active:</td>
                            <td class="tb_r tb_r_padding w_110"><input type="checkbox" id="chb_qr_is_active" /></td>
                            <td>Min image height for QR fusing:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <input type="text" id="inp_qr_min_h" />
                            </td>
                        </tr>
                        <tr>
                            <td>Url type:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_url_type" name="select_qr_url_type">
    <option label="Default" value="default">Default</option>
</select>                            </td>
                            <td>Work mode:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_work_mode" name="select_qr_work_mode">
    <option label="Default" value="default">Default</option>
</select>                            </td>
                        </tr>
                        <tr>
                            <td>Horizontal alignment:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_horizontal_alignment" name="select_qr_horizontal_alignment">
    <option label="Left" value="left">Left</option>
    <option label="Center" value="center">Center</option>
    <option label="Right" value="right">Right</option>
</select>                            </td>
                            <td>Vertical alignment:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_vertical_alignment" name="select_qr_vertical_alignment">
    <option label="Top" value="top">Top</option>
    <option label="Middle" value="middle">Middle</option>
    <option label="Bottom" value="bottom">Bottom</option>
</select>                            </td>
                        </tr>
                        <tr>
                            <td>Border width:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_border_width" name="select_qr_border_width">
    <option label="None" value="0">None</option>
    <option label="1px" value="1">1px</option>
    <option label="2px" value="2">2px</option>
    <option label="3px" value="3">3px</option>
    <option label="5px" value="5">5px</option>
    <option label="10px" value="10">10px</option>
    <option label="15px" value="15">15px</option>
    <option label="20px" value="20">20px</option>
    <option label="30px" value="30">30px</option>
    <option label="50px" value="50">50px</option>
</select>                            </td>
                            <td>Border color:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_border_color" name="select_qr_border_color">
    <option label="Transparent" value="7FFFFFFF">Transparent</option>
    <option label="White" value="00FFFFFF">White</option>
    <option label="Transparent white" value="3FFFFFFF">Transparent white</option>
    <option label="Black" value="00000000">Black</option>
    <option label="Transparent black" value="3F000000">Transparent black</option>
</select>                            </td>
                        </tr>
                        <tr>
                            <td>Margin:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_margin" name="select_qr_margin">
    <option label="None" value="0">None</option>
    <option label="1px" value="1">1px</option>
    <option label="2px" value="2">2px</option>
    <option label="3px" value="3">3px</option>
    <option label="5px" value="5">5px</option>
    <option label="10px" value="10">10px</option>
    <option label="15px" value="15">15px</option>
    <option label="20px" value="20">20px</option>
    <option label="30px" value="30">30px</option>
    <option label="50px" value="50">50px</option>
</select>                            </td>
                            <td>Padding:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_padding" name="select_qr_padding">
    <option label="None" value="0">None</option>
    <option label="1px" value="1">1px</option>
    <option label="2px" value="2">2px</option>
    <option label="3px" value="3">3px</option>
    <option label="5px" value="5">5px</option>
    <option label="10px" value="10">10px</option>
    <option label="15px" value="15">15px</option>
    <option label="20px" value="20">20px</option>
    <option label="30px" value="30">30px</option>
    <option label="50px" value="50">50px</option>
</select>                            </td>
                        </tr>
                        <tr>
                            <td>Background color:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_background_color" name="select_qr_background_color">
    <option label="Transparent" value="7FFFFFFF">Transparent</option>
    <option label="White" value="00FFFFFF">White</option>
    <option label="Transparent white" value="3FFFFFFF">Transparent white</option>
    <option label="Black" value="00000000">Black</option>
    <option label="Transparent black" value="3F000000">Transparent black</option>
</select>                            </td>
                            <td>Foreground color:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <select 0="" id="select_qr_foreground_color" name="select_qr_foreground_color">
    <option label="Transparent" value="7FFFFFFF">Transparent</option>
    <option label="White" value="00FFFFFF">White</option>
    <option label="Transparent white" value="3FFFFFFF">Transparent white</option>
    <option label="Black" value="00000000">Black</option>
    <option label="Transparent black" value="3F000000">Transparent black</option>
</select>                            </td>
                        </tr>
                        <tr>
                            <td>Range setting:</td>
                            <td class="tb_r tb_r_padding w_110">
                                <input type="text" value="1-50" id="inp_qr_range_setting" />
                            </td>
                            <td> </td>
                            <td class="tb_r tb_r_padding w_110"> </td>
                        </tr>
                    </tbody>
                </table>
                <span class="notranslate">* After changes need to clear Images cache on Inventory Page DMS</span>
            </td>
        </tr>
    </tbody></table>                            </div>
                                                        <div style="display:none;overflow: auto; height: auto;" id="user_editor_tab6_content">
                                                                    <table>
                                        <tbody><tr>
                                            <td class="bold notranslate">
                                              This user is LiveHelp operator in department:
                                            </td>
                                            <td class="tb_r tb_r_padding">
                                                                                                <select style="height:auto;" multiple="multiple" id="lh_dep">
                                                    <option value="">none</option>
                                                    <option value="">(disabled)</option>                                                </select>
                                                </td>
                                        </tr>
                                    </tbody></table>
                                    
                            </div>
                                                        <div style="display:none; " id="user_editor_tab7_content">
                                       <span class="notranslate" style="color:red;">* Only first 5 active promo items will be shown on Dealer List, Inventory, Details widgets</span>
                                       <div>
                                       <span id="user_add_promotion" class="gl_button alignLeft">
                                                <span><a class="button-style b_add notranslate" href="javascript:void(0)">Add Promotion</a></span>
                                        </span>

                                        </div>
                                        <br />
                                        <br />
                                        <table class="text-align-center" id="list-promotion">
                                          <tbody><tr>

                                          </tr>
                                        </tbody></table>
                            </div>
                                                        <div id="user_editor_tab8_content">
                                <form id="user_editor_form">
                                    <div>
                <div class="externalAuction">
                <label>OVE</label>
                <hr />
                <span auction="OVE" class="user_editor_auction_save gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_save notranslate">
                            Save                        </a>
                    </span>
                </span>
                <span title="Will be reset to global ID for current user and all sub users" auction="OVE" class="user_editor_auction_clear gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_reset notranslate">
                            Reset to global                        </a>
                    </span>
                </span>
                <div style="vertical-align: middle">
                    <div style="float:left; margin-right:15px;">
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Seller Universal Number: </div> 
                                                        <input type="text" name="account_id" disabled="disabled" class="auctionInput OVE" />
                                                    </div>
                                        </div>
                    <label class="ex_auction_lab"><input type="checkbox" auction="OVE" class="changeAccount" /> Change </label>
                </div>
                
                <div style="clear:both;"></div>
            </div>
                        <div class="externalAuction">
                <label>OpenLane</label>
                <hr />
                <span auction="OPENL" class="user_editor_auction_save gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_save notranslate">
                            Save                        </a>
                    </span>
                </span>
                <span title="Will be reset to global ID for current user and all sub users" auction="OPENL" class="user_editor_auction_clear gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_reset notranslate">
                            Reset to global                        </a>
                    </span>
                </span>
                <div style="vertical-align: middle">
                    <div style="float:left; margin-right:15px;">
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Car Group Id: </div> 
                                                        <input type="text" name="car_group_id" disabled="disabled" class="auctionInput OPENL" />
                                                    </div>
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Organization Id: </div> 
                                                        <input type="text" name="organization_id" disabled="disabled" class="auctionInput OPENL" />
                                                    </div>
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Organization Name: </div> 
                                                        <input type="text" name="organization_name" disabled="disabled" class="auctionInput OPENL" />
                                                    </div>
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">SSO User: </div> 
                                                        <input type="text" name="sso_user" disabled="disabled" class="auctionInput OPENL" />
                                                    </div>
                                        </div>
                    <label class="ex_auction_lab"><input type="checkbox" auction="OPENL" class="changeAccount" /> Change </label>
                </div>
                
                <div style="clear:both;"></div>
            </div>
                        <div class="externalAuction">
                <label>Smart Auction</label>
                <hr />
                <span auction="SMART" class="user_editor_auction_save gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_save notranslate">
                            Save                        </a>
                    </span>
                </span>
                <span title="Will be reset to global ID for current user and all sub users" auction="SMART" class="user_editor_auction_clear gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_reset notranslate">
                            Reset to global                        </a>
                    </span>
                </span>
                <div style="vertical-align: middle">
                    <div style="float:left; margin-right:15px;">
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Dealer Id: </div> 
                                                        <input type="text" name="dealer_id" disabled="disabled" class="auctionInput SMART" />
                                                    </div>
                                        </div>
                    <label class="ex_auction_lab"><input type="checkbox" auction="SMART" class="changeAccount" /> Change </label>
                </div>
                
                <div style="clear:both;"></div>
            </div>
                        <div class="externalAuction">
                <label>WTG</label>
                <hr />
                <span auction="WTG" class="user_editor_auction_save gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_save notranslate">
                            Save                        </a>
                    </span>
                </span>
                <span title="Will be reset to global ID for current user and all sub users" auction="WTG" class="user_editor_auction_clear gl_button alignRight">
                    <span>
                        <a href="javascript:void(0);" class="button-style b_reset notranslate">
                            Reset to global                        </a>
                    </span>
                </span>
                <div style="vertical-align: middle">
                    <div style="float:left; margin-right:15px;">
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Dealer Id {SEARCH_TEXT}: </div> 
                                                        <input type="text" name="dealer_id" disabled="disabled" class="auctionInput WTG" />
                                                    </div>
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">URL: </div> 
                                                        <input type="text" name="wtg_url" disabled="disabled" class="auctionInput WTG" />
                                                    </div>
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">API (Items): </div> 
                                                        <input type="text" name="wtg_api_items" disabled="disabled" class="auctionInput WTG" />
                                                    </div>
                                            <div style="margin: 5px;">
                            <div class="auctionAccount">Variables: </div> 
                                                        <textarea name="wtg_variables" disabled="disabled" class="auctionInput WTG"></textarea>
                                                    </div>
                                        </div>
                    <label class="ex_auction_lab"><input type="checkbox" auction="WTG" class="changeAccount" /> Change </label>
                </div>
                
                <div style="clear:both;"></div>
            </div>
            </div>                                </form>
                            </div>
                                                                                        <div style="overflow: hidden;" id="user_editor_tab9_content">
                                    
<div>
    <div class="auction_marketplace">
        <table>
            <tbody>
            <tr>
                <td>
                    <table>
                        <tbody>
                        <tr>
                            <td colspan="2">
                                <legend><strong>Buyer Setting</strong></legend>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr />
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Buyer:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <select id="marketplace_buyer">
                                        <option value="0">No</option>
                                        <option value="1">Yes</option>
                                    </select>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Comments:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <select id="marketplace_form_comments">
                                        <option value="0">disabled</option>
                                        <option value="1">enabled</option>
                                    </select>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <div class="spacer"></div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <legend><strong>Spending Limit:</strong></legend>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr />
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Amount:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_amount" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Period:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <select id="marketplace_period">
                                        <option value="7">Week</option>
                                        <option value="14">Two Weeks</option>
                                        <option value="30">Month</option>
                                    </select>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2">
                                <div class="spacer"></div>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2">
                                <legend><strong>Documents Attached:</strong></legend>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr />
                            </td>
                        </tr>

                        
                                                                                <tr data-type="dealer_driver_license" class="user_attachment">
                                <td colspan="2">
                                    <div class="marketplace_param_caption bold notranslate">
                                        Dealer Driver's License:
                                    </div>
                                    <div class="notranslate">
                                        <a class="download_file" title="Download" href="javascript:void(0);"></a>
                                                                                    <div class="attachment-actions">
                                                <a class="upload_file" title="Upload File" href="javascript:void(0);">
                                                    <form enctype="multipart/form-data">
                                                        <input type="file" name="dealer_driver_license" />
                                                    </form>
                                                </a>
                                                <a class="delete_file" title="Delete File" href="javascript:void(0);"></a>
                                            </div>
                                                                                <span class="file_name">-</span>

                                                                                    <div class="clear"></div>
                                                                            </div>
                                    <br />
                                </td>
                            </tr>
                                                                                <tr data-type="bond_certificate" class="user_attachment">
                                <td colspan="2">
                                    <div class="marketplace_param_caption bold notranslate">
                                        Copy of the Bond Certificate:
                                    </div>
                                    <div class="notranslate">
                                        <a class="download_file" title="Download" href="javascript:void(0);"></a>
                                                                                    <div class="attachment-actions">
                                                <a class="upload_file" title="Upload File" href="javascript:void(0);">
                                                    <form enctype="multipart/form-data">
                                                        <input type="file" name="bond_certificate" />
                                                    </form>
                                                </a>
                                                <a class="delete_file" title="Delete File" href="javascript:void(0);"></a>
                                            </div>
                                                                                <span class="file_name">-</span>

                                                                                    <div class="clear"></div>
                                                                            </div>
                                    <br />
                                </td>
                            </tr>
                                                                                <tr data-type="state_dealer_license" class="user_attachment">
                                <td colspan="2">
                                    <div class="marketplace_param_caption bold notranslate">
                                        State Dealer's License:
                                    </div>
                                    <div class="notranslate">
                                        <a class="download_file" title="Download" href="javascript:void(0);"></a>
                                                                                    <div class="attachment-actions">
                                                <a class="upload_file" title="Upload File" href="javascript:void(0);">
                                                    <form enctype="multipart/form-data">
                                                        <input type="file" name="state_dealer_license" />
                                                    </form>
                                                </a>
                                                <a class="delete_file" title="Delete File" href="javascript:void(0);"></a>
                                            </div>
                                                                                <span class="file_name">-</span>

                                                                                    <div class="clear"></div>
                                                                            </div>
                                    <br />
                                </td>
                            </tr>
                                                                                <tr data-type="registration_form_pdf" class="user_attachment">
                                <td colspan="2">
                                    <div class="marketplace_param_caption bold notranslate">
                                        Dealer Registration Form:
                                    </div>
                                    <div class="notranslate">
                                        <a class="download_file" title="Download" href="javascript:void(0);"></a>
                                                                                <span class="file_name">-</span>

                                                                            </div>
                                    <br />
                                </td>
                            </tr>
                                                </tbody>
                    </table>
                </td>
                <td>
                    <table>
                        <tbody>
                        <tr>
                            <td colspan="2">
                                <legend><strong>Seller/Buyer Information:</strong></legend>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr />
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Company Name:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_company_name" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Representative Name:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_representative_name" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Auction Access ID:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" readonly="readonly" value="" id="marketplace_auction_access_id" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Dealer License Number:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_dealer_license_number" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Fax Number:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_fax_number" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label-wrap">
                                <div class="marketplace_param_caption bold notranslate">
                                    Tax ID Number:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_tax_id" />
                                </div>
                            </td>
                        </tr>
                        <tr style="display: none;">
                            <td id="marketplace_outbound_caption">
                                <div class="marketplace_param_caption bold notranslate">
                                    Outbound Notification Url:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <div><a class="marketplace_outbound_notification_url" style="cursor: pointer"></a></div>
                                    <input type="hidden" disabled="disabled" value="" id="marketplace_outbound_notification_url" />
                                    <div style="display: none;" class="marketplace_outbound_buttons">
                                        <span title="Will be reset the current value" class="marketplace_outbound_notification_url_clear gl_button alignRight">
                                            <span>
                                                <a href="javascript:void(0);" class="button-style b_reset notranslate">
                                                    Reset to global                                                </a>
                                            </span>
                                        </span>
                                        <span class="marketplace_outbound_notification_url_save gl_button alignRight">
                                            <span>
                                                <a href="javascript:void(0);" class="button-style b_save notranslate">
                                                    Save                                                </a>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="marketplace_param_caption bold notranslate">
                                    Seller Notifications Email:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_seller_notifications_email" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="marketplace_param_caption bold notranslate">
                                    Buyer Notifications Email:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_buyer_notifications_email" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div style="white-space: normal;" class="marketplace_param_caption bold notranslate">
                                    Principle / Owner Drivers License Number:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_driver_license_number" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="marketplace_param_caption bold notranslate">
                                    Surety Bond Number:
                                </div>
                            </td>
                            <td>
                                <div class="marketplace_param_control">
                                    <input type="text" value="" id="marketplace_surety_bond_number" />
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>                                </div>
                                                                                    <div style="overflow: hidden;" id="user_editor_tab10_content">
                                
<style>
    .table_vir_user_settings_template
    {
        border-collapse: collapse;
        border-spacing: 0;
        
    }
    .table_vir_user_settings_template td {
        border: 1px solid #ccc;
        padding: 2px;
        text-align: center;
    }
</style>

<form onsubmit="return false;" id="form_vir_print_dms_template">
    <table class="table_vir_user_settings_template">
        <tbody>
            <tr>
                <td>
                    <table style="width:100%" class="ui-jqgrid-htable table_vir_user_settings_template">
                        <tbody><tr>
                            <td width="350px;"></td>
                            <td width="250px;">
                                <div style="display: inline-block; font-size: 14px; vertical-align: text-bottom; padding-left: 10px;">
                                    <b>VIR Print Template</b>
                                </div>
                            </td>
                            <td width="250px;">
                                <div style="display: inline-block; font-size: 14px; vertical-align: text-bottom; padding-left: 10px;">
                                    <b>VIR Editor (DMS/Mobile)</b>
                                </div>
                            </td>
                        </tr>
                                                     <tr>
                                <td>Image Gallery</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_image_gallery" /><input type="checkbox" checked="checked" value="1" id="vir_print_image_gallery" name="vir_print_image_gallery" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_image_gallery" /><input type="checkbox" checked="checked" value="1" id="vir_dms_image_gallery" name="vir_dms_image_gallery" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Basic Information &amp; Specs</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_basic" /><input type="checkbox" disabled="disabled" checked="checked" value="1" id="vir_print_basic" name="vir_print_basic" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_basic" /><input type="checkbox" checked="checked" value="1" id="vir_dms_basic" name="vir_dms_basic" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Location &amp; Contacts</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_location" /><input type="checkbox" checked="checked" value="1" id="vir_print_location" name="vir_print_location" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_location" /><input type="checkbox" checked="checked" value="1" id="vir_dms_location" name="vir_dms_location" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Options</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_options" /><input type="checkbox" checked="checked" value="1" id="vir_print_options" name="vir_print_options" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_options" /><input type="checkbox" checked="checked" value="1" id="vir_dms_options" name="vir_dms_options" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Description</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_description" /><input type="checkbox" checked="checked" value="1" id="vir_print_description" name="vir_print_description" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_description" /><input type="checkbox" checked="checked" value="1" id="vir_dms_description" name="vir_dms_description" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Vehicle Condition</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_condition" /><input type="checkbox" checked="checked" value="1" id="vir_print_condition" name="vir_print_condition" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_condition" /><input type="checkbox" checked="checked" value="1" id="vir_dms_condition" name="vir_dms_condition" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Functional Inspection</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_inspection" /><input type="checkbox" checked="checked" value="1" id="vir_print_inspection" name="vir_print_inspection" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_inspection" /><input type="checkbox" disabled="disabled" checked="checked" value="1" id="vir_dms_inspection" name="vir_dms_inspection" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Listing Options</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_listing_options" /><input type="checkbox" checked="checked" value="1" id="vir_print_listing_options" name="vir_print_listing_options" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_listing_options" /><input type="checkbox" checked="checked" value="1" id="vir_dms_listing_options" name="vir_dms_listing_options" />                                </td>
                            </tr>
                                                    <tr>
                                <td>Pricing</td>
                                <td>
                                    <input type="hidden" value="0" name="vir_print_pricing" /><input type="checkbox" checked="checked" value="1" id="vir_print_pricing" name="vir_print_pricing" />                                </td>
                                <td>
                                    <input type="hidden" value="0" name="vir_dms_pricing" /><input type="checkbox" checked="checked" value="1" id="vir_dms_pricing" name="vir_dms_pricing" />                                </td>
                            </tr>
                                            </tbody></table>
                </td>
            </tr>
        </tbody>
    </table>
</form>

    <span style="display: inline;" class="gl_button alignRight">
        <span>
            <a onclick="setCustomVirAccessSettings('save');" class="button-style b_save notranslate save-custom-vir-setting" href="javascript:void(0);">Save</a>
        </span>
    </span>
    <span style="display: inline;" class="gl_button alignRight save-custom-vir-setting" title="Will be reset to global Vir Access settings for current user">
        <span>
            <a onclick="setCustomVirAccessSettings('reset');" class="button-style b_reset notranslate" href="javascript:void(0);">Reset to global</a>
        </span>
    </span>
                            </div>
                                                    </div>
                        <div id="user_editor_nav">
                            <span id="user_editor_buttons">
                                <span id="user_editor_reset" class="gl_button alignRight">
                                        <span><a class="button-style b_reset notranslate" href="javascript:void(0);">Reset</a></span>
                                </span>
                                <span id="user_editor_save" class="gl_button alignRight">
                                        <span><a class="button-style b_save notranslate" href="javascript:void(0);">Save</a></span>
                                </span>
                            </span>
                        </div>
                    </div></div><div style="display: none; z-index: 1000; outline: 0px none; position: absolute;" class="ui-dialog ui-widget ui-widget-content ui-corner-all  ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-add_custom_city"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-add_custom_city">Add Custom City</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div style="" id="add_custom_city" class="ui-dialog-content ui-widget-content">
    <div style="width:290px;">
        <table style="width:290px; height:70px">
            <colgroup><col width="110" /><col width="180" />
            </colgroup><tbody><tr>
    	<td class="tb_l bold">State:</td>
                <td class="tb_r tb_r_padding">
                    <span id="state_id_city"></span>
                </td>
            </tr>
            <tr>
    	<td class="tb_l bold">City:</td>
                <td class="tb_r tb_r_padding"><input type="text" maxlength="30" class="input_field" id="custom_city" /></td>
            </tr>
        </tbody></table>
        <div style="height:26px; width:287px;">
            <span class="custom_editor_reset gl_button alignRight" entertype="city">
            <span><a href="javascript:void(0);" class="button-style b_close">Close</a></span>
            </span>
            <span class="custom_editor_save gl_button alignRight" entertype="city">
            <span><a href="javascript:void(0);" class="button-style b_save">Save</a></span>
            </span>
        </div>
    </div>
</div><div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004;"></div></div><div style="display: none; z-index: 1000; outline: 0px none; position: absolute;" class="ui-dialog ui-widget ui-widget-content ui-corner-all  ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-add_custom_state"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-add_custom_state">Add Custom State</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div style="" id="add_custom_state" class="ui-dialog-content ui-widget-content">
    <div style="width:290px;">
        <table style="width:290px; height:70px">
            <colgroup><col width="110" /><col width="180" />
            </colgroup><tbody><tr>
    	<td class="tb_l bold">State Name:</td>
                <td class="tb_r tb_r_padding"><input type="text" maxlength="30" class="input_field" id="custom_state" /></td>
            </tr>
            <tr>
        <td class="tb_l bold">State Code:</td>
                <td class="tb_r tb_r_padding"><input type="text" maxlength="2" class="input_field" id="custom_state_code" /></td>
            </tr>
        </tbody></table>
        <div style="height:26px; width:287px;">
            <span class="custom_editor_reset gl_button alignRight" entertype="state">
            <span><a href="javascript:void(0);" class="button-style b_close">Close</a></span>
            </span>
            <span class="custom_editor_save gl_button alignRight" entertype="state">
            <span><a href="javascript:void(0);" class="button-style b_save">Save</a></span>
            </span>
        </div>
    </div>
</div><div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004;"></div></div><div style="display: none; z-index: 1000; outline: 0px none; position: absolute;" class="ui-dialog ui-widget ui-widget-content ui-corner-all  ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-add_new_region"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-add_new_region">Add New Region</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div style="" id="add_new_region" class="ui-dialog-content ui-widget-content">
    <div class="region-border">
        <div class="section-first">
            <div class="title">Region Name</div>
            <div class="region-name-input">
                <input type="text" id="region-name-input" placeholder="Enter region name" />
            </div>

        </div>
        <div class="section">
            <div class="title">Available Cities and States</div>
            <div class="list-search">
                <input type="text" placeholder="Search for State and/or City" />
            </div>
            <div class="cities-box cities-box-available"><!-- template#setting_regions --></div>
        </div>
        <div class="section center">
            <div title="Add Selected Item" class="icon-right"></div>
            <div title="Remove Selected Item" class="icon-left"></div>
        </div>
        <div class="section">
            <div class="title">Selected Cities and States</div>
            <div class="list-search">
                <input type="text" placeholder="Search for State and/or City" />
            </div>
            <div class="cities-box cities-box-selected"><!-- template#setting_regions --></div>
        </div>
    </div>
    <div class="add-new-region-navigation">
            <span id="add_new_region_reset" class="gl_button alignRight">
                <span><a class="button-style b_close" href="javascript:void(0);">Cancel</a></span>
            </span>
        <span id="add_new_region_save" class="gl_button alignRight">
            <span><a class="button-style b_save" href="javascript:void(0);">Save</a></span>
        </span>
    </div>
</div><div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004;"></div></div><div style="display: none; z-index: 1000; outline: 0px none; position: absolute;" class="ui-dialog ui-widget ui-widget-content ui-corner-all  ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-edit_custom_city"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-edit_custom_city">Edit Custom City</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div style="" id="edit_custom_city" class="ui-dialog-content ui-widget-content">
<input type="hidden" value="" id="hidden_city_id" name="city_id" />
<div style="width:290px;">
	<table style="width:290px; height:70px">
    <colgroup><col width="110" /><col width="180" />
    </colgroup><tbody><tr>
    	<td class="tb_l bold">State:</td>
        <td class="tb_r tb_r_padding">
            <span id="edit_state_id_city"></span>
        </td>
    </tr>
    <tr>
    	<td class="tb_l bold">City:</td>
        <td class="tb_r tb_r_padding"><input type="text" maxlength="30" class="input_field" id="edit_city" /></td>
    </tr>
    </tbody></table>
    <div style="height:26px; width:287px;">
        <span class="edit_custom_editor_reset gl_button alignRight" entertype="city">
            <span><a href="javascript:void(0);" class="button-style b_close">Close</a></span>
        </span>
        <span class="edit_custom_editor_save gl_button alignRight" entertype="city">
            <span><a href="javascript:void(0);" class="button-style b_save">Save</a></span>
        </span>
    </div>
    </div>
</div><div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004;"></div></div><div style="display: none; z-index: 1000; outline: 0px none; position: absolute;" class="ui-dialog ui-widget ui-widget-content ui-corner-all  ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-edit_custom_state"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-edit_custom_state">Edit Custom State</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div style="" id="edit_custom_state" class="ui-dialog-content ui-widget-content">
<input type="hidden" value="" name="state_id" id="hidden_state_id" />
<div style="width:290px;">
	<table style="width:290px; height:70px">
    <colgroup><col width="110" /><col width="180" />
    </colgroup><tbody><tr>
    	<td class="tb_l bold">State Name:</td>
        <td class="tb_r tb_r_padding"><input type="text" maxlength="30" class="input_field" id="edit_state" /></td>
    </tr>
    <tr>
        <td class="tb_l bold">State Code:</td>
        <td class="tb_r tb_r_padding"><input type="text" maxlength="2" class="input_field" id="edit_custom_state_code" /></td>
    </tr>
       </tbody></table>
    <div style="height:26px; width:287px;">
        <span class="edit_custom_editor_reset gl_button alignRight" entertype="state">
            <span><a href="javascript:void(0);" class="button-style b_close">Close</a></span>
        </span>
        <span class="edit_custom_editor_save gl_button alignRight" entertype="state">
            <span><a href="javascript:void(0);" class="button-style b_save">Save</a></span>
        </span>
    </div>
    </div>
</div><div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004;"></div></div></body></html>